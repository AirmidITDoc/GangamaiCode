<div class="modal-wrapper grid-container">
    <!-- Modal header -->
    <div class="modal-header accent">
        <div class="modal-header-content">
            <div class="modal-header-title">
                <span [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}">Appointment</span>
            </div>
            <div class="modal-header-right">
                <div class="comman-date-container">
                    <div class="comman-date">
                        <app-common-date [screenFrom]="screenFromString"
                            (dateTimeEventEmitter)="getDateTime($event)"></app-common-date>
                    </div>
                    <div class="close-icon">
                        <button mat-icon-button tabIndex="-1" [mat-dialog-close]="true" aria-label="Close dialog"
                            matTooltip="Close">
                            <mat-icon>close</mat-icon>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <mat-tab-group>


        <mat-tab>
            <ng-template mat-tab-label>
                New Appointment
            </ng-template>
            <div fxLayout="column" class="new-appointment-section">
                <div fxLayout="row" style="width: 100%;">
                    <div fxFlex fxFlex.gt-sm fxLayout="column" style="overflow: auto ;" fusePerfectScrollbar
                        class="newappointment-body">
                        <form [formGroup]="searchFormGroup">
                            <div fxLayout="column" fxLayout.gt-sm="row" fxLayoutAlign="space-between start"
                                fxLayoutAlign.gt-sm="space-between center" class="appointment-header gap-12">
                                <div class="redio-container">
                                    <mat-radio-group aria-label="Select an option" formControlName="regRadio"
                                        name="regRadio" (change)="onChangeReg($event)">
                                        <mat-radio-button value="registration">New
                                            Registration
                                        </mat-radio-button>
                                        <mat-radio-button value="registrered">Registered</mat-radio-button>
                                    </mat-radio-group>
                                </div>
                                <div fxLayout="row" fxLayoutGap="18px" fxLayoutAlign="center center">
                                    <!-- <mat-form-field class=searchRegId appearance="outline" fxflex="30" *ngIf="Regflag">
                                        <input type="text" name="RegId" formControlName="RegId"
                                            placeholder="Patient Name (enter 2 char) " matInput [matAutocomplete]="auto"
                                            (input)="getSearchList()" maxlength="10">
                                        <span matSuffix style="display: flex;">
                                            <mat-icon class="mat-icon-close"
                                                (click)="searchFormGroup.get('RegId').setValue(''); isRegIdSelected = false;">close</mat-icon>
                                            <mat-icon class="mat-icon-close"
                                                (click)="searchFormGroup.get('RegId').setValue(''); isRegIdSelected = false;">search</mat-icon>
                                        </span>
                                        <mat-autocomplete #auto="matAutocomplete" [displayWith]="getOptionText"
                                            (optionSelected)='getSelectedObj($event.option.value)'>
                                            <mat-option *ngFor="let option of PatientListfilteredOptions"
                                                [value]="option">
                                                {{option.FirstName}} {{option.MiddleName}} {{option.LastName}} |
                                                {{option.RegNo}} |
                                                {{option.MobileNo}}
                                            </mat-option>
                                        </mat-autocomplete>
                                       
                                    </mat-form-field>
                                    <mat-form-field appearance="outline" fxflex="30" *ngIf="IsPhoneAppflag">
                                        <mat-label>Phone Appointment : First Name / Last Name / Mobile No </mat-label>
                                        <input type="text" name="PhoneRegId" formControlName="PhoneRegId" matInput
                                            [matAutocomplete]="auto" (input)="getPhoneAppointmentList()">
                                        <span matSuffix style="display: flex;">
                                            <mat-icon class="mat-icon-close"
                                                (click)="searchFormGroup.get('PhoneRegId').setValue(''); isRegIdSelected = false;">close</mat-icon>
                                            <mat-icon class="mat-icon-close"
                                                (click)="searchFormGroup.get('PhoneRegId').setValue(''); isRegIdSelected = false;">search</mat-icon>
                                        </span>
                                        <mat-autocomplete #auto="matAutocomplete" [displayWith]="getOptionText"
                                            (optionSelected)='getSelectedObjPhone($event.option.value)'>
                                            <mat-option *ngFor="let option of PatientListfilteredOptions"
                                                [value]="option">
                                                {{option.FirstName}} {{option.MiddleName}} {{option.LastName}} |
                                                {{option.RegNo}} |
                                                {{option.MobileNo}}
                                            </mat-option>
                                        </mat-autocomplete>
                                        <mat-error *ngIf="searchFormGroup.get('RegId').hasError('required')">
                                            Required field cannot be left blank
                                        </mat-error>
                                    </mat-form-field> -->
                                    <form [formGroup]="VisitFormGroup">
                                        <airmid-autocomplete [mode]="autocompleteModeunit"
                                            (selectDdlObject)="selectChangeunit($event)"></airmid-autocomplete>

                                    </form>
                                </div>
                            </div>
                        </form>
                        <div class="personal-panel">
                            <mat-accordion multi>
                                <mat-expansion-panel expanded>
                                    <mat-expansion-panel-header>
                                        <mat-panel-title>
                                            <div class="panel-title" fxLayout="row" fxLayoutAlign="space-between center"
                                                fxFlex="65%" fxFlex.lt-md="100%">
                                                <span>Personal Information :</span>
                                                <span>
                                                    {{RegOrPhoneflag}}
                                                    <mat-icon style="margin-left:10px;"
                                                        *ngIf="vPhoneFlage">settings_phone</mat-icon>
                                                </span>
                                            </div>
                                        </mat-panel-title>
                                    </mat-expansion-panel-header>
                                    <form [formGroup]="personalFormGroup" class="mat-form-field-100">
                                        <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="12px grid">

                                            <div fxFlex="85%" fxFlex.xs="100%" fxFlex.sm="80%" fxLayout="row wrap"
                                                fxLayoutGap="12px grid">

                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                    <airmid-autocomplete label="Prefix" formControlName="PrefixId"
                                                        [value]="data?.prefixId" [formGroup]="personalFormGroup"
                                                        [validations]="getValidationMessages().PrefixId"
                                                        [mode]="autocompleteModeprefix"
                                                        (selectDdlObject)="selectChangeprefix($event)">
                                                    </airmid-autocomplete>
                                                </div>

                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                    <mat-form-field appearance="outline">
                                                        <mat-label>First Name</mat-label>
                                                        <input name="FirstName" formControlName="FirstName"
                                                            [(ngModel)]="registerObj.firstName" placeholder="First Name"
                                                            matInput required type="text" #fname
                                                            (keydown)="onEnterfname($event)">
                                                        <mat-error
                                                            *ngIf="personalFormGroup.get('FirstName').invalid && personalFormGroup.get('FirstName').touched">
                                                            First Name is required Enter only
                                                            Alphabets</mat-error>
                                                    </mat-form-field>
                                                </div>

                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                    <mat-form-field appearance="outline">
                                                        <mat-label>Middle Name</mat-label>
                                                        <input name="MiddleName" formControlName="MiddleName"
                                                            [(ngModel)]="registerObj.middleName"
                                                            placeholder="Middle Name" matInput type="text" #mname
                                                            (keydown)="onEntermname($event)">
                                                        <mat-error class="error"
                                                            *ngIf="personalFormGroup.get('MiddleName').invalid && personalFormGroup.get('MiddleName').touched">
                                                            Middle Name is required
                                                            Enter
                                                            only Alphabets</mat-error>
                                                    </mat-form-field>
                                                </div>

                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                    <mat-form-field appearance="outline">
                                                        <mat-label>Last Name</mat-label>
                                                        <input name="LastName" formControlName="LastName"
                                                            [(ngModel)]="registerObj.lastName" placeholder="Last Name"
                                                            matInput required type="text" #lname
                                                            (keydown)="onEnterlname($event)">
                                                        <mat-error class="error"
                                                            *ngIf="personalFormGroup.get('LastName').invalid && personalFormGroup.get('LastName').touched">Last
                                                            Name is required Enter
                                                            only
                                                            Alphabets</mat-error>
                                                    </mat-form-field>
                                                </div>

                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                    <airmid-autocomplete [mode]="autocompleteModegender"
                                                        (selectDdlObject)="selectChangegender($event)"></airmid-autocomplete>

                                                </div>

                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                    <mat-button-toggle-group [(ngModel)]="dateStyle"
                                                        (change)="OnChangeDobType($event)" aria-label="Font Style">
                                                        <mat-button-toggle value="Date">Date</mat-button-toggle>
                                                        <mat-button-toggle value="Day">Day</mat-button-toggle>
                                                        <mat-button-toggle value="Month">Month</mat-button-toggle>
                                                        <mat-button-toggle value="Year">Year</mat-button-toggle>
                                                    </mat-button-toggle-group>
                                                </div>
                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                    <div fxLayout="row" class="gap-8">
                                                        <mat-form-field appearance="outline" *ngIf="dateStyle=='Year'">
                                                            <mat-label>Age (Y)</mat-label>
                                                            <input placeholder="Age (Y)" matInput
                                                                [(ngModel)]="registerObj.ageYear"
                                                                (keyup)="CalcDOB('Year',$event)"
                                                                oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,3);">
                                                        </mat-form-field>
                                                        <mat-form-field appearance="outline" *ngIf="dateStyle=='Month'">
                                                            <mat-label>Age (M)</mat-label>
                                                            <input placeholder="Age (M)" matInput
                                                                [(ngModel)]="registerObj.ageMonth"
                                                                (keyup)="CalcDOB('Month',$event)"
                                                                oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,2);">
                                                        </mat-form-field>
                                                        <mat-form-field appearance="outline" *ngIf="dateStyle=='Day'">
                                                            <mat-label>Age (D)</mat-label>
                                                            <input placeholder="Age (D)" matInput
                                                                [(ngModel)]="registerObj.ageDay"
                                                                (keyup)="CalcDOB('Day',$event)"
                                                                oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,2);">
                                                        </mat-form-field>
                                                        <mat-form-field appearance="outline">
                                                            <input matInput [matDatepicker]="validFromPicker"
                                                                formControllName="DateOfBirth" #bday
                                                                (keydown)="onEnterbday($event)"
                                                                [disabled]="dateStyle!='Date'"
                                                                (dateChange)="onChangeDateofBirth($event.value)"
                                                                placeholder="mm/dd/yyyy">
                                                            <mat-datepicker-toggle matSuffix
                                                                [for]="validFromPicker"></mat-datepicker-toggle>
                                                            <mat-datepicker #validFromPicker></mat-datepicker>
                                                        </mat-form-field>
                                                    </div>
                                                </div>

                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                    <div fxLayout="row" class="gap-8">
                                                        <mat-form-field appearance="outline">
                                                            <mat-label>Age (Y)</mat-label>
                                                            <input name="AgeYear" formControlName="AgeYear"
                                                                [(ngModel)]="registerObj.ageYear" placeholder="Age (Y)"
                                                                matInput maxlength="3" #agey readonly
                                                                oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,3);">
                                                            <mat-error
                                                                *ngIf="personalFormGroup.get('AgeYear').invalid && personalFormGroup.get('AgeYear').touched">Please
                                                                enter Age Year </mat-error>
                                                        </mat-form-field>
                                                        <mat-form-field appearance="outline">
                                                            <mat-label>Age (M)</mat-label>
                                                            <input name="AgeMonth" formControlName="AgeMonth"
                                                                [(ngModel)]="registerObj.ageMonth" placeholder="Age (M)"
                                                                matInput readonly type="number" maxlength="2" #agem
                                                                (keydown)="onEnteragem($event)"
                                                                oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,2);">
                                                            <mat-error
                                                                *ngIf="personalFormGroup.get('AgeMonth').invalid && personalFormGroup.get('AgeMonth').touched">
                                                                Please enter Age Month </mat-error>
                                                        </mat-form-field>
                                                        <mat-form-field appearance="outline">
                                                            <mat-label>Age (D)</mat-label>
                                                            <input name="AgeDay" formControlName="AgeDay"
                                                                [(ngModel)]="registerObj.ageDay" placeholder="Age (D)"
                                                                matInput type="number" maxlength="2" #aged
                                                                (keydown)="onEnteraged($event)"
                                                                oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,2);">
                                                            <mat-error
                                                                *ngIf="personalFormGroup.get('AgeDay').invalid && personalFormGroup.get('AgeDay').touched">
                                                                Please enter Age Day </mat-error>
                                                        </mat-form-field>
                                                    </div>
                                                </div>

                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">

                                                    <mat-form-field appearance="outline">
                                                        <mat-label>AadharCard Number</mat-label>
                                                        <input name="AadharCardNo" formControlName="AadharCardNo"
                                                            [(ngModel)]="registerObj.aadharCardNo"
                                                            placeholder="AadharCard Number" matInput #AadharCardNo
                                                            (keydown)="onEnterAadharCardNo($event)" type="number"
                                                            oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0, 12);">
                                                        <mat-error class="error"
                                                            *ngIf="personalFormGroup.get('AadharCardNo').invalid && personalFormGroup.get('AadharCardNo').touched">Aadhar
                                                            number is required
                                                        </mat-error>
                                                    </mat-form-field>
                                                </div>

                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                    <mat-form-field appearance="outline">
                                                        <mat-label>Address</mat-label>
                                                        <input name="Address" formControlName="Address"
                                                            [(ngModel)]="registerObj.address" placeholder="Address"
                                                            matInput #address (keydown)="onEnteraddress($event)">
                                                        <mat-error
                                                            *ngIf="personalFormGroup.get('Address').invalid && personalFormGroup.get('Address').touched">Please
                                                            enter Address </mat-error>
                                                    </mat-form-field>
                                                </div>

                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                    <airmid-autocomplete label="Area" formControlName="AreaId"
                                                        [value]="data?.areaId" [formGroup]="personalFormGroup"
                                                        [validations]="getValidationAreaMessages().AreaId"
                                                        [mode]="autocompleteModearea"
                                                        (selectDdlObject)="selectChangearea($event)">
                                                    </airmid-autocomplete>
                                                </div>

                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                    <airmid-autocomplete label="City" formControlName="CityId"
                                                        [value]="data?.cityId" [formGroup]="personalFormGroup"
                                                        [validations]="getValidationCityMessages().CityId"
                                                        [mode]="autocompleteModecity"
                                                        (selectDdlObject)="selectChangecity($event)">
                                                    </airmid-autocomplete>
                                                </div>

                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                    <airmid-autocomplete label="State" formControlName="StateId"
                                                        [value]="data?.state" [formGroup]="personalFormGroup"
                                                        [validations]="getValidationStateMessages().StateId"
                                                        [mode]="autocompleteModestate"
                                                        (selectDdlObject)="selectChangestate($event)">
                                                    </airmid-autocomplete>
                                                </div>

                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                    <airmid-autocomplete label="Country" formControlName="CountryId"
                                                        [value]="data?.countryId" [formGroup]="personalFormGroup"
                                                        [validations]="getValidationCountryMessages().CountryId"
                                                        [mode]="autocompleteModecountry"
                                                        (selectDdlObject)="selectChangecountry($event)">
                                                    </airmid-autocomplete>
                                                </div>

                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                    <airmid-autocomplete label="MaritalStatusId"
                                                        formControlName="MaritalStatusId"
                                                        [value]="data?.maritalStatusId" [formGroup]="personalFormGroup"
                                                        [validations]="getValidationMstatusMessages().MaritalStatusId"
                                                        [mode]="autocompleteModemstatus"
                                                        (selectDdlObject)="selectChangemstatus($event)">
                                                    </airmid-autocomplete>
                                                </div>

                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                    <div fxLayout="row" class="gap-8">

                                                        <mat-form-field appearance="outline">
                                                            <mat-label>Mobile Number</mat-label>
                                                            <input name="MobileNo" formControlName="MobileNo" #mobile
                                                                [(ngModel)]="registerObj.mobileNo"
                                                                placeholder="Mobile Number" matInput required
                                                                max="9999999999" min="1000000000" autocomplete="off"
                                                                maxlength="10"
                                                                oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0, 10);"
                                                                required="required" value="9876658688"
                                                                (keydown.enter)="onEntermobile($event)"
                                                                (blur)="onEntermobile($event)">
                                                            <mat-error class="error"
                                                                *ngIf="personalFormGroup.get('MobileNo').invalid && personalFormGroup.get('MobileNo').touched">10
                                                                digits Mobile number is
                                                                required</mat-error>
                                                        </mat-form-field>

                                                        <mat-form-field appearance="outline">
                                                            <mat-label>Phone Number</mat-label>
                                                            <input name="PhoneNo" formControlName="PhoneNo" #phone
                                                                [(ngModel)]="registerObj.phoneNo"
                                                                placeholder="Phone Number" matInput max="9999999999"
                                                                min="1000000000" autocomplete="off" maxlength="10"
                                                                oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0, 10);"
                                                                value="9876658688"
                                                                (keydown.enter)="onEnterphone($event)"
                                                                (blur)="onEnterphone($event)">

                                                        </mat-form-field>

                                                    </div>
                                                </div>

                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">

                                                    <!-- <airmid-autocomplete [mode]="autocompleteModereligion"
                                                        (selectDdlObject)="selectChangereligion($event)"></airmid-autocomplete> -->
                                                    <airmid-autocomplete label="RelidionId" formControlName="RelidionId"
                                                        [value]="data?.relidionId" [formGroup]="personalFormGroup"
                                                        [validations]="getValidationReligionMessages().ReligionId"
                                                        [mode]="autocompleteModemstatus"
                                                        (selectDdlObject)="selectChangemstatus($event)">
                                                    </airmid-autocomplete>
                                                </div>

                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                    <div fxLayout="row" class="gap-8">
                                                        <mat-checkbox formControlName="IsHealthCard"
                                                            (change)="chkHealthcard($event)"
                                                            style="padding: 15px;">IsHealthCard
                                                        </mat-checkbox>&nbsp;
                                                    </div>
                                                </div>
                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                    <mat-form-field appearance="outline" *ngIf="Healthcardflag">
                                                        <mat-label>Follow Up Date</mat-label>
                                                        <input matInput [matDatepicker]="pickerHealthcard"
                                                            placeholder="Choose a date" formControlName="HealthcardDate"
                                                            [(ngModel)]="HealthCardExpDate">
                                                        <mat-datepicker-toggle matSuffix
                                                            [for]="pickerHealthcard"></mat-datepicker-toggle>
                                                        <mat-datepicker #pickerHealthcard></mat-datepicker>
                                                    </mat-form-field>
                                                </div>
                                                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                    <mat-form-field appearance="outline" *ngIf="Healthcardflag">
                                                        <mat-label>Health Card No.</mat-label>
                                                        <input type="text" placeholder="Enter Health Card No" matInput
                                                            #healthcard [(ngModel)]="vhealthCardNo"
                                                            formControlName="HealthCardNo"
                                                            (keypress)="keyPressAlphanumeric($event)">
                                                    </mat-form-field>
                                                </div>
                                                <!-- </div> -->
                                            </div>
                                            <!-- Photo capture -->
                                            <div fxFlex="15%" fxFlex.xs="100%" fxFlex.sm="20%">
                                                <div class="photo-capture p-16 border border-radius-4 gap-12"
                                                    fxLayout="column">
                                                    <div class="photp-capture-image">
                                                        <img class="h-100-p w-100-p border-radius-4"
                                                            [src]="sanitizeImagePreview ? sanitizeImagePreview:'/assets/images/default.jpg'" />
                                                    </div>
                                                    <div class="photo-capture-button ">

                                                        <label
                                                            class="btn btn-primary-outline btn-hover btn-with-icon w-100-p m-0 "
                                                            (click)="openCamera('camera','photo')">
                                                            <span class="btn-icon">
                                                                <mat-icon>camera_enhance</mat-icon>
                                                            </span>

                                                            <span>Capture image</span>
                                                        </label>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </mat-expansion-panel>

                                <mat-expansion-panel expanded class="mt-12">
                                    <mat-expansion-panel-header>
                                        <mat-panel-title>
                                            Visit Details
                                        </mat-panel-title>
                                    </mat-expansion-panel-header>
                                    <form [formGroup]="VisitFormGroup" class="mat-form-field-100">
                                        <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="10px grid">


                                            <div fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                                <!-- <airmid-autocomplete [mode]="autocompleteModepatienttype"
                                                    (selectDdlObject)="selectChangepatienttype($event)"></airmid-autocomplete> -->
                                                <airmid-autocomplete label="PatientTypeID"
                                                    formControlName="PatientTypeID" [value]="data?.patientTypeID"
                                                    [formGroup]="VisitFormGroup"
                                                    [validations]="getValidationPatientTypeMessages().PatientTypeID"
                                                    [mode]="autocompleteModepatienttype"
                                                    (selectDdlObject)="selectChangepatienttype($event)">
                                                </airmid-autocomplete>
                                            </div>

                                            <div fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">

                                                <!-- <airmid-autocomplete [mode]="autocompleteModetariff"
                                                    (selectDdlObject)="selectChangetariff($event)"></airmid-autocomplete> -->
                                                <airmid-autocomplete label="TariffId" formControlName="TariffId"
                                                    [value]="data?.trariffId" [formGroup]="VisitFormGroup"
                                                    [validations]="getValidationTariffMessages().TariffId"
                                                    [mode]="autocompleteModetariff"
                                                    (selectDdlObject)="selectChangetariff($event)">
                                                </airmid-autocomplete>
                                            </div>

                                            <div fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%"
                                                *ngIf="isCompanySelected">

                                                <!-- <airmid-autocomplete [mode]="autocompleteModecompany"
                                                    (selectDdlObject)="selectChangecompany($event)"></airmid-autocomplete> -->
                                                <airmid-autocomplete label="CompanyId" formControlName="CompanyId"
                                                    [value]="data?.companyId" [formGroup]="VisitFormGroup"
                                                    [validations]="getValidationMessages().CompanyId"
                                                    [mode]="autocompleteModecompany"
                                                    (selectDdlObject)="selectChangecompany($event)">
                                                </airmid-autocomplete>


                                            </div>

                                            <div fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%"
                                                *ngIf="isCompanySelected">

                                                <!-- <airmid-autocomplete [mode]="autocompleteModesubcompany"
                                                    (selectDdlObject)="selectChangesubcompany($event)"></airmid-autocomplete> -->

                                                <airmid-autocomplete label="SubCompanyId" formControlName="SubCompanyId"
                                                    [value]="data?.subCompanyId" [formGroup]="VisitFormGroup"
                                                    [validations]="getValidationMessages().SubCompanyId"
                                                    [mode]="autocompleteModesubcompany"
                                                    (selectDdlObject)="selectChangesubcompany($event)">
                                                </airmid-autocomplete>

                                            </div>

                                            <div fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">

                                                <!-- <airmid-autocomplete [mode]="autocompleteModedepartment"
                                                    (selectDdlObject)="selectChangedepartment($event)"></airmid-autocomplete> -->

                                                <airmid-autocomplete label="Departmentid" formControlName="Departmentid"
                                                    [value]="data?.departmentId" [formGroup]="VisitFormGroup"
                                                    [validations]="getValidationDepartmentMessages().Departmentid"
                                                    [mode]="autocompleteModedepartment"
                                                    (selectDdlObject)="selectChangedepartment($event)">
                                                </airmid-autocomplete>
                                            </div>

                                            <div fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">

                                                <!-- <airmid-autocomplete [mode]="autocompleteModedeptdoc"
                                                    (selectDdlObject)="selectChangedeptdoc($event)"></airmid-autocomplete> -->

                                                <airmid-autocomplete label="DoctorID" formControlName="DoctorID"
                                                    [value]="data?.doctorID" [formGroup]="VisitFormGroup"
                                                    [validations]="getValidationdeptDocMessages().DoctorID"
                                                    [mode]="autocompleteModedeptdoc"
                                                    (selectDdlObject)="selectChangedeptdoc($event)">
                                                </airmid-autocomplete>
                                            </div>

                                            <div fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">

                                                <!-- <airmid-autocomplete [mode]="autocompleteModerefdoc"
                                                    (selectDdlObject)="selectChangerefdoc($event)"></airmid-autocomplete> -->
                                                <airmid-autocomplete label="RefDocId" formControlName="RefDocId"
                                                    [value]="data?.refDocId" [formGroup]="VisitFormGroup"
                                                    [validations]="getValidationRefDocMessages().refDocId"
                                                    [mode]="autocompleteModerefdoc"
                                                    (selectDdlObject)="selectChangerefdoc($event)">
                                                </airmid-autocomplete>
                                            </div>

                                            <div fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">

                                                <!-- <airmid-autocomplete [mode]="autocompleteModepurpose"
                                                    (selectDdlObject)="selectChangepurpose($event)"></airmid-autocomplete> -->
                                                <airmid-autocomplete label="PurposeId" formControlName="PurposeId"
                                                    [value]="data?.purposeId" [formGroup]="VisitFormGroup"
                                                    [validations]="getValidationPurposeMessages().PurposeId"
                                                    [mode]="autocompleteModepurpose"
                                                    (selectDdlObject)="selectChangepurpose($event)">
                                                </airmid-autocomplete>
                                            </div>

                                        </div>
                                    </form>
                                </mat-expansion-panel>
                            </mat-accordion>
                            <div class="new-appointment-actions gap-8 mt-12" fxLayout="row" fxLayoutAlign="end center">

                                <button class="btn btn-danger-outline" (click)="onClose()">Reset</button>
                                <button class="btn btn-primary " color="accent" (click)="OnsaveNewRegister()">
                                    <span>Save</span>
                                </button>
                            </div>


                        </div>
                    </div>
                </div>
            </div>
        </mat-tab>

        <mat-tab>
            <ng-template mat-tab-label>
                Document Upload
            </ng-template>
            <div fxLayout="column" class="upload-body">
                <!-- <form [formGroup]="personalFormGroup">
                    <mat-form-field appearance="outline" style="width:40%;margin-left:20px;">
                        <input type="text" name="RegId" formControlName="RegId"
                            placeholder="Patient Name (enter 2 char) " matInput [matAutocomplete]="auto1"
                            (input)="getSearchDocuploadPatientList()">
                        <span matSuffix style="display: flex;">
                            <mat-icon class="mat-icon-close"
                                (click)="personalFormGroup.get('RegId').setValue(''); isRegIdSelected1 = false;">close</mat-icon>
                            <mat-icon class="mat-icon-close"
                                (click)="personalFormGroup.get('RegId').setValue(''); isRegIdSelected1 = false;">search</mat-icon>
                        </span>
                        <mat-autocomplete #auto1="matAutocomplete" [displayWith]="getPatientOptionText"
                            (optionSelected)='getPatientSelectedObj($event.option.value)'>
                            <mat-option *ngFor="let option of filteredOptions" [value]="option">
                                {{option.FirstName}} {{option.MiddleName}} {{option.LastName}} | {{option.RegNo}} |
                                {{option.MobileNo}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                    <div class="patient-info" *ngIf="false">
                        <span>RegId:{{RegId}} | </span>
                        <span> Patient Name : {{PatientName}} | </span>
                        <span> VisitId: {{VisitId}} | </span>
                    </div>
                    <span style="margin-left: 20px;font-size: medium;font-weight: bold;color: blue;">RegId:{{RegId}} |
                        Patient
                        Name : {{PatientName}} | VisitId: {{VisitId}}
                    </span>
                </form> -->

                <form [formGroup]="imageForm">
                    <div class="upload-container">
                        <div fxLayout="row" fxLayoutAlign="space-between center" fxLayout.lt-sm="column"
                            fxLayout.lt-md="column">
                            <div class="upload-option-div">
                                <div class="img-container gap-12">
                                    <input formControlName="imageFile" type="file" #attachments
                                        accept="image/*,application/pdf" multiple name="file" id="file"
                                        class="inputfile" (change)="onImageFileChange($event)"
                                        style="margin-right: 10px;" />

                                    <label class="btn btn-primary-outline btn-with-icon btn-hover btn-xs" for="file">
                                        <span class="btn-icon">
                                            <mat-icon>cloud_upload</mat-icon>
                                        </span>
                                        <span>Browse</span>
                                    </label>
                                    <label class="btn btn-primary-outline btn-with-icon btn-hover btn-xs"
                                        (click)="openCamera('camera','doc')">
                                        <span class="btn-icon">
                                            <mat-icon>camera_enhance</mat-icon>
                                        </span>
                                        <span>Capture</span>
                                    </label>
                                </div>
                            </div>
                            <div>
                                <button class="btn btn-primary" [disabled]="imgDataSource.data.length == 0"
                                    (click)="onSubmitImgFiles()">Upload Image/Pdf</button>
                            </div>
                        </div>
                    </div>
                    <div style="margin-top: 10px;">
                        <mat-table #table matSort [dataSource]="imgDataSource" class="table2 auto-height-table h-400"
                            [@animateStagger]="{value:'50'}">

                            <ng-container matColumnDef="DocumentName">
                                <mat-header-cell *matHeaderCellDef style="margin-right: 5px;">
                                    Document Name
                                </mat-header-cell>
                                <mat-cell *matCellDef="let contact">
                                    {{contact.name}}
                                </mat-cell>
                            </ng-container>

                            <ng-container matColumnDef="DocumentPath">
                                <mat-header-cell *matHeaderCellDef>
                                    Document Path
                                </mat-header-cell>
                                <mat-cell *matCellDef="let contact">
                                    <img [src]="contact.url" style="width: 80px;height: 40px;margin: 3px;"
                                        (click)="onViewImage(contact.url, 'img')"
                                        *ngIf="!contact.name.endsWith('.pdf');else content" />
                                    <ng-template #content>
                                        <button mat-icon-button (click)="viewPdf(contact)" color="warn">
                                            <mat-icon>visibility</mat-icon>
                                        </button></ng-template>
                                </mat-cell>
                            </ng-container>

                            <ng-container matColumnDef="buttons" sticky>
                                <mat-header-cell *matHeaderCellDef>
                                    Action
                                </mat-header-cell>
                                <mat-cell *matCellDef="let contact">
                                    <button mat-icon-button (click)="deleteImage(contact)" color="warn">
                                        <mat-icon>delete_outline</mat-icon>
                                    </button>
                                </mat-cell>
                            </ng-container>

                            <ng-container matColumnDef="noData">
                                <mat-footer-cell *matFooterCellDef colspan="6">
                                    <span>No Data Found</span>
                                </mat-footer-cell>
                            </ng-container>

                            <mat-header-row class="accent" *matHeaderRowDef="displayedColumns1;">
                            </mat-header-row>
                            <mat-row *matRowDef="let contact; columns: displayedColumns1;"></mat-row>
                            <mat-footer-row *matFooterRowDef="['noData']"
                                [ngClass]="{'hide':!(imgDataSource!=null && imgDataSource.data.length==0)}">
                            </mat-footer-row>
                        </mat-table>
                    </div>
                </form>
            </div>

        </mat-tab>
    </mat-tab-group>
</div>