<div class="page-layout modal-wrapper inner-sidebar inner-scroll" dynamicTableHeight>
    <div class="top-header header accent p-16">
        <div class="top-header-info">
            <div class="top-header-title" fxLayoutAlign="space-between">
                <span [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}">
                    Scheduler
                </span>

            </div>
        </div>
        <div class="gap-8" fxLayout="column" fxLayout.gt-xs="row" fxLayoutAlign="start center">
            <div class="close-icon">
                <button mat-icon-button tabIndex="-1" [mat-dialog-close]="true" aria-label="Close dialog"
                    matTooltip="Close">
                    <mat-icon>close</mat-icon>
                </button>
            </div>
        </div>
    </div>

    <div class="modal-body p-12">
        <div class="modal-body-container">
            <div fxLayout="column" class="h-100-p" fxLayoutGap="10px">
                <form [formGroup]="_PhysiotherapistScheduleService.SchedulerForm">
                    <div fxLayout="column" fxLayoutGap="10px">
                        <mat-card style="padding: 8px;">
                            <div fxLayout="row" fxLayoutGap="6px"> 

                                <mat-form-field appearance="outline">
                                    <mat-label>Start Date</mat-label>
                                    <input matInput [matDatepicker]="picker" placeholder="Choose a date"
                                        formControlName="StartDate"  [(ngModel)]="startDate">
                                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                    <mat-datepicker #picker></mat-datepicker>
                                </mat-form-field> 

                                <mat-form-field appearance="outline">
                                    <mat-label>No. Of Intervals</mat-label>
                                    <input matInput formControlName="NoIntervals" placeholder="Enter No. Of Intervals"
                                     [(ngModel)]="intervalInput" (keyup)="onDaysChange()">
                                </mat-form-field> 
                                <!--     type="number" min="1" -->

                                <mat-form-field appearance="outline">
                                    <mat-label>End Date</mat-label>
                                    <input matInput [matDatepicker]="picker1" placeholder="Choose a date"
                                        formControlName="EndDate"   [(ngModel)]="specificDate">
                                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                    <mat-datepicker #picker1></mat-datepicker>
                                </mat-form-field> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                                <button type="button" class="btn btn-primary" (click)="generateSchedule()"> Generate Schedule
                                </button>

                            </div>

                        </mat-card>
                    </div>
                </form> 

                <mat-card style="padding: 8px;">
                    <div fxLayout="column">
                        <div class="prescription-title">
                            <span style="font-weight: 700;margin: 6px 10px 0px 5px">
                                Scheduled Appointments
                            </span>
                        </div>
                        <hr>
                        <div fxFlex="100%">
                            <mat-table #table class="table3 max-h-700" matSort [dataSource]="dsSchedulerList"
                                [@animateStagger]="{ value: '50' }">

                                <ng-container matColumnDef="Action" stickyEnd>
                                    <mat-header-cell *matHeaderCellDef>Action</mat-header-cell>
                                    <mat-cell *matCellDef="let row">
                                        <button mat-icon-button (click)="deleteTableRow(row)" color="warn">
                                            <mat-icon>delete_outline</mat-icon>
                                        </button>
                                    </mat-cell>
                                </ng-container>

                                <ng-container matColumnDef="SrNo">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header
                                        class="w-60">Sr.No</mat-header-cell>
                                    <mat-cell *matCellDef="let contact; let index = index" class="w-60"> 
                                        <mat-checkbox aria-label="Checked" (change)="tableElementChecked($event, contact)">
                                        </mat-checkbox>&nbsp;&nbsp;
                                        <span>{{ index + 1 }}</span>
                                    </mat-cell>
                                </ng-container>
                                <ng-container matColumnDef="PatientName">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header fxHide fxShow.gt-sm
                                        class="w-200">Patient
                                        Name</mat-header-cell>
                                    <mat-cell *matCellDef="let contact; let i = index" fxShow.gt-sm class="w-200">
                                        <span>{{ contact.PatientName }}</span>
                                    </mat-cell>
                                </ng-container>

                                <ng-container matColumnDef="DoctorName">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header fxHide fxShow.gt-sm
                                        class="w-200">Doctor
                                        Name</mat-header-cell>
                                    <mat-cell *matCellDef="let contact; let i = index" fxShow.gt-sm class="w-200">
                                        <span>{{ contact.DoctorName }}</span>
                                    </mat-cell>
                                </ng-container>

                                <ng-container matColumnDef="StartDate">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm class="w-120">Start
                                        Date</mat-header-cell>
                                    <mat-cell *matCellDef="let contact" fxShow.gt-sm class="w-120">
                                        {{ contact.StartDate}}
                                    </mat-cell>
                                </ng-container>

                                <ng-container matColumnDef="EndDate">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm class="w-120">End
                                        Date</mat-header-cell>
                                    <mat-cell *matCellDef="let contact" fxShow.gt-sm class="w-120">
                                        {{ contact.EndDate | date : 'dd/MM/YYYY' }}
                                    </mat-cell>
                                </ng-container>

                                <ng-container matColumnDef="Intervals">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header
                                        fxShow.gt-sm>Intervals</mat-header-cell>
                                    <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                        {{ contact.Intervals }}
                                    </mat-cell>
                                </ng-container>

                                <ng-container matColumnDef="loading">
                                    <mat-header-cell *matFooterCellDef colspan="6"
                                        style="display: none"></mat-header-cell>
                                </ng-container>

                                <ng-container matColumnDef="noData">
                                    <mat-footer-cell *matFooterCellDef colspan="6">no data found...</mat-footer-cell>
                                </ng-container>

                                <mat-header-row class="accent"
                                    *matHeaderRowDef="displayingcolumns; sticky: true"></mat-header-row>
                                <mat-row *matRowDef="let contact; columns: displayingcolumns;" class="contact"
                                    [@animate]="{ value: '*', params: { y: '100%' } }"></mat-row>
                                <mat-footer-row *matFooterRowDef="['loading']"
                                    [ngClass]="{ hide: !(sIsLoading == 'loading-data') }"></mat-footer-row>
                                <mat-footer-row *matFooterRowDef="['noData']"
                                    [ngClass]="{ hide: !(dsSchedulerList != null && dsSchedulerList.data.length == 0) }"></mat-footer-row>
                            </mat-table>
                        </div>
                    </div>
                </mat-card> 

            </div>
        </div>
    </div>


    <!-- <div class="modal-footer">
        <div class="modal-footer-buttons">
            <button class="btn btn-danger-outline" (click)="onSave()"></button>
            <button class="btn btn-danger-outline" (click)="onSave()"></button>
        </div>
    </div> -->
</div>