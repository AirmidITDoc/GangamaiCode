<div class="page-layout modal-wrapper grid-container">
    <!-- HEADER -->
    <div class="modal-header accent">
        <div class="modal-header-content">
            <div class="modal-header-title">
                <span [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}"> Cross Consultation </span>
            </div>
            <div class="modal-header-right">
                <div class="comman-date-container">
                    <!-- <div class="comman-date">
                        <app-common-date [screenFrom]="screenFromString"
                            (dateTimeEventEmitter)="getDateTime($event)"></app-common-date>
                    </div> -->
                    <div class="close-icon">
                        <button mat-icon-button tabIndex="-1" (click)="onClose()" aria-label="Close dialog">
                            <mat-icon>close</mat-icon>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div style="padding:3px;">
        <div fxlayout="row">
         
                <div fxFlex.gt-sm="100%" fxFlex class="patient-info-container">
                    <div class="patient-info-container">
                        <div class="patient-info-box">
                            <div class="patient-info-title border-bottom pb-2">
                                <span class="h1">Patient Information</span>
                            </div>
                            <div class="patient-info-box my-8">
                                <div class="patient-info-row row-gap-4" fxLayout="row wrap">

                                    <div class="patient-col gap-3" fxFlex="50%" fxFlex.gt-sm="25%">
                                        <span class="patient-col-key ">Visist Id</span>
                                        <span>:</span>
                                        <span
                                            class="patient-col-value">{{PatientHeaderObj.VisitId}}</span>
                                    </div>
                                    <div class="patient-col gap-3" fxFlex="50%" fxFlex.gt-sm="25%">
                                        <span class="patient-col-key ">Patient Name</span>
                                        <span>:</span>
                                        <span
                                            class="patient-col-value">{{PatientName}}</span>
                                    </div>
                                    <div class="patient-col gap-3" fxFlex="50%" fxFlex.gt-sm="25%">
                                        <span class="patient-col-key">OPIPNo</span>
                                        <span>:</span>
                                        <span class="patient-col-value">{{VisitId}}</span>
                                    </div>
                                    <div class="patient-col gap-3" fxFlex="50%" fxFlex.gt-sm="25%">
                                        <span class="patient-col-key">Visit Date</span>
                                        <span>:</span>
                                        <span class="patient-col-value">{{VisitDate}}</span>
                                    </div>
                                    <!-- <div class="patient-col gap-3" fxFlex="50%" fxFlex.gt-sm="25%">
                                        <span class="patient-col-key">CompanyName</span>
                                        <span>:</span>
                                        <span class="patient-col-value">{{CompanyName}}</span>
                                    </div>
                                    <div class="patient-col gap-3" fxFlex="50%" fxFlex.gt-sm="25%">
                                        <span class="patient-col-key ">{{Tarrifname}}</span>
                                        <span>:</span>
                                        <span class="patient-col-value"></span>
                                    </div> -->
                                   
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            
            <!-- ================================ LABEL HEADER  -->
        </div>
        <mat-card class="example-card" name="m1">
            <div fxFlexFill fxLayout="column">
                <form [formGroup]="InfoFormGroup" style="border: blue;">
                    <h3 style="font-weight:bold ;">Cross Consultation Information</h3>
                    <div fxLayoutGap="5px">
                        
                        <mat-form-field appearance="outline">
                            <input matInput type="datetime-local" placeholder="Visit Date / Time" formControlName="VisitDate"
                            [ngModel]="date | date:'yyyy-MM-ddTHH:mm'"/> 
                        </mat-form-field>

                        <mat-form-field appearance="outline" fxFlex="30%" fxFlex.xs="100%" fxFlex.sm="33%">
                            <mat-label>Department</mat-label>
                            <input matAutocompletePosition="below" type="text" placeholder="Select Department" matInput
                                #dept (keydown)="onEnterdept($event)" formControlName="Departmentid"
                                [matAutocomplete]="autoDep1" required>
                            <span matSuffix style="display: flex;">
                                <mat-icon class="mat-icon-close"
                                    (click)="InfoFormGroup.get('Departmentid').setValue(''); isDepartmentSelected = false;">close</mat-icon>
                                <mat-icon class="mat-icon-close"
                                    (click)="InfoFormGroup.get('Departmentid').setValue(''); isDepartmentSelected = false;">search</mat-icon>
                            </span>

                            <mat-autocomplete #autoDep1="matAutocomplete" [displayWith]="getOptionTextDep">
                                <mat-option *ngFor="let option of filteredOptionsDep | async" [value]="option"
                                    (onSelectionChange)="OnChangeDoctorList(option)">
                                    {{option.departmentName}}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>&nbsp;

                        <mat-form-field appearance="outline" fxFlex="30%" fxFlex.xs="100%" fxFlex.sm="33%">
                            <mat-label>Doctor Name</mat-label>
                            <input matAutocompletePosition="below" type="text" placeholder="Pick one" matInput #deptdoc
                                (keydown)="onEnterdeptdoc($event)" formControlName="DoctorID" 
                                [matAutocomplete]="autoDoctor1" required>
                            <span matSuffix style="display: flex;">
                                <mat-icon class="mat-icon-close"
                                    (click)="InfoFormGroup.get('DoctorID').setValue(''); isDoctorSelected = false;">close</mat-icon>
                                <mat-icon class="mat-icon-close"
                                    (click)="InfoFormGroup.get('DoctorID').setValue(''); isDoctorSelected = false;">search</mat-icon>
                            </span>

                            <mat-autocomplete #autoDoctor1="matAutocomplete" [displayWith]="getOptionTextDoc">
                                <mat-option *ngFor="let option of filteredOptionsDoc | async" [value]="option"
                                    (onSelectionChange)="isDoctorSelected = true;" (onSelectionChange)="onChangeDoctor(option)">
                                    {{option.Doctorname }} <b>|</b> {{option.DepartmentName }} <b>|</b>
                                    {{option.DoctorId
                                    }}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>

                        <div>

                            <!-- <mat-form-field appearance="outline" fxFlex>
                                <input matInput [matDatepicker]="picker2" placeholder="Choose a VisitDate"
                                    name="ReportingDate" formControlName="VisitDate" [(ngModel)]="value">
                                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                <mat-datepicker #picker2></mat-datepicker>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex>
                                <input matInput [matDatepicker]="picker3" placeholder="Choose a VisitTime"
                                    name="ReportingTime" formControlName="VisitTime" [(ngModel)]="value">
                                <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                                <mat-datepicker #picker3></mat-datepicker>
                            </mat-form-field> -->
                            <!-- {{date}} -->
                            <!-- <mat-form-field>
                                <input matInput type="datetime-local" placeholder="Visit date" formControlName="VisitDate"
                                [value]="date" (change)="date=$event.target.value" /> 
                            </mat-form-field> -->

                         
                        </div>
                    </div>

                    <!-- <div class="footer-navigation-container" style=" float: right;">

                        <div class="next-div">

                            <button class="next-btn" (click)="onSubmit()" style="border-radius: 16px;"
                            [disabled]="saveflag">
                                <span style="display: flex;justify-content: center;">
                                    <mat-spinner *ngIf="isLoading=='submit'" [color]="white"
                                        [diameter]="20"></mat-spinner>
                                    <span style="margin-right: 10px;">Save</span>
                                </span>
                            </button>
                            
                            <button class="footer-btn" (click)="onClose()" style="border-radius: 16px;">Cancel</button>
                        </div>
                    </div> -->


                    <div class="new-appointment-actions gap-8 mt-12" fxLayout="row" fxLayoutAlign="end center">
                         
                        <button class="btn btn-danger-outline" (click)="onClose()">Cancle</button>
                        <button class="btn btn-primary " color="accent" (click)="onSubmit()"  [disabled]="saveflag">
                            <span>Save</span>
                        </button>
                    </div>
                </form>
            </div>
        </mat-card>

    </div>
</div>