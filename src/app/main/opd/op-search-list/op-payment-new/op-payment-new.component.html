<div class="parent-container">
    <fieldset style="font-size: 17px;">
        <legend>Bill Information</legend>
        <div>
            <fieldset class="fieldset-div">
                <legend>Patient Information</legend>
                <div fxFlexFill fxLayout="row" fxLayoutAlign="space-between center" class="patient-info">
                    <div class="patient-sub">
                        <div class="patient-info-1-111" fxLayout="row" fxLayoutAlign="space-between center">
                            <div class="flex-item" style="width: 375px;">
                                <h3 style="font-weight: bold; font-size: 17px;">Patient Name</h3>
                            </div>
                            <div class="flex-item-middle">
                                <h6 style="font-size: 17px;">:</h6>
                            </div>
                            <div class="flex-item">
                                <h6 style="font-size: 17px;">Vijay Shelkar</h6>
                            </div>
                        </div>
                        <div class="patient-info-1-2" fxLayout="row" fxLayoutAlign="space-between center">
                            <div class="flex-item" style="width: 375px;">
                                <h3 style="font-weight: bold; font-size: 17px;">Patient Category</h3>
                            </div>
                            <div class="flex-item-middle">
                                <h6 style="font-size: 17px;">:</h6>
                            </div>
                            <div class="flex-item">
                                <h6 style="font-size: 17px;">Staff</h6>
                            </div>
                        </div>
                    </div>

                    <div class="patient-sub">
                        <div class="patient-info-1-111" fxLayout="row" fxLayoutAlign="space-between center">
                            <div class="flex-item item-header">
                                <h3 style="font-weight: bold; font-size: 17px;">Gender</h3>
                            </div>
                            <div class="flex-item-middle">
                                <h6 style="font-size: 17px;">:</h6>
                            </div>
                            <div class="flex-item">
                                <h6 style="font-size: 17px;">Male</h6>
                            </div>
                        </div>
                        <div class="patient-info-1-2" fxLayout="row" fxLayoutAlign="space-between center">
                            <div class="flex-item item-header">
                                <h3 style="font-weight: bold; font-size: 17px;">Tariff</h3>
                            </div>
                            <div class="flex-item-middle">
                                <h6 style="font-size: 17px;">:</h6>
                            </div>
                            <div class="flex-item">
                                <h6 style="font-size: 17px;">Hospital</h6>
                            </div>
                        </div>
                    </div>

                    <div class="patient-sub">
                        <div class="patient-info-1-111" fxLayout="row" fxLayoutAlign="space-between center">
                            <div class="flex-item item-header">
                                <h3 style="font-weight: bold; font-size: 17px;">Age</h3>
                            </div>
                            <div class="flex-item-middle">
                                <h6 style="font-size: 17px;">:</h6>
                            </div>
                            <div class="flex-item">
                                <h6 style="font-size: 17px;">30</h6>
                            </div>
                        </div>
                        <div class="patient-info-1-2" fxLayout="row" fxLayoutAlign="space-between center">
                            <div class="flex-item item-header">
                                <h3 style="font-weight: bold; font-size: 17px;">Company</h3>
                            </div>
                            <div class="flex-item-middle">
                                <h6 style="font-size: 17px;">:</h6>
                            </div>
                            <div class="flex-item">
                                <h6 style="font-size: 17px;">Airmid</h6>
                            </div>
                        </div>
                    </div>

                    <div class="patient-sub">
                        <div class="patient-info-1-111" fxLayout="row" fxLayoutAlign="space-between center">
                            <div class="flex-item item-header">
                                <h3 style="font-weight: bold; font-size: 17px;">Patient Source</h3>
                            </div>
                            <div class="flex-item-middle">
                                <h6 style="font-size: 17px;">:</h6>
                            </div>
                            <div class="flex-item">
                                <h6 style="font-size: 17px;">Hospital</h6>
                            </div>
                        </div>
                        <div class="patient-info-1-2" fxLayout="row" fxLayoutAlign="space-between center">
                            <div class="flex-item item-header">
                                <h3 style="font-weight: bold; font-size: 17px;">Doctor</h3>
                            </div>
                            <div class="flex-item-middle">
                                <h6 style="font-size: 17px;">:</h6>
                            </div>
                            <div class="flex-item">
                                <h6 style="font-size: 17px;">XYZ XYZ Xyz</h6>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>
        <div>
            <fieldset class="fieldset-div">
                <legend>Patient Bill Information</legend>
                <div fxFlexFill fxLayout="row" fxLayoutAlign="space-between center" class="patient-info">
                    <div class="patient-bill-info" fxLayout="row wrap" fxLayoutGap="20px grid" fxLayoutAlign="space-between center">
                        <div class="bill-header" fxFlex="200px">
                            Advance Available
                        </div>
                        <div>
                            :
                        </div>
                        <div fxFlex="200px">
                            <!-- <fa-icon [icon]="['fas', 'cog']"></fa-icon> -->
                            145464
                        </div>
                    </div>

                    <div class="patient-bill-info" fxLayout="row wrap" fxLayoutGap="20px grid" fxLayoutAlign="space-between center">
                        <div fxFlex="200px">
                            <mat-checkbox>Consume Advance</mat-checkbox>
                        </div>
                    </div>

                    <div class="patient-bill-info" fxLayout="row wrap" fxLayoutGap="20px grid" fxLayoutAlign="space-between center">
                        <div fxFlex="150px">
                            Bill Amount
                        </div>
                        <div>
                            :
                        </div>
                        <div fxFlex="200px">
                            <!-- <i class="fas fa-rupee-sign"></i> -->
                            <span>{{netPayAmt}}</span>
                        </div>
                    </div>

                    <div class="patient-bill-info" fxLayout="row wrap" fxLayoutGap="20px grid" fxLayoutAlign="space-between center">
                        <div fxFlex="200px">
                            Net Payable Amount
                        </div>
                        <div>
                            :
                        </div>
                        <div fxFlex="200px">
                            <!-- <i class="fas fa-rupee-sign"></i> -->
                            <span>{{this.netPayAmt}}</span>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>

        <div>
            <fieldset>
                <legend>Payment Details</legend>
                <form [formGroup]="patientDetailsFormGrp">
                    <!-- First Row -->
                    <div fxFlexFill fxLayout="column" class="patient-details" fxLayoutGap="15px">
                        <div fxLayout="row wrap" fxLayoutGap="20px grid" class="field-row payment-container">
                            <mat-form-field appearance="outline" fxFlex="16%">
                                <mat-label>Payment Type</mat-label>
                                <mat-select formControlName="paymentTyp1" [(ngModel)]="selectedPaymnet1"
                                    (selectionChange)="onPaymentChange(1, $event.value)" required>
                                    <mat-option *ngFor="let ele of paymentArr1" [value]="ele.value">
                                        {{ele.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="16%">
                                <mat-label>Amount</mat-label>
                                <input matInput formControlName="amount1" (keyup)="amountChange1('amount1')" [(ngModel)]="amount1" required>
                            </mat-form-field>
                            <ng-container *ngIf="selectedPaymnet1 != 'cash'">
                                <mat-form-field appearance="outline" fxFlex="16%">
                                    <mat-label>Reference Number</mat-label>
                                    <input matInput formControlName="referenceNumber">
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="16%">
                                    <mat-label>Bank Name</mat-label>
                                    <input matInput formControlName="bankName">
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="16%">
                                    <mat-label>Registration Date</mat-label>
                                    <input matInput [matDatepicker]="datepickerReg" formControlName="registrationDate"
                                        (click)="datepickerReg.open()" [max]="nowDate">
                                    <mat-datepicker-toggle matSuffix [for]="datepickerReg"></mat-datepicker-toggle>
                                    <mat-datepicker #datepickerReg>
                                    </mat-datepicker>
                                </mat-form-field>
                            </ng-container>
                            <div fxFlex="16%">
                                <div [ngClass]="amount1 < netPayAmt ? 'add-icon enable-1-add' : 'add-icon disable-1-add'">
                                    <mat-icon (click)="onAddClick('cash')"> add </mat-icon>
                                </div>
                            </div>
                        </div>
                        <!-- Second Row -->
                        <div fxLayout="row wrap" fxLayoutGap="20px grid" class="field-row" *ngIf="paymentRowObj.cash">
                            <mat-form-field appearance="outline" fxFlex="16%">
                                <mat-label>Payment Type</mat-label>
                                <mat-select formControlName="paymentType2" [(ngModel)]="selectedPaymnet2"
                                    (selectionChange)="onPaymentChange(2, $event.value)">
                                    <mat-option *ngFor="let ele of paymentArr2" [value]="ele.value">
                                        {{ele.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="16%">
                                <mat-label>Amount</mat-label>
                                <input matInput formControlName="amount2" (keyup)="amountChange2('amount2')" [(ngModel)]="amount2" required>
                                <mat-error *ngIf="patientDetailsFormGrp.get('amount2').hasError('required')">
                                    Required field cannot be left blank
                                </mat-error>
                            </mat-form-field>
                            <ng-container *ngIf="selectedPaymnet2 != 'cash'">
                                <mat-form-field appearance="outline" fxFlex="16%">
                                    <mat-label>Reference Number</mat-label>
                                    <input matInput formControlName="referenceNo1">
                                    <mat-error *ngIf="patientDetailsFormGrp.get('referenceNo1').hasError('required')">
                                        Required field cannot be left blank
                                    </mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="16%">
                                    <mat-label>Bank Name</mat-label>
                                    <input matInput formControlName="bankName1">
                                    <mat-error *ngIf="patientDetailsFormGrp.get('bankName1').hasError('required')">
                                        Required field cannot be left blank
                                    </mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="16%">
                                    <mat-label>Registration Date</mat-label>
                                    <input matInput [matDatepicker]="datepickerReg" formControlName="regDate"
                                        (click)="datepickerReg.open()" [max]="nowDate">
                                    <mat-datepicker-toggle matSuffix [for]="datepickerReg"></mat-datepicker-toggle>
                                    <mat-datepicker #datepickerReg>
                                    </mat-datepicker>
                                    <mat-error *ngIf="patientDetailsFormGrp.get('regDate').hasError('required')">
                                        Required field cannot be left blank
                                    </mat-error>
                                </mat-form-field>
                            </ng-container>
                            <div fxLayout="row" fxLayoutGap="15px" fxFlex="16%">
                                <div class="remove-icon" (click)="onRemoveClick('cash')">
                                    <span>-</span>
                                </div>
                                <div [ngClass]="amount3 < netPayAmt ? 'add-icon enable-1-add' : 'add-icon disable-1-add'" (click)="onAddClick('upi')">
                                    <mat-icon> add </mat-icon>
                                </div>
                            </div>
                        </div>
                        <!-- Third Row -->
                        <div fxLayout="row wrap" fxLayoutGap="20px grid" class="field-row" *ngIf="paymentRowObj.upi">
                            <mat-form-field appearance="outline" fxFlex="16%">
                                <mat-label>Payment Type</mat-label>
                                <mat-select formControlName="paymentType3" [(ngModel)]="selectedPaymnet3"
                                    (selectionChange)="onPaymentChange(3, $event.value)">
                                    <mat-option *ngFor="let ele of paymentArr3" [value]="ele.value">
                                        {{ele.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="16%">
                                <mat-label>Amount</mat-label>
                                <input matInput formControlName="amount3" (keyup)="amountChange3('amount3')" [(ngModel)]="amount3">
                                <mat-error *ngIf="patientDetailsFormGrp.get('amount3').hasError('required')">
                                    Required field cannot be left blank
                                </mat-error>
                            </mat-form-field>
                            <ng-container *ngIf="selectedPaymnet3 != 'cash'">
                                <mat-form-field appearance="outline" fxFlex="16%">
                                    <mat-label>Reference Number</mat-label>
                                    <input matInput formControlName="referenceNo2">
                                    <mat-error *ngIf="patientDetailsFormGrp.get('referenceNo2').hasError('required')">
                                        Required field cannot be left blank
                                    </mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="16%">
                                    <mat-label>Bank Name</mat-label>
                                    <input matInput formControlName="bankName2">
                                    <mat-error *ngIf="patientDetailsFormGrp.get('bankName2').hasError('required')">
                                        Required field cannot be left blank
                                    </mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="16%">
                                    <mat-label>Registration Date</mat-label>
                                    <input matInput [matDatepicker]="datepickerRegs" formControlName="regDate1"
                                        (click)="datepickerRegs.open()" [max]="nowDate">
                                    <mat-datepicker-toggle matSuffix [for]="datepickerRegs"></mat-datepicker-toggle>
                                    <mat-datepicker #datepickerRegs>
                                    </mat-datepicker>
                                    <mat-error *ngIf="patientDetailsFormGrp.get('regDate1').hasError('required')">
                                        Required field cannot be left blank
                                    </mat-error>
                                </mat-form-field>
                            </ng-container>

                            <div fxLayout="row" fxLayoutGap="15px" fxFlex="16%">
                                <div class="remove-icon" (click)="onRemoveClick('upi')">
                                    <span>-</span>
                                </div>
                                <div [ngClass]="amount4 < netPayAmt ? 'add-icon enable-1-add' : 'add-icon disable-1-add'" (click)="onAddClick('cheque')">
                                    <mat-icon> add </mat-icon>
                                </div>
                            </div>
                        </div>
                        <!-- Fourth Row -->
                        <div fxLayout="row wrap" fxLayoutGap="20px grid" class="field-row" *ngIf="paymentRowObj.cheque">
                            <mat-form-field appearance="outline" fxFlex="16%">
                                <mat-label>Payment Type</mat-label>
                                <mat-select formControlName="paymentType4" [(ngModel)]="selectedPaymnet4"
                                    (selectionChange)="onPaymentChange(4, $event.value)">
                                    <mat-option *ngFor="let food of paymentArr4" [value]="food.value">
                                        {{food.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="16%">
                                <mat-label>Amount</mat-label>
                                <input matInput formControlName="amount4" (keyup)="amountChange4('amount4')" [(ngModel)]="amount4">
                            </mat-form-field>
                            <ng-container *ngIf="selectedPaymnet4 != 'cash'">
                                <mat-form-field appearance="outline" fxFlex="16%">
                                    <mat-label>Reference Number</mat-label>
                                    <input matInput formControlName="referenceNo3">
                                    <mat-error *ngIf="patientDetailsFormGrp.get('referenceNo3').hasError('required')">
                                        Required field cannot be left blank
                                    </mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="16%">
                                    <mat-label>Bank Name</mat-label>
                                    <input matInput formControlName="bankName3">
                                    <mat-error *ngIf="patientDetailsFormGrp.get('bankName3').hasError('required')">
                                        Required field cannot be left blank
                                    </mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="16%">
                                    <mat-label>Registration Date</mat-label>
                                    <input matInput [matDatepicker]="datepickerRegs" formControlName="regDate2"
                                        (click)="datepickerRegs.open()" [max]="nowDate">
                                    <mat-datepicker-toggle matSuffix [for]="datepickerRegs"></mat-datepicker-toggle>
                                    <mat-datepicker #datepickerRegs>
                                    </mat-datepicker>
                                    <mat-error *ngIf="patientDetailsFormGrp.get('regDate2').hasError('required')">
                                        Required field cannot be left blank
                                    </mat-error>
                                </mat-form-field>
                            </ng-container>
                            <div fxLayout="row" fxLayoutGap="15px" fxFlex="16%">
                                <div class="remove-icon" (click)="onRemoveClick('cheque')">
                                    <span>-</span>
                                </div>
                                <div [ngClass]="amount5 < netPayAmt ? 'add-icon enable-1-add' : 'add-icon disable-1-add'" (click)="onAddClick('netbanking')">
                                    <mat-icon> add </mat-icon>
                                </div>
                            </div>
                        </div>
                        <!-- Fifth Row -->
                        <div fxLayout="row wrap" fxLayoutGap="20px grid" class="field-row"
                            *ngIf="paymentRowObj.netbanking">
                            <mat-form-field appearance="outline" fxFlex="16%">
                                <mat-label>Payment Type</mat-label>
                                <mat-select formControlName="paymentType5" [(ngModel)]="selectedPaymnet5"
                                    (selectionChange)="onPaymentChange(5, $event.value)">
                                    <mat-option *ngFor="let ele of paymentArr5" [value]="ele.value">
                                        {{ele.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="16%">
                                <mat-label>Amount</mat-label>
                                <input matInput formControlName="amount5" [(ngModel)]="amount5">
                            </mat-form-field>
                            <ng-container *ngIf="selectedPaymnet5 != 'cash'">
                                <mat-form-field appearance="outline" fxFlex="16%">
                                    <mat-label>Reference Number</mat-label>
                                    <input matInput formControlName="referenceNo4">
                                    <mat-error *ngIf="patientDetailsFormGrp.get('referenceNo4').hasError('required')">
                                        Required field cannot be left blank
                                    </mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="16%">
                                    <mat-label>Bank Name</mat-label>
                                    <input matInput formControlName="bankName4">
                                    <mat-error *ngIf="patientDetailsFormGrp.get('bankName4').hasError('required')">
                                        Required field cannot be left blank
                                    </mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="16%">
                                    <mat-label>Registration Date</mat-label>
                                    <input matInput [matDatepicker]="datepickerRegistartion" formControlName="regDate3"
                                        (click)="datepickerRegistartion.open()" [max]="nowDate">
                                    <mat-datepicker-toggle matSuffix
                                        [for]="datepickerRegistartion"></mat-datepicker-toggle>
                                    <mat-datepicker #datepickerRegistartion>
                                    </mat-datepicker>
                                    <mat-error *ngIf="patientDetailsFormGrp.get('regDate3').hasError('required')">
                                        Required field cannot be left blank
                                    </mat-error>
                                </mat-form-field>
                            </ng-container>
                            <div fxLayout="row" fxLayoutGap="15px" fxFlex="16%">
                                <div class="remove-icon" (click)="onRemoveClick('netbanking')">
                                    <span>-</span>
                                </div>
                            </div>
                        </div>

                    </div>
                </form>
            </fieldset>
        </div>
        <div class="footer-div">
            <button class="next-btn" style="border-radius: 16px;" (click)="onSubmit()">Save</button>
            <button class="footer-btn" (click)="onClose()" style="border-radius: 16px;">Close</button>
        </div>
    </fieldset>
</div>