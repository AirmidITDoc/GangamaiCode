<div class="modal-wrapper grid-container">
    <!-- Modal header -->
    <div class="modal-header accent">
        <div class="modal-header-content">
            <div class="modal-header-title">
                <span [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}"> Schduled Phone Appointment</span>
            </div>
            <div class="modal-header-right">
                <div class="close-icon">
                    <button mat-icon-button tabIndex="-1" [mat-dialog-close]="true" aria-label="Close dialog" matTooltip="Close">
                        <mat-icon>close</mat-icon>
                    </button>
                </div>
            </div>
        </div>
    </div>
  
    <!-- Modal body -->
    <div class="modal-body" fusePerfectScrollbar>
        <div class="modal-body-container">
            
          <form [formGroup]="personalFormGroup">
            <div layout="row" layout-xs="column" fxLayout="column" fxFlex="100"
            style="margin-top: 7px; ">
              <div>
                
                <div flex class="container" style="border-radius:4px;  width:98%;border: rgba(0,0,0,0.12) 1px solid; padding: 7px;  border-radius: 5px;
                 position: relative;">
                  <div class="header-container" style="padding: 5px;" fxLayout="column" fxLayout.gt-xs="row"
                    fxLayoutGap="2px" fxLayoutAlign="space-between">
                    <span style="font-size: 22px; font-weight: 500; color: #10c7c7;">Personal Details</span>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <app-common-date [screenFrom]="screenFromString" (dateTimeEventEmitter)="getDateTime($event)">
                    </app-common-date>
                   
                  </div>
                
                    <!-- <div fxFlexFill fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="4px" fxFlexEnd>
    
                    </div> -->
                    <br/>
                    <div fxFlexFill fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="4px">
    
                      <!-- <mat-form-field appearance="outline" fxFlex="28%">
                        <mat-label>Appointment date</mat-label>
                        <input name="AppointmentDate" matInput  [min]="minDate"  [matDatepicker]="picker" formControllName="AppointmentDate">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                     </mat-form-field>   -->
    
                     <mat-form-field appearance="outline" fxFlex>
                      <input matInput [matDatepicker]="picker" [min]="minDate"  placeholder="Choose a AppointmentDate" name="AppointmentDate" formControlName="AppointmentDate">
                      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                      <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
    
                      <!-- <mat-form-field appearance="outline" fxFlex="23%" >
                        <mat-label> First Name</mat-label>
                        <input name="FirstName" formControlName="FirstName" matInput [ngClass]="{ 'is-invalid': submitted && f.FirstName.errors }"
                        #fname (keydown)="onEnterfname($event)">
                        <span class="error" *ngIf="f.FirstName.invalid && f.FirstName.touched">First Name is required Enter only Alphabets</span>
                      </mat-form-field> -->
    
                      <mat-form-field appearance="outline">
                        <mat-label>First Name</mat-label>
                        <input name="FirstName" formControlName="FirstName" placeholder="First Name" matInput required type="text"  #fname (keydown)="onEnterfname($event)">
                        <mat-error *ngIf="personalFormGroup.get('FirstName').invalid && personalFormGroup.get('FirstName').touched">
                            First Name is required Enter only
                            Alphabets</mat-error>
                    </mat-form-field>
    
                      <mat-form-field appearance="outline" fxFlex>
                        <mat-label>Middle Name</mat-label>
                        <input name="MiddleName" formControlName="MiddleName" matInput type="text"  [ngClass]="{ 'is-invalid': submitted && f.MiddleName.errors }"
                        #mname (keydown)="onEntermname($event)">
                        <span class="error" *ngIf="f.MiddleName.invalid && f.MiddleName.touched">Middle Name is required Enter only Alphabets</span>
                      </mat-form-field>
    
                      <mat-form-field appearance="outline" fxFlex [ngClass]="{ 'is-invalid': submitted && f.LastName.errors }">
                        <mat-label>Last Name</mat-label>
                        <input name="LastName" formControlName="LastName" matInput type="text"   #lname (keydown)="onEnterlname($event)">
                        <span class="error" *ngIf="f.LastName.invalid && f.LastName.touched">LastName Name is required Enter only Alphabets</span>
                      </mat-form-field>
    
    
                    </div>
    
    
                    <div fxFlexFill fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="4px">
    
                      <mat-form-field appearance="outline" fxFlex [ngClass]="{ 'is-invalid': submitted && f.Address.errors }">
                        <mat-label>Address</mat-label>
                        <input name="Address" formControlName="Address" placeholder="Address" matInput
                        #Address (keydown)="onEnterAddress($event)">
                        <!-- <mat-error>Please enter Address </mat-error> -->
                      </mat-form-field>
    
                      <!-- <mat-form-field appearance="outline" fxFlex [ngClass]="{ 'is-invalid': submitted && f.MobileNo.errors }">
                        <mat-label>MobileNo</mat-label>
                        <input name="MobileNo" formControlName="MobileNo" matInput type="number">
                        <mat-error class="error"
                        *ngIf="personalFormGroup.get('MobileNo').invalid && personalFormGroup.get('MobileNo').touched">10
                        digits Mobile number is
                        required</mat-error>
                      </mat-form-field> -->
    
                      
                    <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%"
                    style="margin-right:10px;">
                    <mat-label>Mobile Number</mat-label>
                    <input name="Mobile" formControlName="MobileNo" placeholder="Mobile Number" matInput required
                        [(ngModel)]="vMobile" #mobile (keydown)="onEntermobile($event)" 
                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0, 10);"
                        type="number" value="Mobile.length">
                    <mat-error class="error"
                        *ngIf="personalFormGroup.get('MobileNo').invalid && personalFormGroup.get('MobileNo').touched">10
                        digits Mobile number is
                        required</mat-error>
                </mat-form-field>
    
    
                    </div>
    
                    <div fxFlexFill fxLayout="column" fxLayout.gt-xs="row">
    
    
                      <!-- <mat-form-field appearance="outline" fxFlex>
                        <mat-label>Department</mat-label>
                        <input matAutocompletePosition="below" type="text" placeholder="Select Department" matInput
                          formControlName="Departmentid" [matAutocomplete]="autoDep" required #dept (keydown)="onEnterdept($event,vDepartmentid.Departmentid)" [(ngModel)]="vDepartmentid">
                        <span matSuffix style="display: flex;">
                          <mat-icon class="mat-icon-close"
                            (click)="personalFormGroup.get('Departmentid').setValue(''); isDepartmentSelected = false;">close</mat-icon>
                          <mat-icon class="mat-icon-close"
                            (click)="personalFormGroup.get('Departmentid').setValue(''); isDepartmentSelected = false;">search</mat-icon>
                        </span>
    
                        <mat-autocomplete #autoDep="matAutocomplete" [displayWith]="getOptionTextDep">
                          <mat-option *ngFor="let option of filteredOptionsDep | async" [value]="option"
                            (onSelectionChange)="OnChangeDoctorList(option)">
                            {{option.departmentName}}
                          </mat-option>
                        </mat-autocomplete>
                      </mat-form-field> -->
                      <mat-form-field appearance="outline" fxFlex>
                        <mat-label>Department</mat-label>
                        <input matAutocompletePosition="below" type="text" placeholder="Select Department" matInput
                          formControlName="Departmentid" [matAutocomplete]="autoDep" required #dept (keydown)="onEnterdept($event,vDepartmentid.Departmentid)" 
                          [(ngModel)]="vDepartmentid">
                        <span matSuffix style="display: flex;">
                          <mat-icon class="mat-icon-close"
                            (click)="personalFormGroup.get('Departmentid').setValue(''); isDepartmentSelected = false;">close</mat-icon>
                          <mat-icon class="mat-icon-close"
                            (click)="personalFormGroup.get('Departmentid').setValue(''); isDepartmentSelected = false;">search</mat-icon>
                        </span>
    
                        <mat-autocomplete #autoDep="matAutocomplete" [displayWith]="getOptionTextDep">
                          <mat-option *ngFor="let option of filteredOptionsDep | async" [value]="option"
                            (onSelectionChange)="OnChangeDoctorList(option)">
                            {{option.DepartmentName}}
                          </mat-option>
                        </mat-autocomplete>
                      </mat-form-field>
    
                      <mat-form-field appearance="outline" fxFlex>
                        <mat-label>Doctor Name</mat-label>
                        <input matAutocompletePosition="below" type="text" placeholder="Pick one" matInput [(ngModel)]="vDoctorId" (keydown)="onEnterdeptdoc($event,vDoctorId.DoctorId)"
                          formControlName="DoctorId" [matAutocomplete]="autoDoctor" required #docname>
                        <span matSuffix style="display: flex;">
                          <mat-icon class="mat-icon-close"
                            (click)="personalFormGroup.get('DoctorId').setValue(''); isDoctorSelected = false;">close</mat-icon>
                          <mat-icon class="mat-icon-close"
                            (click)="personalFormGroup.get('DoctorId').setValue(''); isDoctorSelected = false;">search</mat-icon>
                        </span>
    
                        <mat-autocomplete #autoDoctor="matAutocomplete" [displayWith]="getOptionTextDoc">
                          <mat-option *ngFor="let option of filteredOptionsDoc | async" [value]="option"
                            (onSelectionChange)="isDoctorSelected = true;">
                            {{option.Doctorname }} <b>|</b> {{option.DepartmentName }} <b>|</b> {{option.DoctorId
                            }}
                          </mat-option>
                        </mat-autocomplete>
                      </mat-form-field>
                              
                  
                  </div>
                  <br/><br/>
                </div>
    
                <br/>
               
                <div class="new-appointment-actions gap-8 mt-12" fxLayout="row" fxLayoutAlign="end center">
                             
                  <button class="btn btn-danger-outline" (click)="onClose()">Cancle</button>
                  <button class="btn btn-primary " color="accent" (click)="OnSubmit()" [disabled]="personalFormGroup.invalid" >
                      <span>Save</span>
                  </button>
              </div>
              
              </div>
           
              <span style="font: bold;color: blue;padding: 10px;">Your Appointment Schduled at {{starttime}} -- {{endtime}}</span>
            </div>
           
          </form>
        </div>
    </div>
  
    <!-- Modal footer -->
    
  </div>