<div class="page-layout simple inner-scroll inner-sidebar right-sidebar">
    <mat-toolbar style="justify-content: space-between; height: 50px; width: 100%;">
        <div fxLayout="row" fxLayoutAlign="start center">
            <button mat-icon-button class="sidebar-toggle mr-12" style="color: white;">
                <mat-icon>menu</mat-icon>
            </button>
            <button mat-icon-button class="logo-icon mr-16" [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}"
                style="color: white;">
                <mat-icon>account_box</mat-icon>
            </button>
            <span class=" logo-text h1" [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}" style="color: white;">
                Opening Balance
            </span>

        </div>
        <div class="close-icon">
            <span class="material-icons" style="cursor: pointer;" (click)="onClose()">
                close
            </span>
        </div>
    </mat-toolbar>

    <div class="content">
        <div class="center p-12 pb-56" fxFlexAlign="start center">

            <div class="content-card" style="border-radius:4px; ">
                <div fxLayout="column" fxLayoutAlign="start none" fxLayoutGap="10px">
                  
                        <div fxLayout="column" fxLayoutAlign="start none" fxLayoutGap="10px">
                            <div fxLayout="row" fxLayoutGap="10px">
                                <form [formGroup]="StoreForm" class="p-0">
                                    <airmid-dropdown label="Store Name" formControlName="StoreId"
                                        (selectionChange)="StoreSelction($event)" [formGroup]="StoreForm"
                                        [mode]="autocompletestore">
                                    </airmid-dropdown>
                                </form>

                                <app-common-date [screenFrom]="screenFromString"
                                    (dateTimeEventEmitter)="getDateTime($event)">
                                </app-common-date>
                            </div>
                            <form [formGroup]="OPeningtemForm">
                            <div fxLayout="row" fxLayoutGap="4px">


                                <airmid-autocomplete label="Item Name (enter 2 char)" [formGroup]="OPeningtemForm"
                                    formControlName="ItemName" placeholderText="Item Name (enter 2 char)" fxFlex="25%"
                                    ApiUrl="ItemMaster/GetItemListForGRNOrPO?StoreId=2&ItemName="
                                    (selectionChange)="getSelectedItem($event)" TextField="formattedText"
                                    ValueField="itemId" (onClearSelection)="ItemFromReset()"></airmid-autocomplete>

                                <airmid-textbox fxFlex="10%" label="BatchNo" formControlName="BatchNo" [(ngModel)]="vBatchNo"
                                [formGroup]="OPeningtemForm" placeholder="BatchNo"></airmid-textbox>

                                <mat-form-field appearance="outline" fxFlex="10%">
                                    <mat-label>ExpDate</mat-label>
                                    <input matInput #inputField (keyup.enter)="calculateLastDay(inputField.value)"
                                        formControlName="ExpDate" id="ExpDatess" [(ngModel)]="vlastDay" #expdate
                                        autocomplete="off" placeholder="MMYYYY" required>
                                </mat-form-field>
                                
                                <airmid-textbox fxFlex="10%" label="Bal Qty" formControlName="BalanceQty" [(ngModel)]="vBalQty" 
                                [formGroup]="OPeningtemForm" placeholder="BalanceQty"></airmid-textbox>

                                <airmid-textbox fxFlex="10%" label="GST %" formControlName="BalanceQty"  [(ngModel)]="vGST"
                                [formGroup]="OPeningtemForm" placeholder="GST %"></airmid-textbox>

                                <airmid-textbox fxFlex="10%" label="MRP" formControlName="MRP"  [(ngModel)]="vMRP"
                                [formGroup]="OPeningtemForm" placeholder="MRP"></airmid-textbox>

                                <airmid-textbox fxFlex="10%" label="Rate PerUnit" formControlName="RatePerUnit"  [(ngModel)]="vRatePerUnit"
                                [formGroup]="OPeningtemForm" placeholder="Rate PerUnit" (keyup)="CheckValidation()" (keypress)="keyPressCharater($event)"></airmid-textbox>

                              
                                <button type="button" class="btn btn-primary" #addbutton (click)="Onadd()">
                                    <mat-icon>add</mat-icon>
                                </button>

                            </div>
                        </form>
                        </div>
                    
                    <div fxLayout="row">
                        <div fxFlex.gt-sm="100%" fxFlex>
                            <mat-table class="table2" matSort [dataSource]="dsItemNameList"
                                [@animateStagger]="{value:'50'}" style="overflow: auto;">

                                <ng-container matColumnDef="buttons" stickyEnd>
                                    <mat-header-cell *matHeaderCellDef style="color: white;"> Action
                                    </mat-header-cell>
                                    <mat-cell *matCellDef="let row">
                                        <button mat-icon-button (click)="deleteTableRow(row)" color="warn">
                                            <mat-icon>delete_outline</mat-icon>
                                        </button>

                                    </mat-cell>
                                </ng-container>

                                <ng-container matColumnDef="ItemName">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header fxHide fxShow.gt-sm>
                                        ItemName
                                    </mat-header-cell>
                                    <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                        {{contact.ItemName}}
                                    </mat-cell>
                                </ng-container>

                                <ng-container matColumnDef="BatchNo">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>
                                        BatchNo</mat-header-cell>
                                    <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                        {{contact.BatchNo}}
                                    </mat-cell>
                                </ng-container>

                                <ng-container matColumnDef="ExpDate">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>
                                        ExpDate</mat-header-cell>
                                    <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                        {{contact.ExpDate}}
                                    </mat-cell>
                                </ng-container>

                                <ng-container matColumnDef="BalQty">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>
                                        BalQty </mat-header-cell>
                                    <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                        {{contact.BalQty}}
                                    </mat-cell>
                                </ng-container>

                                <ng-container matColumnDef="PerRate">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>
                                        UnitPerRate</mat-header-cell>
                                    <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                        {{contact.PerRate}}
                                    </mat-cell>
                                </ng-container>

                                <ng-container matColumnDef="UnitMRP">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>
                                        UnitMRP</mat-header-cell>
                                    <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                        {{contact.UnitMRP}}
                                    </mat-cell>
                                </ng-container>


                                <ng-container matColumnDef="GST">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>
                                        GST%</mat-header-cell>
                                    <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                        {{contact.GST}}
                                    </mat-cell>
                                </ng-container>

                                <ng-container matColumnDef="loading">
                                    <mat-header-cell *matFooterCellDef colspan="6" style="display: none;">
                                    </mat-header-cell>
                                </ng-container>

                                <ng-container matColumnDef="noData">
                                    <mat-footer-cell *matFooterCellDef colspan="6">
                                        no data found...
                                    </mat-footer-cell>
                                </ng-container>

                                <mat-header-row class="accent" *matHeaderRowDef="displayedColumns; sticky: true">
                                </mat-header-row>
                                <mat-row *matRowDef="let row; columns: displayedColumns;" class="element"
                                    [@animate]="{value:'*',params:{y:'100%'}}"></mat-row>
                                <mat-footer-row *matFooterRowDef="['noData']"
                                    [ngClass]="{'hide':!(dsItemNameList!=null && dsItemNameList.data.length==0)}">
                                </mat-footer-row>
                            </mat-table>
                            <mat-paginator #paginator [pageSizeOptions]="[15, 24, 35, 100]" [pageSize]="15"
                                showFirstLastButtons>
                            </mat-paginator>
                        </div>
                    </div>
                    <form [formGroup]="OPeningtemForm">
                        <div >
                            <airmid-textbox fxFlex="60%" label="Remark" formControlName="Remark"  [(ngModel)]="vRemark"
                            [formGroup]="OPeningtemForm" placeholder="Remark"></airmid-textbox>


                            <div class="modal-footer">
                                <div class="footer-navigation-container">
                                    <div class="modal-footer-buttons">
                                        <button class="btn btn-danger-outline"
                                            (click)="OnReset()">Reset</button>
                                        <button type="button" class="btn btn-primary" [disabled]="false"
                                            (click)="OnSave()">Save</button>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>