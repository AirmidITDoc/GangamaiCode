<div id="contacts" fusePerfectScrollbar class="page-layout simple left-sidebar inner-sidebar inner-scroll">
    <!-- HEADER -->
    <div class="top-header accent" fxLayout="row" fxLayoutAlign="space-between center">
        <div class="top-header-info">
            <div class="top-header-title">
                <span [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}">
                    REPORTS
                </span>
            </div>
        </div>
    </div>

    <!-- CONTENT -->
    <div class="content full-height">
        <div class="center p-24 pb-56 full-height">
            <div class="content-card full-height" fxLayout="row" fxLayoutGap="10px">
                <!-- Left Panel (Tree View) -->
                <div fxFlex="50" class="tree-panel">
                    <mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree">
                        <mat-tree-node *matTreeNodeDef="let node" matTreeNodePadding (click)="GetReportDeails(node)">
                            <button mat-icon-button ></button>
                            {{node.name }}
                        </mat-tree-node>
                        <mat-tree-node *matTreeNodeDef="let node;when: hasChild" matTreeNodePadding>
                            <button mat-icon-button matTreeNodeToggle [attr.aria-label]="'toggle ' + node.name">
                                <mat-icon class="mat-icon-rtl-mirror">
                                    {{ treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right' }}
                                </mat-icon>
                            </button>
                            {{ node.name }}
                        </mat-tree-node>
                    </mat-tree>
                </div>

                <!-- Right Panel (Form) -->
                <div fxFlex="50" class="form-panel" [ngClass]="{'disabled-div': !ReportName}">
                    <div class="dialog-content-wrapper">
                        <form [formGroup]="_ReportService.userForm" class="report-form" fusePerfectScrollbar>
                            <!-- Report & User Info -->
                            <div class="report-header mb-2" fxLayout="row" fxLayoutAlign="space-between center">
                                <span>Selected Report: <strong>{{ ReportName }}</strong></span>
                                <span>Current User: <strong>{{ UId }} | {{ UserName }}</strong></span>
                            </div>

                            <!-- Date Range -->
                            <div fxLayout="row" fxLayoutAlign="start none">
                                <mat-form-field appearance="outline" class="date-field">
                                    <mat-label>Enter a date range</mat-label>
                                    <mat-date-range-input [rangePicker]="picker">
                                        <input matStartDate formControlName="StartDate" placeholder="Start date">
                                        <input matEndDate formControlName="EndDate" placeholder="End date">
                                    </mat-date-range-input>
                                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                    <mat-date-range-picker #picker></mat-date-range-picker>
                                </mat-form-field>
                            </div>

                            <!-- AutoComplete Fields -->
                            <div fxLayout="column" fxLayoutAlign="start none">
                                <div *ngIf="flagUserSelected" class="autocomplete-field">
                                    <airmid-autocomplete label="User" [formGroup]="_ReportService.userForm" formControlName="UserId" placeholderText="Enter User" ApiUrl="Report/UserList/auto-complete?Keyword=" (selectionChange)="SelectedUserObj($event)">
                                    </airmid-autocomplete>
                                </div>
                                <div *ngIf="flagDoctorSelected" class="autocomplete-field">
                                    <airmid-autocomplete label="Doctor" [formGroup]="_ReportService.userForm" formControlName="DoctorID" placeholderText="Enter Doctor" ApiUrl="Report/DoctorList/auto-complete?Keyword=" (selectionChange)="SelectedDoctorObj($event)">
                                    </airmid-autocomplete>
                                </div>
                                <div *ngIf="flagServiceSelected" class="autocomplete-field">
                                    <airmid-autocomplete label="Service Name" [formGroup]="_ReportService.userForm" formControlName="ServiceId" placeholderText="Enter Service Name" ApiUrl="Report/ServiceList/auto-complete?Keyword=" (selectionChange)="SelectedServiceObj($event)">
                                    </airmid-autocomplete>
                                </div>
                                <div *ngIf="flagDepartmentSelected" class="autocomplete-field">
                                    <airmid-autocomplete label="Department Name" [formGroup]="_ReportService.userForm" formControlName="DepartmentId" placeholderText="Enter Department Name" ApiUrl="Report/DepartmentList/auto-complete?Keyword=" (selectionChange)="SelectedDepartmentObj($event)">
                                    </airmid-autocomplete>
                                </div>
                                <div *ngIf="flagCashcounterSelected" class="autocomplete-field">
                                    <airmid-autocomplete label="Cash Counter" [formGroup]="_ReportService.userForm" formControlName="CashCounterId" placeholderText="Enter Cash Counter" ApiUrl="Report/CashCounterList/auto-complete?Keyword=" (selectionChange)="SelecteCashCounterObj($event)">
                                    </airmid-autocomplete>
                                </div>
                            </div>

                            <!-- Print Button -->
                            <div fxLayout="row" fxLayoutAlign="start none">
                                <button type="button" class="btn btn-primary" [disabled]="!ReportName" color="accent" (click)="GetPrint()">
                                    <span>Print</span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>