<p>sale-popup works!</p>

<mat-table #table [dataSource]="dataSource" class="mat-elevation-z8 sale-table" matSort [@animateStagger]="{value:'50'}"
    style="overflow:auto;">
    <ng-container matColumnDef="BatchNo">
        <mat-header-cell *matHeaderCellDef> Batch No </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.BatchNo}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="BatchExpDate">
        <mat-header-cell *matHeaderCellDef> Exp Date </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.BatchExpDate | date: 'mediumDate'}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="BalanceQty">
        <mat-header-cell *matHeaderCellDef> Bal Qty </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.BalanceQty}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="MRP">
        <mat-header-cell *matHeaderCellDef> MRP </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.UnitMRP}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="PurPrice">
        <mat-header-cell *matHeaderCellDef> Pur Price </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.PurchaseRate}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="ConversionFactor">
        <mat-header-cell *matHeaderCellDef> Con Fac </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.ConversionFactor}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="loading">
        <mat-header-cell *matFooterCellDef colspan="6" style="display: none;">
            <mat-spinner style="float:left;" [diameter]='30'></mat-spinner>
        </mat-header-cell>
    </ng-container>

    <ng-container matColumnDef="noData">
        <mat-footer-cell *matFooterCellDef colspan="6">
            <mat-spinner style="float:left;" [diameter]='30' *ngIf="isLoadingStr=='loading'"></mat-spinner>
            <span *ngIf="isLoadingStr=='no-data'">No data found...</span>
        </mat-footer-cell>
    </ng-container>

    <mat-header-row class="accent" *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;" [@animate]="{value:'*',params:{y:'100%'}}"
        [ngClass]="{'highlight': selectedRowIndex == row.position}"
        (click)="highlight(row, i)"
        tabindex="999"
        (keydown.arrowdown)="arrowDownEvent(row, selectedRowIndex)"
        (keydown.arrowup)="arrowUpEvent(row, selectedRowIndex)"
        (keyup.enter)="selectedRow(row)"></mat-row>
    <mat-footer-row *matFooterRowDef="['loading']" [ngClass]="{'hide':dataSource!=null}"></mat-footer-row>
    <mat-footer-row *matFooterRowDef="['noData']"
        [ngClass]="{'hide':!(dataSource!=null && dataSource.data.length==0)}"></mat-footer-row>
</mat-table>

<mat-paginator [pageSizeOptions]="[5, 10, 15, 20]" [pageSize]="5" showFirstLastButtons>
</mat-paginator>