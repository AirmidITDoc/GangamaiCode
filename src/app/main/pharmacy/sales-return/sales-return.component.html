<div id="contacts" class="page-layout simple left-sidebar inner-sidebar inner-scroll sales-return-section" >
    <!-- HEADER -->
    <div class="header accent p-16 p-sm-24 top-header" fxLayout="column" fxLayoutAlign="start" fxLayout.gt-xs="row"
        fxLayoutAlign.gt-xs="space-between center">

        <!-- APP TITLE -->
        <div fxLayout="row" fxLayoutAlign="start center">
            <div class="logo" fxLayout="row" fxLayoutAlign="start center">
                <mat-icon class="logo-icon mr-16" [@animate]="{value:'*',params:{delay:'50ms',scale:'0.2'}}">account_box
                </mat-icon>
                <span class="logo-text h1" [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}">
                    Sales Return : {{vStoreName}}
                </span>
                <span style="margin-left: 800px;">
                    <app-common-date [screenFrom]="screenFromString" style="float:right;"
                        (dateTimeEventEmitter)="getDateTime($event)"></app-common-date></span>
                <!-- <span style="font-weight: 400;font-size: medium;margin-right: 10px !important;"> {{StoreName}}</span> -->
            </div>
        </div>
        <!-- / APP TITLE -->
        <!-- SEARCH -->
        <!-- / SEARCH -->

    </div>
    <!-- / HEADER -->

    <!-- CONTENT -->
    <div class="content">

        <!-- SIDEBAR -->
        <!-- / SIDEBAR -->

        <!-- CENTER -->
        <div class="center p-24 pb-56" fusePerfectScrollbar>
            <!-- CONTENT -->
            <div class="content-card">
                <div fxFlexFill fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="10px">
                    <div fxFlex.xs="100%" fxFlex.gt-xs="95%" fxFlex style="background-color: white;">

                        <form [formGroup]="SearchForm" style="padding: 6px 6px 5px 5px;" fusePerfectScrollbar>
                            <div fxFlexFill fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="5px">

                                <mat-form-field appearance="outline" fxFlex="20%">
                                    <mat-label>Store Name</mat-label>
                                    <mat-select formControlName="StoreId" name="StoreId1" required>
                                        <mat-option></mat-option>
                                        <mat-option *ngFor="let m of StoreList" [value]="m">
                                            {{m.StoreName}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%">
                                    <mat-label>Enter a date range</mat-label>
                                    <mat-date-range-input [rangePicker]="picker">
                                        <input matStartDate formControlName="startdate" placeholder="Start date"
                                            (dateChange)="getSalesList()">
                                        <input matEndDate formControlName="enddate" placeholder="End date">
                                    </mat-date-range-input>
                                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                    <mat-date-range-picker #picker></mat-date-range-picker>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="10%">
                                    <mat-label>Search RegNo</mat-label>
                                    <input name="RegNo" formControlName="RegNo" matInput (keyup)="getSalesList()">
                                </mat-form-field>
                                <mat-form-field appearance="outline" fxFlex="10%">
                                    <mat-label>First Name</mat-label>
                                    <input name="F_Name" formControlName="F_Name" matInput (keyup)="getSalesList()">
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="10%">
                                    <mat-label>Last Name</mat-label>
                                    <input name="L_Name" formControlName="L_Name" matInput (keyup)="getSalesList()">
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="10%">
                                    <mat-label>Sales No</mat-label>
                                    <input name="SalesNo" formControlName="SalesNo" matInput (keyup)="getSalesList()">
                                </mat-form-field>

                                <div class="search-button">
                                    <div class="button p-4 ">
                                        <button mat-raised-button class="searchButton" (click)="getSalesList()"
                                            matTooltip="search">
                                            <mat-icon class="searchiconbutton">search</mat-icon>
                                        </button>
                                    </div>
                                </div>

                            </div>

                        </form>

                        <div>
                            <div fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="5px">
                                <div fxFlex.xs="100%" fxFlex.gt-xs="60%" fxFlex>
                                    <mat-table #table matSort [dataSource]="dssaleList"
                                        [@animateStagger]="{value:'50'}">

                                        <ng-container matColumnDef="Date">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>Date
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.Date | date:'ddMMyyyy'}}
                                            </mat-cell>
                                        </ng-container>

                                        <ng-container matColumnDef="SalesNo">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>SalesNo
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.SalesNo}}
                                            </mat-cell>
                                        </ng-container>

                                        <ng-container matColumnDef="RegNo">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>RegNo
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.RegNo}}
                                            </mat-cell>
                                        </ng-container>

                                        <ng-container matColumnDef="PatientName">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>PatientName
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                <span> {{contact.PatientName}}</span>
                                            </mat-cell>
                                        </ng-container>

                                        <ng-container matColumnDef="TotalAmount">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>TotalAmount
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.TotalAmount}}
                                            </mat-cell>
                                        </ng-container>

                                        <ng-container matColumnDef="PaidType">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>Status
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.PaidType}}
                                            </mat-cell>
                                        </ng-container>



                                        <ng-container matColumnDef="loading">
                                            <mat-header-cell *matFooterCellDef colspan="6" style="display: none;">
                                            </mat-header-cell>
                                        </ng-container>

                                        <ng-container matColumnDef="noData">
                                            <mat-footer-cell *matFooterCellDef colspan="6">
                                                <mat-spinner *ngIf="isLoadingStr=='loading'" [diameter]='30'>
                                                </mat-spinner>
                                                <span *ngIf="isLoadingStr=='no-data'">No data found...</span>
                                            </mat-footer-cell>
                                        </ng-container>

                                        <mat-header-row class="accent"
                                            *matHeaderRowDef="displayedColumns; sticky: true">
                                        </mat-header-row>
                                        <mat-row *matRowDef="let contact; columns: displayedColumns;"
                                            [ngClass]="{'row-blue': contact.PaidType == 'Credit'}"
                                            [@animate]="{value:'*',params:{y:'100%'}}"
                                            (click)="onSelect(contact)"></mat-row>
                                        <mat-footer-row *matFooterRowDef="['loading']"
                                            [ngClass]="{'hide':dssaleList!=null}">
                                        </mat-footer-row>
                                        <mat-footer-row *matFooterRowDef="['noData']"
                                            [ngClass]="{'hide':!(dssaleList!=null && dssaleList.data.length==0)}">
                                        </mat-footer-row>
                                    </mat-table>
                                    <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" [pageSize]="5"
                                        showFirstLastButtons>
                                    </mat-paginator>
                                </div>
                                <div fxFlex.xs="100%" fxFlex.gt-xs="40%" fxFlex>
                                    <mat-table matSort [dataSource]="dssaleDetailList"
                                        [@animateStagger]="{value:'100'}">

                                        <!-- <ng-container matColumnDef="SalesId">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header>SalesId</mat-header-cell>
                                            <mat-cell *matCellDef="let contact">
                                                {{contact.SalesId}}
                                            </mat-cell>
                                        </ng-container>
        
                                        <ng-container matColumnDef="SalesDetId">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>SalesDetId
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.SalesDetId}}
                                            </mat-cell>
                                        </ng-container> -->
                                        <!-- <ng-container matColumnDef="SalesNo">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>SalesNo
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.SalesNo}}
                                            </mat-cell>
                                        </ng-container> -->
                                        <!-- <ng-container matColumnDef="OP_IP_ID">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>OP_IP_ID
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.OP_IP_ID}}
                                            </mat-cell>
                                        </ng-container> -->
                                        <!-- <ng-container matColumnDef="ItemId">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>ItemId
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.ItemId}}
                                            </mat-cell>
                                        </ng-container> -->
                                        <ng-container matColumnDef="ItemName">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm
                                                class="w-200">ItemName
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm class="w-200">
                                                {{contact.ItemName}}
                                            </mat-cell>
                                        </ng-container>

                                        <ng-container matColumnDef="BatchNo">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm
                                                class="w-100">BatchNo
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm class="w-100">
                                                {{contact.BatchNo}}
                                            </mat-cell>
                                        </ng-container>

                                        <!-- <ng-container matColumnDef="BatchExpDate">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>BatchExpDate
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.BatchExpDate}}
                                            </mat-cell>
                                        </ng-container> -->

                                        <ng-container matColumnDef="UnitMRP">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>UnitMRP
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.UnitMRP}}
                                            </mat-cell>
                                        </ng-container>

                                        <ng-container matColumnDef="Qty">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>Qty
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.Qty}}
                                            </mat-cell>
                                        </ng-container>

                                        <!-- <ng-container matColumnDef="ReturnQty"> 
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>ReturnQty
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.Qty}}
                                            </mat-cell>
                                        </ng-container> -->

                                        <ng-container matColumnDef="TotalAmount">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>TotalAmt
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.TotalAmount}}
                                            </mat-cell>
                                        </ng-container>

                                        <!-- <ng-container matColumnDef="VatPer">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>VatPer
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.VatPer}}
                                            </mat-cell>
                                        </ng-container> -->

                                        <!-- <ng-container matColumnDef="VatAmount">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>VatAmt
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.VatAmount}}
                                            </mat-cell>
                                        </ng-container> -->

                                        <ng-container matColumnDef="DiscPer">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>DiscPer
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.DiscPer}}
                                            </mat-cell>
                                        </ng-container>

                                        <!-- <ng-container matColumnDef="DiscAmount">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>DiscAmt
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.DiscAmount}}
                                            </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="GrossAmount">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>GrossAmt
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.GrossAmount}}
                                            </mat-cell>
                                        </ng-container>
                                      <ng-container matColumnDef="LandedPrice">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>LandedPrice
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.LandedPrice}}
                                            </mat-cell>
                                        </ng-container>
        
                                         <ng-container matColumnDef="TotalLandedAmount">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>TotLandedAmt
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.TotalLandedAmount}}
                                            </mat-cell>
                                        </ng-container> -->
                                        <!--    <ng-container matColumnDef="IsBatchRequired">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>IsBatchRequired
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.IsBatchRequired}}
                                            </mat-cell>
                                        </ng-container>-->

                                        <!-- <ng-container matColumnDef="PurRateWf">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>PurRateWf
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.PurRateWf}}
                                            </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="PurTotAmt">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>PurTotAmt
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.PurTotAmt}}
                                            </mat-cell>
                                        </ng-container> -->

                                        <!--    <ng-container matColumnDef="IsPrescription">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>IsPrescription
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.IsPrescription}}
                                            </mat-cell>
                                        </ng-container> -->
                                        <!-- <ng-container matColumnDef="CGSTPer">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>CGST%
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.CGSTPer}}
                                            </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="SGSTPer">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>SGST%
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.SGSTPer}}
                                            </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="IGSTPer">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>IGST%
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.IGSTPer}}
                                            </mat-cell>
                                        </ng-container> -->
                                        <!-- <ng-container matColumnDef="IsPurRate">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>IsPurRate
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.IsPurRate}}
                                            </mat-cell>
                                        </ng-container>
        
                                        <ng-container matColumnDef="StkID">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>StkID
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.StkID}}
                                            </mat-cell>
                                        </ng-container> -->

                                        <ng-container matColumnDef="loading">
                                            <mat-header-cell *matFooterCellDef colspan="6" style="display: none;">
                                            </mat-header-cell>
                                        </ng-container>

                                        <ng-container matColumnDef="noData">
                                            <mat-footer-cell *matFooterCellDef colspan="6">
                                                <mat-spinner *ngIf="isLoadingStr=='loading'" [diameter]='30'>
                                                </mat-spinner>
                                                <span *ngIf="isLoadingStr=='no-data'">No data found...</span>
                                            </mat-footer-cell>
                                        </ng-container>

                                        <mat-header-row class="accent table-right-row"
                                            *matHeaderRowDef="dspSalesDetColumns; sticky: true">
                                        </mat-header-row>
                                        <mat-row class="table-right-row"
                                            *matRowDef="let contact; columns: dspSalesDetColumns;"
                                            [@animate]="{value:'*',params:{y:'100%'}}"
                                            (click)="SelectedItem(contact)"></mat-row>
                                        <mat-footer-row class="table-right-row" *matFooterRowDef="['loading']"
                                            [ngClass]="{'hide':dssaleDetailList!=null}">
                                        </mat-footer-row>
                                        <mat-footer-row class="table-right-row" *matFooterRowDef="['noData']"
                                            [ngClass]="{'hide':!(dssaleDetailList!=null && dssaleDetailList.data.length==0)}">
                                        </mat-footer-row>
                                    </mat-table>
                                </div>

                            </div>


                        </div>
                        <hr>

                        <div fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="5px">
                            <div fxFlex.xs="100%" fxFlex.gt-xs="100%" fxFlex>
                                <mat-table #table matSort [dataSource]="selectedssaleDetailList"
                                    [@animateStagger]="{value:'100'}">

                                    <ng-container matColumnDef="buttons">
                                        <mat-header-cell *matHeaderCellDef class="table-actions" style="color: red;">
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact">
                                            <ng-container class="actions">

                                                <span class="material-icons" style="cursor: pointer;color: #5b5858;"
                                                    (click)="deleteTableRow(contact)">
                                                    delete
                                                </span>
                                            </ng-container>

                                        </mat-cell>
                                    </ng-container>
                                    <!-- <ng-container matColumnDef="SalesId">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header>SalesId</mat-header-cell>
                                                            <mat-cell *matCellDef="let contact">
                                                                {{contact.SalesId}}
                                                            </mat-cell>
                                                        </ng-container>
                        
                                                        <ng-container matColumnDef="SalesDetId">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>SalesDetId
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                                {{contact.SalesDetId}}
                                                            </mat-cell>
                                                        </ng-container> -->
                                    <!-- <ng-container matColumnDef="SalesNo">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>SalesNo
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                                {{contact.SalesNo}}
                                                            </mat-cell>
                                                        </ng-container> -->
                                    <!-- <ng-container matColumnDef="OP_IP_ID">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>OP_IP_ID
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                                {{contact.OP_IP_ID}}
                                                            </mat-cell>
                                                        </ng-container> -->
                                    <!-- <ng-container matColumnDef="ItemId">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>ItemId
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                                {{contact.ItemId}}
                                                            </mat-cell>
                                                        </ng-container> -->
                                    <ng-container matColumnDef="ItemName">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm
                                            class="w-200">ItemName
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm class="w-200">
                                            {{contact.ItemName}}
                                        </mat-cell>
                                    </ng-container>

                                    <ng-container matColumnDef="BatchNo">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm
                                            class="w-100">BatchNo
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm class="w-100">
                                            {{contact.BatchNo}}
                                        </mat-cell>
                                    </ng-container>

                                    <ng-container matColumnDef="BatchExpDate">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm
                                            class="w-200">ExpDate
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm class="w-200">
                                            {{contact.BatchExpDate}}
                                        </mat-cell>
                                    </ng-container>

                                    <ng-container matColumnDef="UnitMRP">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>UnitMRP
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                            {{contact.UnitMRP}}
                                        </mat-cell>
                                    </ng-container>

                                    <ng-container matColumnDef="Qty">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>Qty
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                            {{contact.Qty}}
                                        </mat-cell>
                                    </ng-container>

                                    <ng-container matColumnDef="ReturnQty">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>ReturnQty
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                            <mat-form-field appearance="legacy">
                                                <input matInput [(ngModel)]="contact.ReturnQty"
                                                    (keyup)="getCellCalculation(contact,contact.ReturnQty)" #ReturnQty
                                                    type="number" autocomplete="off">
                                            </mat-form-field>
                                        </mat-cell>
                                    </ng-container>

                                    <ng-container matColumnDef="TotalAmount">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>TotalAmt
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                            {{contact.TotalAmount}}
                                        </mat-cell>
                                    </ng-container>

                                    <ng-container matColumnDef="VatPer">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>GST%
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                            {{contact.VatPer}}
                                        </mat-cell>
                                    </ng-container>

                                    <!-- <ng-container matColumnDef="VatAmount">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>VatAmt
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                                {{contact.VatAmount}}
                                                            </mat-cell>
                                                        </ng-container>  -->

                                    <ng-container matColumnDef="DiscPer">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>DiscPer
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                            {{contact.DiscPer}}
                                        </mat-cell>
                                    </ng-container>

                                    <ng-container matColumnDef="DiscAmount">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>DiscAmt
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                            {{contact.DiscAmount}}
                                        </mat-cell>
                                    </ng-container>
                                    <ng-container matColumnDef="GrossAmount">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>GrossAmt
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                            {{contact.GrossAmount}}
                                        </mat-cell>
                                    </ng-container>
                                    <ng-container matColumnDef="LandedPrice">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>LandedPrice
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                            {{contact.LandedPrice}}
                                        </mat-cell>
                                    </ng-container>

                                    <ng-container matColumnDef="TotalLandedAmount">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm
                                            class="w-100">TotLandedAmt
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm class="w-100">
                                            {{contact.TotalLandedAmount}}
                                        </mat-cell>
                                    </ng-container>
                                    <!-- <ng-container matColumnDef="IsBatchRequired">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>IsBatchRequired
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                                {{contact.IsBatchRequired}}
                                                            </mat-cell>
                                                        </ng-container> -->

                                    <!-- <ng-container matColumnDef="PurRateWf">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>PurRateWf
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                                {{contact.PurRateWf}}
                                                            </mat-cell>
                                                        </ng-container>
                                                        <ng-container matColumnDef="PurTotAmt">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>PurTotAmt
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                                {{contact.PurTotAmt}}
                                                            </mat-cell>
                                                        </ng-container> -->

                                    <!-- <ng-container matColumnDef="IsPrescription">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>IsPrescription
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                                {{contact.IsPrescription}}
                                                            </mat-cell>
                                                        </ng-container> -->
                                    <ng-container matColumnDef="CGSTPer">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>CGST%
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                            {{contact.CGSTPer}}
                                        </mat-cell>
                                    </ng-container>

                                    <ng-container matColumnDef="CGSTAmount">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>CGSTAmt
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                            {{contact.CGSTAmount}}
                                        </mat-cell>
                                    </ng-container>
                                    <ng-container matColumnDef="SGSTPer">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>SGST%
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                            {{contact.SGSTPer}}
                                        </mat-cell>
                                    </ng-container>

                                    <ng-container matColumnDef="SGSTAmount">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>SGSTAmt
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                            {{contact.SGSTAmount}}
                                        </mat-cell>
                                    </ng-container>
                                    <ng-container matColumnDef="CGSTAmount">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>CGSTAmt
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                            {{contact.CGSTAmount}}
                                        </mat-cell>
                                    </ng-container>

                                    <ng-container matColumnDef="IGSTPer">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>IGST%
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                            {{contact.IGSTPer}}
                                        </mat-cell>
                                    </ng-container>
                                    <ng-container matColumnDef="IGSTAmount">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>IGSTAmt
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                            {{contact.IGSTAmount}}
                                        </mat-cell>
                                    </ng-container>
                                    <!-- <ng-container matColumnDef="IsPurRate">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>IsPurRate
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                                {{contact.IsPurRate}}
                                                            </mat-cell>
                                                        </ng-container> -->

                                    <!-- <ng-container matColumnDef="StkID">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>StkID
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                                {{contact.StkID}}
                                                            </mat-cell>
                                                        </ng-container> -->



                                    <!-- <ng-container matColumnDef="loading">
                                                            <mat-header-cell *matFooterCellDef colspan="6" style="display: none;">
                                                            </mat-header-cell>
                                                        </ng-container>
                        
                                                        <ng-container matColumnDef="noData">
                                                            <mat-footer-cell *matFooterCellDef colspan="6">
                                                                <mat-spinner *ngIf="isLoadingStr=='loading'" [diameter]='30'>
                                                                </mat-spinner>
                                                                <span *ngIf="isLoadingStr=='no-data'">No data found...</span>
                                                            </mat-footer-cell>
                                                        </ng-container> -->

                                    <mat-header-row class="accent table-row-lg"
                                        *matHeaderRowDef="dspSalesDetselectedColumns; sticky: true">
                                    </mat-header-row>
                                    <mat-row *matRowDef="let contact; columns: dspSalesDetselectedColumns;"
                                        class="table-row-lg" [@animate]="{value:'*',params:{y:'100%'}}"></mat-row>
                                    <!-- <mat-footer-row *matFooterRowDef="['loading']" [ngClass]="{'hide':dssaleList!=null}">
                                                        </mat-footer-row> -->
                                    <!-- <mat-footer-row *matFooterRowDef="['noData']"
                                                            [ngClass]="{'hide':!(dssaleList!=null && dssaleList.data.length==0)}">
                                                        </mat-footer-row> -->


                                </mat-table>
                            </div>

                        </div>

                        <div class="sr-footer">
                            <div class="total-amount py-8" fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="8px">
                                <span class="net-amt-label text-primary font-weight-500"> TotalAmount:</span>
                                <span class="net-amt-value">
                                    {{getTotAmtSum(selectedssaleDetailList.data) | currency:'INR' }}
                                </span>
                            </div>
                            <div class="sr-footer-form">
                                <hr>
                                <form [formGroup]="FinalReturnform" fxLayout="row" fxLayoutAlign="end center">
                                    <div class="sr-form-content">
                                        <div class="net-amt">
                                            <span>Net Amount</span>
                                        </div>
                                        <div class="sr-form-group gap-24 mt-4" fxLayout="row">
                                            <div class="form-input-groups gap-8" fxLayout="row">
                                                <mat-form-field appearance="outline" style="width: 180px;">
                                                    <mat-label>Net Amount</mat-label>
                                                    <input matInput formControlName="NetAmt" [(ngModel)]="NetAmt"
                                                        readonly required>
                                                </mat-form-field>

                                                <mat-form-field appearance="outline" style="width: 180px;">
                                                    <mat-label>Disc Amount</mat-label>
                                                    <input matInput formControlName="TotDiscAmount"
                                                        [(ngModel)]="vDiscAmount" readonly>
                                                </mat-form-field>

                                                <mat-form-field appearance="outline" style="width: 180px;">
                                                    <mat-label>Return Amount</mat-label>
                                                    <input matInput formControlName="ReturnAmt"
                                                        [(ngModel)]="FinalTotalAmount" readonly required>
                                                </mat-form-field>
                                            </div>
                                            <div class="sr-form-button gap-8" fxLayout="row">
                                                <div class="action-button">
                                                    <button class="btn btn-primary" (click)="onSave()"
                                                        [disabled]="FinalReturnform.invalid || selectedssaleDetailList.data.length == 0">Save</button>
                                                    <button class="btn btn-danger-outline ml-8"
                                                        (click)="onClose()">Reset</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- / CONTENT -->
        </div>
        <!-- / CENTER -->
    </div>
    <!-- / CONTENT-->
</div>


<div hidden class="bill-template-wrapper2" style="font-size: 30.25%;" #billSalesReturn>
    <!-- <div class="watermark" style="position:absolute;
        top: 50%;
        left: 50%;
        opacity: 0.1;
        z-index: 99;
        color: black;
        font-size: 70px;
        transform: translate(-50%,-50%) rotate(-45deg);
        white-space: nowrap;
        pointer-events: none;">Shri Siddeshwar Medicals</div> -->
    <div style="display:flex; align-items: center; margin-bottom: 10px;">
        <span style="font-size: 8px;font-weight: 700;width: 33.33%;">(A Unit of Shri Siddeshwar Loka Kalyana Charitable
            Trust)</span>
        <h4 style="text-transform: uppercase;font-weight: 500;margin:0;;width: 33.33%;text-align: center;">Tax Invoice (SALES RETURN)
        </h4>
    </div>

    <table class="table" style="width: 100%;border-collapse: collapse;">
        <tbody>
            <tr>
                <td colspan="4"
                    style="vertical-align: top;border: 1px solid black;width:40%; padding:0 10px 10px;font-size:10px;">
                    <h3
                        style="margin-top:0;margin-bottom:5px;color: #e26d14;text-transform: uppercase;font-size: 10px;">
                        {{reportPrintObjList[0]?.StoreName}}</h3>

                    <div>{{reportPrintObjList[0]?.StoreAddress}}</div>
                    <!-- <div>GST No. 29ABCTS6874R1Z8</div>
                    <div>
                        <span style="margin-right: 20px;">D.L.No. 123456789456123</span>
                        <span>D.L.No. 123456789456123</span>
                    </div> -->
                    <div>
                        <a href="tel:08352259399" style="margin-right: 20px;">Ph.: 08352259399</a>
                        <a href="mailto:info@jsshospitals.com">info@jsshospitals.com</a>
                    </div>
                </td>
                <td colspan="6" style="border: 1px solid black;width: 33.33%;vertical-align: top; padding: 0;">
                    <table style="width: 100%;border-collapse: collapse;font-size:10px;">
                        <!-- <tr> -->
                        <td style="vertical-align: top;padding:0 10px 10px">
                            Customer Id : {{reportPrintObjList[0]?.RegNo}} <br>
                            Customer Name: {{reportPrintObjList[0]?.PatientName}} <br>
                            Age & Gen: - <span style="margin-left: 10px;">Mob:
                                {{reportPrintObjList[0]?.ExtMobileNo}}</span><br>
                            Doctor Name: {{reportPrintObjList[0]?.DoctorName}}
                        </td>
                        <!-- </tr> -->
                    </table>
                </td>
                <!-- <td>
                </td> -->

            </tr>
            <tr>
                <td colspan="4"
                    style="vertical-align: top;border: 1px solid black;width:40%; padding:0 10px 10px;font-size:10px;">
                    <div>GST No. {{reportPrintObjList[0]?.GSTIN}}</div>
                    <div>
                        <span style="margin-right: 20px;">D.L.No. {{reportPrintObjList[0]?.DL_NO}}</span>
                        <!-- <span>D.L.No. {{reportPrintObjList[0]?.DL_NO}}</span> -->
                    </div>
                </td>
                <td colspan="6" style="border: 1px solid black;width: 33.33%;vertical-align: top; padding: 0;">
                    <table style="width: 100%;font-size:10px;">
                        <!-- <tr> -->
                        <td style="vertical-align: top;padding:0 10px 10px">
                            SR No: {{reportPrintObjList[0]?.SalesReturnNo}} <span style="margin-left: 10px;">Bill
                                Date:{{reportPrintObjList[0]?.Time | date:"short"}}</span><br>
                            Mode of Payment : {{reportPrintObjList[0]?.PayMode}} <br>
                        </td>
                        <!-- </tr> -->
                    </table>
                </td>
            </tr>

            <tr style="font-size:10px;">
                <td
                    style="border: 1px solid black;font-weight:bold;text-align:center;vertical-align: middle;padding:5px 5px;width: 15px;">
                    Sr No.</td>
                <td
                    style="border: 1px solid black;font-weight:bold;text-align:center;vertical-align: middle;padding:5px 5px;width: 15px;">
                    HSN</td>
                <td
                    style="border: 1px solid black;font-weight:bold;text-align:center;vertical-align: middle;padding:5px 5px;width: 15px;">
                    MFR</td>
                <td
                    style="border: 1px solid black;font-weight:bold;text-align:center;vertical-align: middle;padding:5px 5px;width: 100px;">
                    Product Name</td>
                <td
                    style="border: 1px solid black;font-weight:bold;text-align:center;vertical-align: middle;padding:5px 5px;width: 15px;">
                    Pack</td>
                <td
                    style="border: 1px solid black;font-weight:bold;text-align:center;vertical-align: middle;padding:5px 5px;width: 35px;">
                    Batch No.</td>
                <td
                    style="border: 1px solid black;font-weight:bold;text-align:center;vertical-align: middle;padding:5px 5px;width: 15px;">
                    ExpDate</td>
                <td
                    style="border: 1px solid black;font-weight:bold;text-align:center;vertical-align: middle;padding:5px 5px;width: 15px;">
                    Qty</td>
                <td
                    style="border: 1px solid black;font-weight:bold;text-align:center;vertical-align: middle;padding:5px 5px;width: 15px;">
                    MRP</td>
                <td
                    style="border: 1px solid black;font-weight:bold;text-align:center;vertical-align: middle;padding:5px 5px;width: 35px;">
                    Amount</td>
            </tr>
            <tr *ngFor="let item of reportPrintObjList let indx = index;" style="font-size:10px;">
                <td style="border: 1px solid black;vertical-align: top;
                padding: 0;height: 15px;">{{indx+1}}</td>
                <td style="border: 1px solid black;vertical-align: top;
                padding: 0;height: 15px;">{{item?.HSNcode}}</td>
                <td style="border: 1px solid black;vertical-align: top;
                padding: 0;height: 15px;">{{'-'}}</td>
                <td style="border: 1px solid black;vertical-align: top;
                padding: 0;height: 15px;">{{item?.ItemName}}</td>
                <td style="border: 1px solid black;vertical-align: top;
                padding: 0;height: 15px;">{{item?.ConversionFactor}}</td>
                <td style="border: 1px solid black;vertical-align: top;
                padding: 0;height: 15px;">{{item?.BatchNo}}</td>
                <td style="border: 1px solid black;vertical-align: top;
                padding: 0;height: 15px;">{{item?.BatchExpDate | date: 'MM/yyyy'}}</td>
                <td style="border: 1px solid black;vertical-align: top;text-align: center;
                padding: 0;height: 15px;">{{item?.Qty}}</td>
                <td style="border: 1px solid black;vertical-align: top;text-align: right;
                padding: 0;height: 15px;">{{item?.UnitMRP}}</td>
                <td style="border: 1px solid black;vertical-align: top; text-align: right;
                padding: 3px;height: 15px;">{{item?.TotalAmount}}</td>
            </tr>
            <tr>
                <td colspan="6" style="border: 1px solid black;vertical-align: top;
                padding: 0 10px 10px;">
                    <div style="font-weight: 400;">Terms & Conditions</div>
                    <ul style="margin: 5px 0 0 0;
                    font-size: 10px;
                    padding-left: 17px;
                    font-weight: 400;">
                        <li>
                            Please check the item before leaving medical.
                        </li>
                        <li>
                            Please consult your doctor before consuming the medicine
                        </li>
                        <li>
                            All disputes are subject to Vijayapura jurisdiction only
                        </li>
                    </ul>
                </td>
                <!-- <td colspan="5" style="border: 1px solid black;vertical-align: top;padding: 0;"> 
                </td> -->
                <td colspan="9" style="border: 1px solid black;vertical-align: top;
                padding: 0 10px 10px;width: 300px;font-size:10px;">
                    <div style="display:flex;align-items: center;">
                        <span style="width:90px;display:inline-block;">Sub Total</span>
                        <span style="margin:0 5px">:</span>
                        <span>₹ {{reportPrintObjList[0]?.BillTotalAmount}}</span>
                    </div>
                    <div style="display:flex;align-items: center;">
                        <span style="width:90px;display:inline-block;">Discount</span>
                        <span style="margin:0 5px">:</span>
                        <span>₹ {{reportPrintObjList[0]?.BillDiscAmount}}</span>
                    </div>
                    <div style="display:flex;align-items: center;">
                        <span style="width:90px;display:inline-block;">Total GST</span>
                        <span style="margin:0 5px">:</span>
                        <span>₹ {{reportPrintObjList[0]?.BillVatAmount}}</span>
                    </div>
                    <div style="display:flex;align-items: center;">
                        <span style="width:90px;display:inline-block;">Round off</span>
                        <span style="margin:0 5px">:</span>
                        <span>₹ 0.00</span>
                    </div>
                    <div style="display:flex;align-items: center;font-size: 12px;font-weight: bold">
                        <span style="display:inline-block;">Grand Total</span>
                        <span style="margin:0 5px">:</span>
                        <span>₹ {{reportPrintObjList[0]?.NetAmount}}</span>
                    </div>
                </td>
            </tr>
            <!-- <tr>
                <td colspan="9" style="border: 1px solid black;vertical-align: top;
                padding: 5px 10px;">
                    <div style="font-size: 15px;font-weight: bold">
                        Your Saved Amount: {{reportPrintObjList[0]?.DiscAmount}}
                    </div>
                </td>
                <td rowspan="2" style="border: 1px solid black;vertical-align: bottom;
                padding: 5px 10px;text-align: center;">
                
                    <span style="font-size: 11px;opacity:.6;">For Shri Siddeshwar Medicals 24/7</span>
                </td>
            </tr> -->
            <!-- <tr>
                <td colspan="9" style="border: 1px solid black;vertical-align: top;
                padding: 5px 10px;">
                    Total Invoice Value in words: 
                </td>
            </tr> -->
            <tr style="font-size: 10px;">
                <td colspan="5">
                    Billed By: {{reportPrintObjList[0]?.UserName}}
                </td>
                <td colspan="5" style="text-align: right;">
                    This is Computer generated invoice hence doesn’t require signature
                </td>
            </tr>
        </tbody>
    </table>

    <!-- <div style="font-style: italic; opacity:.6;text-align: center;font-size: 10px; margin-top: 15px;">
        This is Computer generated invoice hence doesn’t require signature
    </div> -->
</div>