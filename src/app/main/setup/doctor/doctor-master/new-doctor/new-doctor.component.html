<div class="modal-wrapper grid-container">
    <!-- Modal header -->
    <div class="modal-header accent">
        <div class="modal-header-content">
            <div class="modal-header-title">
                <span [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}">New Doctor Master</span>
            </div>
            <div class="modal-header-right">

                <div fxLayout="row" fxLayoutALign="end start">
                    <!-- <app-common-date [screenFrom]="screenFromString" (dateTimeEventEmitter)="getDateTime($event)">
                    </app-common-date> -->
                    <button mat-icon-button tabIndex="-1" (click)="onClose()" aria-label="Close dialog">
                        <mat-icon>close</mat-icon>
                    </button>

                </div>
            </div>
        </div>
    </div>

    <!-- Modal body -->
    <div class="modal-body" fusePerfectScrollbar>
        <div class="modal-body-container">
            <form [formGroup]="_doctorService.myform">
                <div fxLayout="column" class="gap-12">
                    <div class="modal-card-container">
                        <mat-card>
                            <div class="form-container mat-form-field-auto">
                                <div fxLayout="row wrap" fxLayoutGap="12px grid">

                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <mat-form-field appearance="outline" fxFlex>
                                            <mat-label>Prefix</mat-label>
                                            <input matAutocompletePosition="below" type="text"
                                                placeholder="Select Prefix" matInput (keydown)="onEnterprefix($event)"
                                                formControlName="PrefixID" [matAutocomplete]="autoPrefix" required>
                                            <span matSuffix style="display: flex;">
                                                <mat-icon class="mat-icon-close"
                                                    (click)="_doctorService.myform.get('PrefixID').setValue(''); isPrefixSelected = false;">close</mat-icon>
                                                <mat-icon class="mat-icon-close"
                                                    (click)="_doctorService.myform.get('PrefixID').setValue(''); isPrefixSelected = false;">search</mat-icon>
                                            </span>
                                            <mat-autocomplete #autoPrefix="matAutocomplete"
                                                [displayWith]="getOptionTextPrefix">
                                                <mat-option *ngFor="let option of filteredOptionsPrefix | async"
                                                    [value]="option" (onSelectionChange)="onChangeGenderList(option)">
                                                    {{option.PrefixName}}
                                                </mat-option>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                    </div>

                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <mat-form-field appearance="outline" class="mr-sm-12" fxFlex>
                                            <input name="FirstName" formControlName="FirstName"
                                                placeholder="Enter FirstName "
                                                [ngClass]="{ 'is-invalid': submitted && f.FirstName.errors }" matInput
                                                required>
                                            <span class="error" *ngIf="f.FirstName.invalid && f.FirstName.touched">First
                                                Name is required
                                                Enter only
                                                Alphabets</span>
                                        </mat-form-field>
                                    </div>

                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <mat-form-field appearance="outline" class="mr-sm-12" fxFlex>
                                            <input name="MiddleName" formControlName="MiddleName"
                                                placeholder="Enter MiddleName "
                                                [ngClass]="{ 'is-invalid': submitted && f.MiddleName.errors }" matInput>
                                            <span class="error"
                                                *ngIf="f.MiddleName.invalid && f.MiddleName.touched">Middle Name is
                                                required
                                                Enter only
                                                Alphabets</span>
                                        </mat-form-field>
                                    </div>

                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <mat-form-field appearance="outline" class="mr-sm-12" fxFlex>
                                            <input name="LastName" formControlName="LastName"
                                                placeholder="Enter LastName "
                                                [ngClass]="{ 'is-invalid': submitted && f.LastName.errors }" matInput
                                                required>
                                            <span class="error" *ngIf="f.LastName.invalid && f.LastName.touched">Last
                                                Name is required Enter
                                                only
                                                Alphabets</span>
                                        </mat-form-field>
                                    </div>

                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <mat-form-field appearance="outline" fxFlex>
                                            <mat-label>Gender</mat-label>
                                            <mat-select formControlName="GenderId">
                                                <mat-option></mat-option>
                                                <mat-option *ngFor="let m of GendercmbList" [value]="m">
                                                    {{m.GenderName}}
                                                </mat-option>
                                            </mat-select>
                                            <mat-error
                                                *ngIf="_doctorService.myform.get('GenderId').invalid && _doctorService.myform.get('GenderId').touched">
                                                <span
                                                    *ngIf="_doctorService.myform.get('GenderId').hasError('required')">
                                                    Gender is required</span>
                                            </mat-error>
                                        </mat-form-field>
                                    </div>

                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <mat-form-field appearance="outline" fxFlex>
                                            <mat-label>Birth date</mat-label>
                                            <input name="DateofBirth" matInput [matDatepicker]="picker"
                                                formControllName="DateofBirth"
                                                (dateChange)="onChangeDateofBirth($event.value)"
                                                [value]="registerObj.DateofBirth">
                                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                            <mat-datepicker #picker></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                    <!-- age, month, dat -->
                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <div fxLayout="row" class="gap-8">
                                            <mat-form-field appearance="outline" fxFlex>
                                                <mat-label>Age (Y)</mat-label>
                                                <input name="AgeYear" placeholder="Age (Y)" matInput
                                                    [(ngModel)]="registerObj.AgeYear" [(value)]="registerObj.AgeYear"
                                                    readonly />
                                            </mat-form-field>
                                            <mat-form-field appearance="outline" fxFlex>
                                                <mat-label>Age (M)</mat-label>
                                                <input name="AgeMonth" placeholder="Age (M)" matInput
                                                    [ngModel]="registerObj.AgeMonth" [(value)]="registerObj.AgeMonth"
                                                    readonly />
                                            </mat-form-field>
                                            <mat-form-field appearance="outline" fxFlex>
                                                <mat-label>Age (D)</mat-label>
                                                <input name="AgeDay" placeholder="Age (D)" matInput
                                                    [ngModel]="registerObj.AgeDay" [(value)]="registerObj.AgeDay"
                                                    readonly />
                                            </mat-form-field>
                                        </div>
                                    </div>

                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">


                                        <mat-form-field appearance="outline" fxFlex>
                                            <mat-label>Phone Number</mat-label>
                                            <input name="Phone" formControlName="Phone" placeholder="Phone Number"
                                                matInput required #mobile (keydown)="onEnterphone($event)"
                                                [(ngModel)]="registerObj.Phone"
                                                oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0, 10);"
                                                required="required" value="9876658688">
                                            <mat-error class="error"
                                                *ngIf="_doctorService.myform.get('Phone').invalid && _doctorService.myform.get('Phone').touched">10
                                                digits Phone number is
                                                required</mat-error>
                                        </mat-form-field>
                                    </div>

                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <mat-form-field appearance="outline" fxFlex>
                                            <mat-label>Mobile Number</mat-label>
                                            <input name="MobileNo" formControlName="MobileNo"
                                                placeholder="Mobile Number" matInput required #mobile
                                                (keydown)="onEntermobile($event)" [(ngModel)]="registerObj.Mobile"
                                                oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0, 10);"
                                                required="required" value="9876658688">
                                            <mat-error class="error"
                                                *ngIf="_doctorService.myform.get('MobileNo').invalid && _doctorService.myform.get('MobileNo').touched">10
                                                digits Mobile number is
                                                required</mat-error>
                                        </mat-form-field>
                                    </div>

                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <mat-form-field appearance="outline" fxFlex>
                                            <input name="PassportNo" formControlName="PassportNo" matInput
                                                [ngClass]="{ 'is-invalid': submitted && f.PassportNo.errors }"
                                                placeholder="Enter PassportNo.">
                                            <span class="error"
                                                *ngIf="f.PassportNo.invalid && f.PassportNo.touched">PassportNo required
                                                Valid
                                                Formate</span>
                                        </mat-form-field>
                                    </div>
                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <mat-form-field appearance="outline" fxFlex>
                                            <input name="ESINO" formControlName="ESINO" matInput
                                                placeholder="Enter ESINO">
                                            <mat-error>Please enter ESINO </mat-error>
                                        </mat-form-field>
                                    </div>

                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">

                                        <mat-form-field appearance="outline" fxFlex>
                                            <input name="RegNo" size="20" formControlName="RegNo" matInput
                                                placeholder="Enter RegNo">
                                            <mat-error>Please enter RegNo </mat-error>
                                        </mat-form-field>


                                    </div>

                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">

                                        <mat-form-field appearance="outline" fxFlex>
                                            <mat-label>Reg date</mat-label>
                                            <input name="RegDate" matInput [matDatepicker]="picker1"
                                            (dateChange)="onChangeRegDate($event.value)"
                                                formControllName="RegDate" [value]="registerObj.RegDate">
                                            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                            <mat-datepicker #picker1></mat-datepicker>
                                        </mat-form-field>
                                    </div>

                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <mat-form-field appearance="outline" fxFlex>
                                            <input name="Education" formControlName="Education" matInput
                                                [ngClass]="{ 'is-invalid': submitted && f.Education.errors }"
                                                placeholder="Enter Education">
                                            <span class="error"
                                                *ngIf="f.Education.invalid && f.Education.touched">Education required
                                                Enter
                                                only
                                                Alphabets</span>
                                        </mat-form-field>
                                    </div>
                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <mat-form-field appearance="outline" fxFlex>
                                            <input name="MahRegNo" formControlName="MahRegNo" matInput
                                                placeholder="Enter MahRegNo">
                                            <mat-error>Please enter MahRegNo </mat-error>
                                        </mat-form-field>

                                    </div>

                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <mat-form-field appearance="outline" fxFlex>
                                            <mat-label>MahReg date</mat-label>
                                            <input name="MahRegDate" matInput [matDatepicker]="picker2"
                                            (dateChange)="onChangeMahRegDate($event.value)"
                                                formControllName="MahRegDate" [value]="registerObj.MahRegDate">
                                            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                            <mat-datepicker #picker2></mat-datepicker>
                                        </mat-form-field>
                                    </div>

                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <mat-form-field appearance="outline" class="mr-sm-12" fxFlex>
                                            <input name="RefDocHospitalName" formControlName="RefDocHospitalName"
                                                matInput
                                                [ngClass]="{ 'is-invalid': submitted && f.RefDocHospitalName.errors }"
                                                placeholder="Enter RefDocHospitalName">
                                            <span class="error"
                                                *ngIf="f.RefDocHospitalName.invalid && f.RefDocHospitalName.touched">RefDocHospital
                                                Name
                                                is
                                                required Enter only Alphabets</span>
                                        </mat-form-field>
                                    </div>
                                    <!-- Phone number -->
                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <mat-form-field appearance="outline" fxFlex>
                                            <mat-label>DoctorType</mat-label>
                                            <input matAutocompletePosition="below" type="text"
                                                placeholder="Select DoctorTypeId" matInput
                                                (keydown)="onEnterdoctype($event)" formControlName="DoctorTypeId"
                                                [matAutocomplete]="autoDoctorTypeId" required>
                                            <span matSuffix style="display: flex;">
                                                <mat-icon class="mat-icon-close"
                                                    (click)="_doctorService.myform.get('DoctorTypeId').setValue(''); isdoctypeSelected = false;">close</mat-icon>
                                                <mat-icon class="mat-icon-close"
                                                    (click)="_doctorService.myform.get('DoctorTypeId').setValue(''); isdoctypeSelected = false;">search</mat-icon>
                                            </span>
                                            <mat-autocomplete #autoDoctorTypeId="matAutocomplete"
                                                [displayWith]="getOptionTextdoctype">
                                                <mat-option *ngFor="let option of filteredDoctortype | async"
                                                    [value]="option">
                                                    {{option.DoctorType}}
                                                </mat-option>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                    </div>

                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <mat-slide-toggle class="example-margin" name="IsConsultant"
                                            formControlName="IsConsultant" style="margin-right: 10px;">
                                            IsConsultant
                                        </mat-slide-toggle>

                                        <mat-slide-toggle class="example-margin" name="IsRefDoc"
                                            formControlName="IsRefDoc" style="margin-right: 10px;">
                                            IsRefDoctor
                                        </mat-slide-toggle>

                                        <mat-checkbox aria-label="Is Active" formControlName="isActive" (checked)=true
                                            style="font-weight: bold;">
                                            IsActive
                                        </mat-checkbox>
                                    </div>
                                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <div class="photo-capture p-16 border border-radius-4 gap-12" fxLayout="column">
                                            <div class="photp-capture-image">
                                                <img class="h-100-p w-100-p border-radius-4"
                                                    style="height:100px !important;"
                                                    [src]="sanitizeImagePreview ? sanitizeImagePreview:'/assets/images/noimage.jpg'" />
                                            </div>
                                            <div class="photo-capture-button ">
                                                <label
                                                    class="btn btn-primary-outline btn-hover btn-with-icon w-100-p m-0 "
                                                    (click)="onViewSignature()">
                                                    <span class="btn-icon">
                                                        <mat-icon>camera_enhance</mat-icon>
                                                    </span>
                                                    <span>Capture Signature</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </mat-card>
                    </div>
                </div>
            </form>
            <mat-card style="padding: 6px;">
                <form [formGroup]="_doctorService.myform">
                    <div fxFlex="75%" fxFlex.xs="100%" fxFlex.sm="33%" style="margin-left: 10px;">
                        <mat-form-field appearance="outline" fxFlex="40%" fxFlex.xs="100%" fxFlex.sm="33%"
                            style="margin-right: 20px;">
                            <mat-label>Department</mat-label>
                            <input matAutocompletePosition="below" type="text" placeholder="Select Department"
                                [(ngModel)]="vDepartmentid" matInput #dept (keydown)="onEnterdept($event,vDepartmentid)"
                                formControlName="DepartmentId" [matAutocomplete]="autoDep">
                            <span matSuffix style="display: flex;">
                                <mat-icon class="mat-icon-close"
                                    (click)="_doctorService.myform.get('Departmentid').setValue(''); isDepartmentSelected = false;">close</mat-icon>
                                <mat-icon class="mat-icon-close"
                                    (click)="_doctorService.myform.get('Departmentid').setValue(''); isDepartmentSelected = false;">search</mat-icon>
                            </span>
                            <mat-autocomplete #autoDep="matAutocomplete" [displayWith]="getOptionTextDep">
                                <mat-option *ngFor="let option of filteredOptionsDep | async" [value]="option">
                                    <mat-checkbox [checked]="option.selected" (change)="toggleSelection(option)"
                                        (click)="$event.stopPropagation()"> {{option.DepartmentName}}</mat-checkbox>
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>

                        <mat-chip-list #chipList>
                            <mat-chip *ngFor="let item of selectedItems">
                                {{ item.DepartmentName }} <mat-icon (click)="remove(item)">close</mat-icon>
                            </mat-chip>
                        </mat-chip-list>
                    </div>
                </form>
            </mat-card>
        </div>
    </div>
    <div class="modal-footer p-24">

        <div class="modal-footer-buttons gap-8" fxLayout="row" fxLayoutAlign="end">
            <button class="btn btn-danger-outline" (click)="onClose()">Close</button>
            <button class="btn btn-primary " (click)="onSubmit()">Save</button>
        </div>
    </div>
    <!-- Modal footer -->

</div>