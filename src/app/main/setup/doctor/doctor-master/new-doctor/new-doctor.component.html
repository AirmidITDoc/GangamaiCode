<div class="modal-header accent">
    <div class="modal-header-content">
        <div class="modal-header-title">
            <span [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}">New Doctor Master</span>
        </div>
        <div class="modal-header-right">
            <div class="close-icon">
                <button mat-icon-button (click)="onClose()" tabIndex="-1" aria-label="Close dialog">
                    <mat-icon>close</mat-icon>
                </button>
            </div>
        </div>
    </div>
</div>

<mat-card>
    <form [formGroup]="myForm" fxLayout="column" style="padding: 5px 5px 0px 5px;">
        <input type="hidden" name="DoctorId" formControlName="DoctorId">

        <div fxLayout="row" fxLayout.gt-xs="row" fxLayoutGap="4px"
            class="top-header accent heading-container h-40 border-radius-4">
            <span style="font-size:15px; font-weight: bolder; color:white;padding:7px;">Personal
                Details</span>
        </div>

        <mat-card>
            <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="12px grid">
                <div fxFlex="85%" fxFlex.xs="100%" fxFlex.sm="80%" fxLayout="row wrap">

                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <airmid-autocomplete label="Prefix" formControlName="PrefixID" [formGroup]="myForm"
                            [(value)]="registerObj.prefixId" [validations]="getValidationMessages().PrefixID"
                            [mode]="autocompleteModeprefix" #ddlPrefix>
                        </airmid-autocomplete>
                    </div>

                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <airmid-textbox label="First Name" formControlName="FirstName" [value]="registerObj.firstName"
                            [formGroup]="myForm" [validations]="getValidationMessages().FirstName" [maxLength]="50">
                        </airmid-textbox>
                    </div>

                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <airmid-textbox label="Middle Name" formControlName="MiddleName"
                            [value]="registerObj.middleName" [formGroup]="myForm"
                            [validations]="getValidationMessages().MiddleName" [maxLength]="50">
                        </airmid-textbox>
                    </div>

                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <airmid-textbox label="Last Name" formControlName="LastName" [value]="registerObj.lastName"
                            [formGroup]="myForm" [validations]="getValidationMessages().LastName" [maxLength]="50">
                        </airmid-textbox>
                    </div>
                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <airmid-autocomplete label="Gender" formControlName="GenderId" [formGroup]="myForm"
                            [(value)]="registerObj.genderId" [validations]="getValidationMessages().GenderId"
                            [mode]="autocompleteModegender">
                        </airmid-autocomplete>
                    </div>

                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <mat-button-toggle-group [(ngModel)]="dateStyle" (change)="OnChangeDobType($event)"
                            aria-label="Font Style">
                            <mat-button-toggle value="Date">Date</mat-button-toggle>
                            <mat-button-toggle value="Day">Day</mat-button-toggle>
                            <mat-button-toggle value="Month">Month</mat-button-toggle>
                            <mat-button-toggle value="Year">Year</mat-button-toggle>
                        </mat-button-toggle-group>
                    </div>

                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <div fxLayout="row" class="gap-8">
                            <mat-form-field appearance="outline" fxFlex="50%" *ngIf="dateStyle=='Year'">
                                <mat-label>Age (Y)</mat-label>
                                <input placeholder="Age (Y)" matInput (keyup)="CalcDOB('Year',$event)"
                                    oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,3);">
                            </mat-form-field>
                            <mat-form-field appearance="outline" fxFlex="50%" *ngIf="dateStyle=='Month'">
                                <mat-label>Age (M)</mat-label>
                                <input placeholder="Age (M)" matInput (keyup)="CalcDOB('Month',$event)"
                                    oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,2);">
                            </mat-form-field>
                            <mat-form-field appearance="outline" fxFlex="50%" *ngIf="dateStyle=='Day'">
                                <mat-label>Age (D)</mat-label>
                                <input placeholder="Age (D)" matInput (keyup)="CalcDOB('Day',$event)"
                                    oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,2);">
                            </mat-form-field>
                            <mat-form-field appearance="outline" fxFlex="50%">
                                <input matInput [matDatepicker]="validFromPicker" formControllName="DateOfBirth" #bday
                                    [value]="registerObj.dateofBirth" (keydown)="onEnterbday($event)"
                                    [disabled]="dateStyle!='Date'" (dateChange)="onChangeDateofBirth($event.value)"
                                    placeholder="mm/dd/yyyy">
                                <mat-datepicker-toggle matSuffix [for]="validFromPicker"></mat-datepicker-toggle>
                                <mat-datepicker #validFromPicker></mat-datepicker>
                            </mat-form-field>
                        </div>
                    </div>

                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <div fxLayout="row" class="gap-8">
                            <mat-form-field appearance="outline" fxFlex="30%">
                                <mat-label>Age (Y)</mat-label>
                                <!-- <input name="AgeYear" formControlName="AgeYear" placeholder="Age (Y)" matInput
                                    [(ngModel)]="registerObj.ageYear" (ngModelChange)="registerObj.ageYear = $event"
                                    maxlength="3" #agey readonly (keyup)="ageyearcheck(registerObj.ageYear)"
                                    (keydown)="onEnteragey($event,registerObj.ageYear)"
                                    oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,3);"> -->

                                <input name="AgeYear" formControlName="AgeYear" placeholder="Age (Y)" matInput
                                    [(ngModel)]="registerObj.ageYear" (ngModelChange)="registerObj.ageYear = $event"
                                    required type="number" maxlength="4" #agey
                                    (keydown)="onEnteragey($event,registerObj.ageYear)"
                                    oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,3);">

                                <mat-error *ngIf="myForm.get('AgeYear').invalid && myForm.get('AgeYear').touched">Please
                                    enter Age Year </mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="30%">
                                <mat-label>Age (M)</mat-label>
                                <!-- <input name="AgeMonth" formControlName="AgeMonth" placeholder="Age (M)" matInput
                                    readonly [(ngModel)]="registerObj.ageMonth"
                                    (ngModelChange)="registerObj.ageMonth = $event" type="number" maxlength="2" #agem
                                    (keydown)="onEnteragem($event)"
                                    oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,2);"> -->

                                <input name="AgeMonth" formControlName="AgeMonth" placeholder="Age (M)" matInput
                                    [(ngModel)]="registerObj.ageMonth" (ngModelChange)="registerObj.ageMonth = $event"
                                    type="number" maxlength="2" #agem (keydown)="onEnteragem($event)"
                                    oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,2);">

                                <mat-error *ngIf="myForm.get('AgeMonth').invalid && myForm.get('AgeMonth').touched">
                                    Please enter Age Month </mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="30%">
                                <mat-label>Age (D)</mat-label>
                                <!-- <input name="AgeDay" formControlName="AgeDay" placeholder="Age (D)" matInput
                                    [(ngModel)]="registerObj.ageDay" readonly
                                    (ngModelChange)="registerObj.ageDay = $event" type="number" maxlength="2" #aged
                                    (keydown)="onEnteraged($event)"
                                    oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,2);"> -->

                                <input name="AgeDay" formControlName="AgeDay" placeholder="Age (D)" matInput
                                    [(ngModel)]="registerObj.ageDay" (ngModelChange)="registerObj.ageDay = $event"
                                    type="number" maxlength="2" #aged (keydown)="onEnteraged($event)"
                                    oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,2);">

                                <mat-error *ngIf="myForm.get('AgeDay').invalid && myForm.get('AgeDay').touched">
                                    Please enter Age Day </mat-error>
                            </mat-form-field>
                        </div>
                    </div>

                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <airmid-textbox label="Pan Card No" formControlName="Pancardno" [value]="registerObj.panCardNo"
                            [formGroup]="myForm" [validations]="getValidationMessages().Pancardno" [maxLength]="10">
                        </airmid-textbox>
                    </div>

                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <airmid-textbox label="Aadhar Card No" formControlName="AadharCardNo"
                            [value]="registerObj.aadharCardNo" [formGroup]="myForm"
                            [validations]="getValidationMessages().AadharCardNo" [maxLength]="12">
                        </airmid-textbox>
                    </div>

                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <airmid-textbox label="Mobile No" formControlName="MobileNo" [value]="registerObj.mobile"
                            [formGroup]="myForm" [validations]="getValidationMessages().MobileNo" [maxLength]="12">
                        </airmid-textbox>
                    </div>

                    <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <airmid-textbox label="Address" formControlName="Address" [value]="registerObj.address"
                            [formGroup]="myForm" [validations]="getValidationMessages().Address">
                        </airmid-textbox>
                    </div>
                </div>

                <div fxFlex="15%" fxFlex.xs="100%" fxFlex.sm="20%">
                    <mat-card style="padding: 6px;height: 200px;">
                        <div class="photo-capture p-16 border border-radius-4 gap-12" fxLayout="column">
                            <div class="photp-capture-image">
                                <img class="h-100-p w-100-p border-radius-4" style="height:100px !important;"
                                    [src]="sanitizeImagePreview ? sanitizeImagePreview:'/assets/images/noimage.jpg'" />
                            </div>
                            <div class="photo-capture-button ">
                                <label class="btn btn-primary-outline btn-hover btn-with-icon w-100-p m-0 "
                                    (click)="onViewSignature()">
                                    <span class="btn-icon">
                                        <mat-icon>camera_enhance</mat-icon>
                                    </span>
                                    <span>Capture Signature</span>
                                </label>
                            </div>
                        </div>
                    </mat-card>
                </div>

            </div>
        </mat-card>
    </form>

    <form [formGroup]="myForm" fxLayout="column" style="padding: 0px 5px 0px 5px;">
        <div fxLayout="row" fxLayout.gt-xs="row" fxLayoutGap="4px"
            class="top-header accent heading-container h-40 border-radius-4">
            <span style="font-size:15px;font-weight: bolder; color:white;padding:7px;">Education
                Details</span>
        </div>
        <mat-card>

            <div fxFlex="100" fxLayout="row wrap">
                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                    <airmid-autocomplete label="City" formControlName="CityId" [formGroup]="myForm"
                        [validations]="getValidationMessages().CityId" [mode]="autocompleteModecity">
                    </airmid-autocomplete>
                </div>

                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                    <airmid-textbox label="ESINO" formControlName="ESINO" [value]="registerObj.ESINO"
                        [formGroup]="myForm" [validations]="getValidationMessages().ESINO" [maxLength]="10">
                    </airmid-textbox>
                </div>

                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                    <airmid-textbox label="RegNo" formControlName="RegNo" [value]="registerObj.regNo"
                        [formGroup]="myForm" [validations]="getValidationMessages().RegNo" [maxLength]="10">
                    </airmid-textbox>
                </div>

                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                    <mat-form-field appearance="outline" fxFlex>
                        <mat-label>Reg date</mat-label>
                        <input name="RegDate" matInput [matDatepicker]="picker1" formControllName="RegDate"
                            [value]="registerObj.regDate">
                        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                        <mat-datepicker #picker1></mat-datepicker>
                    </mat-form-field>
                </div>

                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                    <airmid-textbox label="Education" formControlName="Education" [value]="registerObj.education"
                        [formGroup]="myForm" [validations]="getValidationMessages().Education" [maxLength]="10">
                    </airmid-textbox>
                </div>

                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                    <airmid-textbox label="MahRegNo" formControlName="MahRegNo" [value]="registerObj.mahRegNo"
                        [formGroup]="myForm" [validations]="getValidationMessages().mahRegNo" [maxLength]="10">
                    </airmid-textbox>
                </div>

                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                    <mat-form-field appearance="outline" fxFlex>
                        <mat-label>MahReg date</mat-label>
                        <input name="MahRegDate" matInput [matDatepicker]="picker2" formControllName="MahRegDate"
                            [value]="registerObj.mahRegDate">
                        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                        <mat-datepicker #picker2></mat-datepicker>
                    </mat-form-field>
                </div>

                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                    <airmid-textbox label="Hospital Name" formControlName="RefDocHospitalName" [value]="registerObj.refDocHospitalName"
                        [formGroup]="myForm" [validations]="getValidationMessages().RefDocHospitalName" [maxLength]="10">
                    </airmid-textbox>
                </div>

                <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                    <airmid-autocomplete label="DoctorType" formControlName="DoctorTypeId" [formGroup]="myForm"
                        [validations]="getValidationMessages().DoctorTypeId"
                        [mode]="autocompleteModedoctorty">
                    </airmid-autocomplete>

                </div>
            </div>
        </mat-card>
    </form>


    <form [formGroup]="myForm" fxLayout="column" style="padding: 0px 5px 0px 5px;">

        <div fxLayout="row" fxLayout.gt-xs="row" fxLayoutGap="4px"
            class="top-header accent heading-container h-40 border-radius-4">
            <span style="font-size:15px; font-weight: bolder; color:white;padding:7px;">Department Details</span>
        </div>
        <div fxLayout="row">

            <div fxFlex>
                <mat-card>
                    <form [formGroup]="myForm">

                        <div fxLayout="row">
                            <!-- <mat-form-field appearance="outline" fxFlex="30%">
                                <mat-label>Department</mat-label>
                                <input matAutocompletePosition="below" type="text" placeholder="Select Department"
                                    [(ngModel)]="vDepartmentid" matInput #dept
                                    (keydown)="onEnterdept($event,vDepartmentid)" formControlName="DepartmentId"
                                    [matAutocomplete]="autoDep">
                                <span matSuffix style="display: flex;">
                                    <mat-icon class="mat-icon-close"
                                        (click)="myForm.get('Departmentid').setValue(''); isDepartmentSelected = false;">close</mat-icon>
                                    <mat-icon class="mat-icon-close"
                                        (click)="myForm.get('Departmentid').setValue(''); isDepartmentSelected = false;">search</mat-icon>
                                </span>
                                <mat-autocomplete #autoDep="matAutocomplete" [displayWith]="getOptionTextDep">
                                    <mat-option *ngFor="let option of filteredOptionsDep | async" [value]="option">
                                        <mat-checkbox [checked]="option.selected" (change)="toggleSelection(option)"
                                            (click)="$event.stopPropagation()"> {{option.DepartmentName}}</mat-checkbox>
                                    </mat-option>
                                </mat-autocomplete>
                            </mat-form-field>
                            <mat-chip-list #chipList>
                                <mat-chip *ngFor="let item of selectedItems">
                                    {{ item.DepartmentName }} <mat-icon (click)="remove(item)">close</mat-icon>
                                </mat-chip>
                            </mat-chip-list> -->
                            <!-- <airmid-autocomplete [mode]="autocompleteModedepartment" (selectDdlObject)="selectChangedep($event)" ></airmid-autocomplete> -->

                            <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
                                <airmid-autocomplete label="DepartmentName" formControlName="Departmentid"
                                    [formGroup]="myForm" [IsMultiPle]="true" [value]="selectedItems"
                                    [validations]="getValidationMessages().Departmentid"
                                    [mode]="autocompleteModedepartment">
                                </airmid-autocomplete>
                            </div>
                            <mat-chip-list #chipList>
                                <mat-chip *ngFor="let item of myForm.value.Departmentid">
                                    {{ item.text }} <mat-icon (click)="removeDepartment(item)">close</mat-icon>
                                </mat-chip>
                            </mat-chip-list>

                        </div>
                    </form>
                </mat-card>
            </div>
        </div>

    </form>


    <div class="row row-container" style="width: 100%;">
        <div class="sales-radio-buttons gap-8" fxLayout="row" fxLayoutAlign="space-between center">

            <form [formGroup]="myForm">
                <div class="sales-radio-buttons gap-2" fxLayout="row">
                    <!-- <mat-slide-toggle name="IsConsultant" formControlName="IsConsultant"
                        [(ngModel)]="registerObj.IsConsultant">
                        IsConsultant
                    </mat-slide-toggle>
    
                    <mat-slide-toggle name="IsRefDoc" formControlName="IsRefDoc" [(ngModel)]="registerObj.IsRefDoc">
                        IsRefDoctor
                    </mat-slide-toggle>
                    <mat-checkbox aria-label="Is Active" formControlName="isActive" (checked)=true
                        [(ngModel)]="registerObj.IsActive" style="font-weight: bold;">
                        IsActive
                    </mat-checkbox> -->
                </div>
            </form>

            <div class="sales-footer-buttons gap-8" fxLayout="row">
                <button class="btn btn-danger-outline" (click)="onClose()">Close</button>
                <button class="btn btn-primary" color="accent" (click)="onSubmit()" #savebutton>
                    <span>Save</span>
                </button>
            </div>
        </div>
    </div>

</mat-card>