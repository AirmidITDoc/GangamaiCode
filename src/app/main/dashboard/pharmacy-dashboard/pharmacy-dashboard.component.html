<div class="dashboard-project" class="page-layout simple right-sidebar" fxLayout="row">

    <!-- CENTER -->
    <div class="center" fusePerfectScrollbar>
        <div class="header h-100 accent pb-0 p-12" fxLayout="row"  fxFlex="100%" fxLayoutAlign="space-between start">

            <div fxLayout="row" fxLayoutAlign="space-between center">
                <button mat-icon-button class="sidebar-toggle mr-12" style="color: white;">
                    <mat-icon>menu</mat-icon>
                </button>

                <span class="mat-display-1 my-0 my-sm-12 welcome-message"
                    [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}" style="color: white;">
                    Pharmacy Dashboard
                </span>
            </div>
            <mat-card class="h-80  p-2" fxLayout="row" fxFlex="260px" style=" color: black;">

                <form [formGroup]="_DashboardService.UseFrom">
                    <mat-form-field appearance="outline" class="p-2.5" fxFlex="240px">
                        <mat-label style="color: black;">Enter a date range</mat-label>
                        <mat-date-range-input [rangePicker]="picker">
                            <input matStartDate formControlName="start" style="color: black;" placeholder="Start date">
                            <input matEndDate formControlName="end" placeholder="End date" style="color: black;"
                                (dateChange)="getPharDashboardSalesSummary()" (dateChange)="fetchChartData()">
                        </mat-date-range-input>
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-date-range-picker #picker></mat-date-range-picker>
                    </mat-form-field>
                </form>
            </mat-card>


        </div>
        <!-- <div fxLayout="row"  >
        <mat-toolbar class="accent" style="height:100px; justify-content: space-between;width: 100%;">
            <div fxLayout="row" fxLayoutAlign="start center">
                <button mat-icon-button class="sidebar-toggle mr-12" style="color: white;">
                    <mat-icon>menu</mat-icon>
                </button>

                <span class="mat-display-1 my-0 my-sm-12 welcome-message"
                    [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}" style="color: white;">
                    Pharmacy Dashboard
                </span>
            </div>

            <mat-card style="width: 16.5%; height: 75px;padding: 5px;color: black;">
                <mat-form-field appearance="outline" style="width:98%;height: 30px;margin: 5px;">
                    <input type="text" name="ItemID" formControlName="ItemID" placeholder=" Start Typing Here to Search"
                        style="color: white;" matInput required>
                    <span matSuffix style="display: flex;">
                        <mat-icon class="mat-icon-close">close</mat-icon>
                        <mat-icon class="mat-icon-close">search</mat-icon>
                    </span>
                </mat-form-field>
                <form [formGroup]="_DashboardService.UseFrom">
                    <mat-form-field appearance="outline" style="padding: 5px;">
                        <mat-label style="color: black;">Enter a date range</mat-label>
                        <mat-date-range-input [rangePicker]="picker">
                            <input matStartDate formControlName="start"  style="color: black;"
                                placeholder="Start date" >
                            <input matEndDate formControlName="end" placeholder="End date"
                            style="color: black;"  (dateChange)="getPharDashboardSalesSummary()"  (dateChange)="fetchChartData()">
                        </mat-date-range-input>
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-date-range-picker #picker></mat-date-range-picker>
                    </mat-form-field>
                </form>
            </mat-card>

        </mat-toolbar>
    </div> -->


        <div class="dashboard-container pl-60 mt-20 pr-40" fxLayout="row wrap" fxLayoutGap="50px grid">
            <div fxFlex="40%" fxFlex.xs="100%" fxFlex.sm="33%">

                <mat-card class="h-460">
                    <div fxLayout="row" fxLayoutAlign="space-between">
                        <div matColumnDef="loading" diameter="30" fxFlex="96%" style="height: 430px;"
                            [ngClass]="{'hide': !(sIsLoading == 'loading-data')}" class="backgroundBlur">
                            <div class="spinner-border text-danger" style="margin-left: 250px;"></div>

                        </div>
                        <table class="table1" fxFlex="100%" style="border-collapse: collapse;">
                            <tbody>
                                <tr style="font-size:12px;">
                                    <td colspan="4"
                                        style="background-color: rgb(37, 174, 192); font-weight:bold;text-align:left;padding:10px;font-size: 18px;color: white;">
                                        Statistics</td>
                                </tr>
                                <tr style="font-size:12px;">
                                    <td colspan="2"
                                        style="font-weight:bold;text-align:left;padding:10px;font-size: 16px;">
                                        Collection</td>
                                    <td colspan="2"
                                        style="font-weight:bold;text-align:left;padding:10px;font-size: 16px;padding-left: 20px;">
                                        {{getTotalCollectionAmt(dsPharmacyDashboard.data) | currency:'INR'}}</td>
                                </tr>
                                <tr style="font-size:12px;">
                                    <td colspan="2"
                                        style="font-weight:bold;text-align:left;padding:10px;font-size: 16px;">
                                        Refund</td>
                                    <td colspan="2"
                                        style="font-weight:bold;text-align:left;padding:10px;font-size: 16px;padding-left: 20px;">
                                        {{getTotalRefunAmt(dsPharmacyDashboard.data) | currency:'INR'}}</td>
                                </tr>
                                <tr style="font-size:12px; background-color:#2a6392;color: white;">
                                    <td colspan="2"
                                        style="font-weight:bold;text-align:left;padding:10px;font-size: 16px;">
                                        Net</td>
                                    <td colspan="2"
                                        style="font-weight:bold;text-align:left;padding:10px;font-size: 16px;">
                                        {{getTotalNetAmt(dsPharmacyDashboard.data) | currency:'INR' }}</td>
                                </tr>
                                <tr style="font-size:12px;">
                                    <td colspan="4" style="background-color: white;text-align:left;padding:10px;">
                                    </td>
                                </tr>
                                <tr style="font-size:12px;background-color:#2a6392;color: white;font-size: 15px;">
                                    <td style="font-weight:bold;text-align:left;padding:10px;">
                                        StoreName</td>
                                    <td style="font-weight:bold;text-align:left;padding:10px;">
                                        Collection Amount</td>
                                    <td style="font-weight:bold;text-align:left;padding:10px;">
                                        Refund Amount</td>
                                    <td style="font-weight:bold;text-align:left;padding:10px;">
                                        Net Amount</td>
                                </tr><br>
                                <tr *ngFor="let item of PharmacyDashboard; let indx = index;" style="font-size:13px;
                                border: 1px solid black;">

                                    <td style="padding: 10px;background-color: lightgray;
                                    text-align: left;color: black;" class="StoreName">{{item?.StoreName}}</td>
                                    <td style="padding: 10px;background-color: lightgray;
                                    text-align: right;color: black;">{{item?.CollectionAmount | number:'1.2-2' }}</td>
                                    <td style="padding: 10px;background-color: lightgray;
                                    text-align: right;color: black;">{{item?.RefundAmount | number:'1.2-2'}}</td>
                                    <td style="padding: 10px;background-color: lightgray;
                                    text-align: right;color: black;">{{item?.NetAmount | number:'1.2-2'}}</td>
                                </tr><br>


                            </tbody>
                        </table>
                    </div>
                </mat-card>
            </div>

            <div fxFlex="50%" fxFlex.xs="100%" fxFlex.sm="33%">
                <mat-card class="h-460">
                    <div fxLayout="column" fxLayoutAlign="space-between">
                        <div class="pt-10" fxLayout="row" fxLayoutAlign="space-between center">
                            <span style="font-size: 30px; font-weight:400px;">Stores

                                <mat-icon style="color: gray;">circle_information</mat-icon></span>

                        </div>

                        <div>
                            <div matColumnDef="loading" diameter="30" fxFlex="348px" style="height: 349px; border-radius: 600px;
                                margin-top: 35px; margin-left: 210px;"
                                [ngClass]="{'hide': !(sIsLoading == 'loading-data')}" class="backgroundBlur">
                                <div style="margin-left:130px;" class="spinner-border text-danger ml-130"></div>

                            </div>
                            <div fxFlex="100%" fxLayoutAlign="space-between center">
                                <canvas id="doughnutChart"></canvas>
                            </div>
                        </div>
                        <!-- <div style="display: block ;  width: 560px; height: 500px; ">
                                    <canvas baseChart [data]="pieChartData1" [chartType]="pieChartType1"
                                        [labels]="pieChartLabels1" [options]="pieChartOptions1"></canvas>
                                </div> -->

                        <!-- <div style="margin-left: 5px;" fxLayout="column">
                                    <span style="font-size: 15px;font-weight:100px;color: gray;margin-top: 6px;">Total
                                        Net Amount</span>
                                    <span style="font-weight: bold;font-size: 22px;margin-top:6px">
                                        {{getTotalNetAmt(dsPharmacyDashboard.data) | currency:'INR' }}
                                    </span>
                                    
                                    <span style="font-size: 15px;font-weight:100px;color: gray;margin-top: 6px;">Total
                                        Collection</span>
                                    <span style="font-weight: bold;font-size: 22px;margin-top: 6px;">
                                        {{getTotalCollectionAmt(dsPharmacyDashboard.data) | currency:'INR'}}
                                    </span>
                                
                               
                                    <span style="font-size: 15px;font-weight:100px;color: gray;margin-top: 6px;">Total
                                        Refund</span>
                                    <span style="font-weight: bold;font-size: 22px;margin-top: 6px;">
                                        {{getTotalRefunAmt(dsPharmacyDashboard.data) | currency:'INR'}}
                                    </span>
                                
                                </div> -->

                    </div>
                </mat-card>
            </div>



        </div>

        <div class="dashboard-container pl-60 mt-20 pr-40" fxLayout="row wrap" fxLayoutGap="30px grid">
            <div fxFlex="35%" fxFlex.xs="100%" fxFlex.sm="33%">

                <mat-card class="h-340 p-10">
                    <div class="p-5">
                        <div fxLayout="row" fxLayoutAlign="space-between start">
                            <span style="font-size: 30px; font-weight:400px;">Net
                                Sales
                                <mat-icon style="color: gray;">circle_information</mat-icon></span>
                            <span style="font-size: 20px; font-weight: bold;color: rgb(22, 239, 167);">
                                <mat-icon>carrow_upward</mat-icon>11.3%</span>
                        </div>
                    </div>


                    <div fxLayout="row" fxLayoutAlign="space-between">
                        <span style="margin-top: 10px;font-weight: bold;font-size: 25px;">
                            <mat-icon style="font-weight: bold;">&#8377;</mat-icon>{{Totalamount }}
                            <span style="margin-top:10px;font-size: 15px;font-weight:200px;color: gray;">from
                                <mat-icon
                                    style="font-size: 15px;margin-left: 5px;color: gray;">&#8377;</mat-icon>{{GrossAmount}}
                            </span>
                        </span>

                    </div>

                    <div fxLayout="row" fxLayoutAlign="space-between start" style="height: 100px;">
                        <canvas baseChart [datasets]="chartData" [labels]="chartLabels" [options]="chartOptions"
                            [chartType]="'line'">
                        </canvas>
                    </div>

                </mat-card>
            </div>

            <div fxFlex="22%" fxFlex.xs="100%" fxFlex.sm="33%">
                <mat-card class="h-340 p-10">
                    <div fxLayout="row" fxLayoutAlign="space-between start">
                        <span style="font-size: 30px; font-weight:400px;">Stock
                            Value<mat-icon style="color: gray;">circle_information</mat-icon>
                        </span><br><br>

                    </div>
                    <div fxLayout="column" fxLayoutAlign="space-between start">
                        <span style="font-size: 15px;font-weight:200px;color: gray;">
                            Purcjase Rate (excl gst) </span>
                        <span style="font-weight: bold;font-size: 18px;">
                            <mat-icon style="font-weight: bold;">&#8377;</mat-icon>{{Totalamount}}
                        </span>
                    </div> <br>


                    <div fxLayout="column" fxLayoutAlign="space-between end" style="color: gray;">
                        <span style="font-size: 15px;font-weight:200px;">MRP (incl gst) </span>
                        <span style="font-weight:200px;font-size: 18px;">
                            <mat-icon style="font-weight:200px;">&#8377;</mat-icon>{{Totalamount}}
                        </span><br>

                        <span style="font-size: 15px;font-weight:200px;">Sale Rate (incl gst) </span>
                        <span style="font-weight:200px;font-size: 18px;">
                            <mat-icon style="font-weight:200px;">&#8377;</mat-icon>{{Totalamount}}
                        </span>

                    </div>
                </mat-card>
            </div>

            <div fxFlex="35%" fxFlex.xs="100%" fxFlex.sm="33%">
                <mat-card class="h-340 p-10">
                    <div fxLayout="row" fxLayoutAlign="space-between start">
                        <span style="font-size: 30px; font-weight:400px;">Customers

                            <mat-icon style="color: gray;">circle_information</mat-icon></span>
                        <span style="font-size: 20px; font-weight: bold;color: rgb(22, 239, 167);">
                            <mat-icon>carrow_upward</mat-icon>11.3%</span>
                    </div>

                    <div fxLayout="row" fxLayoutAlign="space-between start" style="padding: 8px;">
                        <div fxLayout="column" fxLayoutAlign="space-between start">
                            <span style="font-size: 15px;font-weight:100px;color: gray;">Total
                                Customers</span>
                            <span style="font-weight: bold;font-size: 25px;">
                                {{TotalCustomers}}
                            </span>
                        </div>
                        <div fxLayout="column" fxLayoutAlign="space-between end">
                            <span style="font-size: 15px;font-weight:100px;color: gray;">Avg Order
                                Value</span>
                            <span style="font-size: 25px;font-weight:bold;">
                                <mat-icon
                                    style="font-size: 25px;font-weight: bold;">&#8377;</mat-icon>{{AverageOrderValue}}
                            </span>
                        </div>
                    </div>

                    <div fxLayout="row" fxLayoutAlign="space-between">

                        <div fxFlex="90%">
                            <canvas baseChart [data]="pieChartData" [chartType]="pieChartType" [labels]="pieChartLabels"
                                [options]="pieChartOptions"></canvas>
                        </div>

                    </div>

                </mat-card>
            </div>
        </div>

        <div class="dashboard-container pl-60 mt-20 pr-40" fxLayout="row wrap" fxLayoutGap="30px grid">
            <div fxFlex="35%" fxFlex.xs="100%" fxFlex.sm="33%">
                <mat-card class="h-340 p-8">
                    <div fxLayout="row" fxLayoutAlign="space-between">
                        <span style="font-size: 30px; font-weight:400px;">Net Purchase
                            <mat-icon style="color: gray;">circle_information</mat-icon></span>
                        <span style="font-size: 20px; font-weight: bold;color: rgb(22, 239, 167);">
                            <mat-icon>carrow_downward</mat-icon>11.3%</span>
                    </div>


                    <div fxLayout="column" fxLayoutAlign="space-between start">
                        <span style="margin-top: 10px;font-weight: bold;font-size: 25px;">
                            <mat-icon style="font-weight: bold;">&#8377;</mat-icon>{{Totalamount}}
                            <span style="font-size: 15px;font-weight:200px;color: gray;">from
                                <mat-icon style="font-size: 15px;margin-left: 5px;">&#8377;</mat-icon>{{GrossAmount}}
                            </span>
                        </span>

                    </div>

                    <div fxLayout="row" fxLayoutAlign="space-between start">
                        <canvas baseChart [datasets]="chartData1" [labels]="chartLabels1" [options]="chartOptions1"
                            [chartType]="'line'">
                        </canvas>
                    </div>

                </mat-card>
            </div>

            <div fxFlex="57%" fxFlex.xs="100%" fxFlex.sm="33%">
                <mat-card class="h-340 p-10">

                    <div fxLayout="row" fxLayoutAlign="space-between start">
                        <span style="font-size: 30px; font-weight:400px;">Cash-In-Hand
                            <mat-icon style="color: gray;">circle_information</mat-icon></span>

                        <span style="font-size:22px; font-weight:bold;color: rgb(245, 78, 134);">Add
                            Opening Balance</span>
                        <span style="font-size: 20px; font-weight: bold;color: rgb(22, 239, 167);">
                            <mat-icon>carrow_downward</mat-icon>11.3%</span>
                    </div>

                    <div fxLayout="row" fxLayoutAlign="space-between start" style="margin-top: 10px;margin-left: 10px;">
                        <span style="font-weight: bold;font-size: 25px;">
                            <mat-icon style="font-weight: bold;">&#8377;</mat-icon>{{Totalamount}}
                            <span style="font-size: 15px;font-weight:200px;color: gray;">from
                                <mat-icon style="font-size: 15px;">&#8377;</mat-icon>{{GrossAmount}}
                            </span>
                        </span>

                        <div fxLayout="column" fxLayoutAlign="space-between end">
                            {{progressValue}}
                            <span><mat-progress-bar mode="determinate" value="75"
                                    fxFlex="200px"></mat-progress-bar></span>
                            <span style="font-weight: 100px;font-size: 18px;color: gray;margin-top:10px;">
                                CASH <mat-icon style="font-size: 15px;">&#8377;</mat-icon>{{Cash}}</span>
                        </div>
                    </div>

                    <div fxLayout="row" fxLayoutAlign="space-between start" style="margin-top: 10px;">
                        <div>
                        <span style="font-weight: 200px;font-size: 18px;color: gray;">
                            Total Payment In</span><br>
                        <span style="font-size: 15px;font-weight:200px;">
                            <mat-icon style="font-size: 15px;">&#8377;</mat-icon>{{Totalamount}}
                        </span>
                    </div>

                        <div fxLayout="column" fxLayoutAlign="space-between end">
                            {{progressValue1}}
                            <span> <mat-progress-bar mode="determinate" value="40"
                                    fxFlex="200px"></mat-progress-bar></span>

                            <span style="font-weight: 100px;font-size: 18px;color: gray;margin-top:10px;">
                                ONLINE <mat-icon
                                    style="font-size: 15px;margin-left: 5px;">&#8377;</mat-icon>{{Online}}</span>
                        </div>
                    </div>

                    <div fxLayout="row" fxLayoutAlign="space-between start" style="margin-top: 10px;">
                        <div fxLayout="column" style="margin-right: 10px;">
                            <span style="font-weight: 100px;font-size: 18px;color: gray;">
                                Total Payment Out</span>
                            <span style="margin-top:6px;;font-size: 15px;font-weight:100px;">
                                <mat-icon style="font-size: 15px;margin-left: 5px; ">&#8377;</mat-icon>{{Totalamount}}
                            </span>
                        </div>

                        <div class="vertical-line"></div>

                        <div fxLayout="column" fxLayoutAlign="space-between start">
                            <span style="font-weight: 100px;font-size: 18px;color: gray;">
                                Expenses (excl gst)</span>
                            <span style="margin-top:6px;;font-size: 15px;font-weight:bold;">
                                <mat-icon style="font-size: 15px;margin-left: 5px;">&#8377;</mat-icon>{{Totalamount}}
                            </span>
                        </div>

                        <div fxLayout="column" fxLayoutAlign="space-between end">
                                {{progressValue2}}
                              <span> <mat-progress-bar mode="determinate" value="12" fxFlex="200px"></mat-progress-bar></span> 
                            
                            <span style="font-weight: 100px;font-size: 18px;color: gray;margin-top: 10px;">
                                CHEQUE <mat-icon
                                    style="font-size: 15px;margin-left: 5px;">&#8377;</mat-icon>{{Cheque}}</span>
                        </div>
                    </div>
            


            <!-- <div fxLayout="row" fxLayoutAlign="space-between start" style="margin-top: 25px;">

                        <span style="font-weight: bold;font-size: 25px;">
                            <mat-icon style="font-weight: bold;">&#8377;</mat-icon>{{Totalamount}}
                            <span style="font-size: 15px;font-weight:200px;color: gray;">from
                                <mat-icon style="font-size: 15px;margin-left: 5px;">&#8377;</mat-icon>{{GrossAmount}}
                            </span>
                        </span>
                        

                        <div fxLayout="column" fxLayoutAlign="space-between end">
                            <div fxLayout="row" fxLayoutAlign="space-between end">
                                {{progressValue}}
                                <mat-progress-bar mode="determinate" value="75" fxFlex="200px"></mat-progress-bar>
                            </div>
                            <span style="font-weight: 100px;font-size: 18px;color: gray;margin-top:10px;">
                                CASH <mat-icon style="font-size: 15px;">&#8377;</mat-icon>{{Cash}}</span>

                        </div>
                    </div> -->



            <!-- <div fxLayout="row" fxLayoutAlign="space-between start" style="margin-top: 20px;">
                        <div fxLayout="column" fxLayoutAlign="space-between start">
                            <span style="font-weight: 200px;font-size: 18px;color: gray;">
                                Total Payment In</span>
                            <span style="font-size: 15px;font-weight:200px;">
                                <mat-icon style="font-size: 15px;">&#8377;</mat-icon>{{Totalamount}}
                            </span>

                        </div>

                        <div fxLayout="column" fxLayoutAlign="space-between end">
                            <div fxLayout="row" fxLayoutAlign="space-between start">
                                {{progressValue1}} <mat-progress-bar mode="determinate" value="40"
                                    fxFlex="50%"></mat-progress-bar>
                            </div>
                            <span style="font-weight: 100px;font-size: 18px;color: gray;margin-top:10px;">
                                ONLINE <mat-icon
                                    style="font-size: 15px;margin-left: 5px;">&#8377;</mat-icon>{{Online}}</span>
                        </div>
                    </div> -->


            <!-- <div fxLayout="row" fxLayoutAlign="space-between start" style="margin-top: 20px;">
                        <div fxLayout="column" style="margin-right: 10px;">
                            <span style="font-weight: 100px;font-size: 18px;color: gray;">
                                Total Payment Out</span>
                            <span style="margin-top:10px;;font-size: 15px;font-weight:100px;">
                                <mat-icon style="font-size: 15px;margin-left: 5px; ">&#8377;</mat-icon>{{Totalamount}}
                            </span>
                        </div>

                        <div class="vertical-line"></div>

                        <div fxLayout="column" fxLayoutAlign="space-between start">
                            <span style="font-weight: 100px;font-size: 18px;color: gray;">
                                Expenses (excl gst)</span>
                            <span style="margin-top:10px;;font-size: 15px;font-weight:bold;">
                                <mat-icon style="font-size: 15px;margin-left: 5px;">&#8377;</mat-icon>{{Totalamount}}
                            </span>
                        </div>

                        <div fxLayout="column" fxLayoutAlign="space-between end">
                            <div fxLayout="row" fxLayoutAlign="space-between">
                                {{progressValue2}}
                                <mat-progress-bar mode="determinate" value="12" fxFlex="50%"></mat-progress-bar>
                            </div>
                            <span style="font-weight: 100px;font-size: 18px;color: gray;margin-top: 10px;">
                                CHEQUE <mat-icon
                                    style="font-size: 15px;margin-left: 5px;">&#8377;</mat-icon>{{Cheque}}</span>
                        </div>
                    </div> -->

            </mat-card>

        </div>
    </div>



</div>




</div>