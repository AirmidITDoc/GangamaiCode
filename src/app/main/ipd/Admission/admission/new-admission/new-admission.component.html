<div class="modal-wrapper grid-container">
  <!-- Modal header -->
  <div class="modal-header accent">
    <div class="modal-header-content">
      <div class="modal-header-title">
        <button mat-icon-button class="logo-icon mr-16" [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}"
          style="color: white;">
          <mat-icon>account_box</mat-icon>
        </button>
        <span [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}">New Admission</span>
      </div>
      <div class="modal-header-right">
        <div class="comman-date-container">
          <div class="comman-date">
            <app-common-date [screenFrom]="screenFromString"
              (dateTimeEventEmitter)="getDateTime($event)"></app-common-date>
          </div>
          <div class="close-icon">
            <button mat-icon-button tabIndex="-1" [mat-dialog-close]="true" aria-label="Close dialog"
              matTooltip="Close">
              <mat-icon>close</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-body" fusePerfectScrollbar>
    <div class="modal-body-container">
      <form [formGroup]="searchFormGroup">
        <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="5px" fxLayoutAlign="space-between center"
          style="padding: 0 16px;">
          <div class="radio-container">
            <mat-radio-group aria-label="Select an option" formControlName="regRadio" name="regRadio"
              (change)="onChangeReg($event)">
              <mat-radio-button value="registration">New Registration </mat-radio-button>
              <mat-radio-button value="registrered">Registered</mat-radio-button>
            </mat-radio-group>
          </div>
          <div class="select-container" fxLayout="row" fxLayout.lt-sm="column" class="gap-8">
            <!-- getSelectedObj -->
            <!-- <mat-form-field appearance="outline" *ngIf="Regflag">
              <input type="text" name="RegId" formControlName="RegId"
                placeholder="RegNo / First Name / Last Name / Mobile No" matInput #regno [matAutocomplete]="auto"
                (input)="getSearchList()">
              <span matSuffix style="display: flex;">
                <mat-icon class="mat-icon-close"
                  (click)="searchFormGroup.get('RegId').setValue(''); isRegIdSelected = false;">close</mat-icon>
                <mat-icon class="mat-icon-close"
                  (click)="searchFormGroup.get('RegId').setValue(''); isRegIdSelected = false;">search</mat-icon>
              </span>
              <mat-autocomplete #auto="matAutocomplete" [displayWith]="getOptionText"
                (optionSelected)='chekAdmittedpatient($event.option.value)'>
                <mat-option *ngFor="let option of filteredOptions" [value]="option">
                  {{option.FirstName}} {{option.MiddleName}} {{option.LastName}} |
                  {{option.RegNo}} |
                  {{option.MobileNo}}
                </mat-option>
              </mat-autocomplete>
              <mat-error *ngIf="searchFormGroup.get('RegId').hasError('required')">
                Required field cannot be left blank
              </mat-error>
            </mat-form-field> -->


            <airmid-autocomplete label="HospitalId" formControlName="HospitalId" [formGroup]="searchFormGroup"
              [validations]="getValidationMessages().HospitalId" [mode]="autocompleteModehospital">
            </airmid-autocomplete>

            <div class="common-date">
              <app-common-date [screenFrom]="screenFromString" style="float:right"
                (dateTimeEventEmitter)="getDateTime($event)"></app-common-date>
            </div>
          </div>
        </div>
      </form>
      <form [formGroup]="personalFormGroup" class="mat-form-field-100">
        <input type="hidden" name="RegId" formControlName="RegId" [(ngModel)]="registerObj.regId">


        <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="12px grid">

          <div fxFlex="99%" fxFlex.xs="100%" fxFlex.sm="90%" fxLayout="row wrap" fxLayoutGap="4px grid">

            <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">

              <airmid-autocomplete label="Prefix" formControlName="PrefixId" [formGroup]="personalFormGroup"
                [value]="registerObj?.PrefixId" [validations]="getValidationMessages().prefixId" ValueField="prefixId"
                TextField="prefixName" (selectionChange)="onChangePrefix($event)" ApiUrl="Prefix/get-prefixs">
              </airmid-autocomplete>
            </div>

            <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
              <airmid-textbox label="First Name" formControlName="FirstName" [value]="registerObj.FirstName"
                [formGroup]="personalFormGroup" [validations]="getValidationMessages().firstName" [maxLength]="50">
              </airmid-textbox>
            </div>

            <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
              <airmid-textbox label="Middle Name" formControlName="MiddleName" [value]="registerObj.MiddleName"
                [formGroup]="personalFormGroup" [validations]="getValidationMessages().middleName" [maxLength]="50">
              </airmid-textbox>

            </div>

            <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
              <airmid-textbox label="Last Name" formControlName="LastName" [value]="registerObj.LastName"
                [formGroup]="personalFormGroup" [validations]="getValidationMessages().lastName" [maxLength]="50">
              </airmid-textbox>
            </div>

            <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
              <airmid-autocomplete label="Gender" formControlName="GenderID" [formGroup]="personalFormGroup"
                [value]="registerObj?.GenderId" [validations]="getValidationMessages().genderId" #ddlGender
                [disabled]="true" [mode]="autocompleteModegender">
              </airmid-autocomplete>
            </div>

            <div fxFlex="75%" fxFlex.xs="100%" fxFlex.sm="33%">
              <app-airmid-dateofbirth [formGroup]="personalFormGroup" formControlName="DateofBirth"
                [(value)]="registerObj.DateofBirth"></app-airmid-dateofbirth>

            </div>


            <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">

              <airmid-textbox label="Aadharcardno" formControlName="aadharCardNo" [value]="registerObj.AadharCardNo"
                [formGroup]="personalFormGroup" [maxLength]="12" [validations]="getValidationMessages().aadharCardNo">
              </airmid-textbox>
            </div>

            <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
              <airmid-textbox label="Address" formControlName="Address" [value]="registerObj.Address"
                [formGroup]="personalFormGroup" [validations]="getValidationMessages().address">
              </airmid-textbox>
            </div>

            <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
              <airmid-autocomplete label="Area" formControlName="AreaId" [value]="registerObj?.AreaId"
                [formGroup]="personalFormGroup" [validations]="getValidationMessages().areaId"
                [mode]="autocompleteModearea">
              </airmid-autocomplete>
            </div>

            <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
              <airmid-autocomplete label="City" formControlName="CityId" [formGroup]="personalFormGroup"
                [value]="registerObj?.CityId" [validations]="getValidationMessages().cityId" ValueField="cityId"
                TextField="cityName" (selectionChange)="onChangecity($event)" ApiUrl="CityMaster/get-cities">
              </airmid-autocomplete>
            </div>

            <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
              <airmid-autocomplete label="State" formControlName="StateId" [value]="registerObj?.StateId"
                [formGroup]="personalFormGroup" [disabled]="true" [validations]="getValidationMessages().stateId"
                #ddlState [mode]="autocompleteModestate">
              </airmid-autocomplete>
            </div>

            <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
              <airmid-autocomplete label="Country" formControlName="CountryId" [value]="registerObj?.CountryId"
                [formGroup]="personalFormGroup" [disabled]="true" [validations]="getValidationMessages().countryId"
                #ddlCountry [mode]="autocompleteModecountry">
              </airmid-autocomplete>
            </div>

            <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
              <airmid-autocomplete label="MaritalStatus" formControlName="MaritalStatusId"
                [value]="registerObj?.MaritalStatusId" [formGroup]="personalFormGroup"
                [validations]="getValidationMessages().maritalStatusId" [mode]="autocompleteModemstatus">
              </airmid-autocomplete>
            </div>

            <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
              <airmid-autocomplete label="Religion Name" formControlName="ReligionId" [value]="registerObj?.ReligionId"
                [formGroup]="personalFormGroup" [validations]="getValidationMessages().religionId"
                [mode]="autocompleteModereligion">
              </airmid-autocomplete>
            </div>

            <div fxFlex="25%" fxFlex.xs="100%" fxFlex.sm="33%">
              <div fxLayout="row" class="gap-8">

                <airmid-textbox fxFlex="50%" fxFlex.xs="100%" fxFlex.sm="50%" label="MobileNo"
                  formControlName="MobileNo" [value]="registerObj.MobileNo" [formGroup]="personalFormGroup"
                  [validations]="getValidationMessages().mobileNo" [maxLength]="10">
                </airmid-textbox>

                <airmid-textbox fxFlex="50%" fxFlex.xs="100%" fxFlex.sm="50%" label="PhoneNo" formControlName="PhoneNo"
                  [validations]="getValidationMessages().PhoneNo" [value]="registerObj.PhoneNo"
                  [formGroup]="personalFormGroup" [maxLength]="10">
                </airmid-textbox>

              </div>
            </div>


          </div>

        </div>
      </form>
      <br>
      <form [formGroup]="admissionFormGroup" fxLayout="column" style="padding: 0 20px;">
        <div fxLayout="row" fxLayout.gt-xs="row" fxLayoutGap="4px"
          class="top-header accent heading-container h-40 border-radius-4">
          <span style="font-size:15px;font-weight: bolder; color:white;padding:7px;">Hospital
            Details</span>
        </div>
        <mat-card>
          <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="12px grid" style="padding: 10px 0;">

            <div fxFlex="22%" fxFlex.xs="100%" fxFlex.sm="33%">

              <airmid-autocomplete label="PatientType" formControlName="PatientTypeId"
                [value]="registerObj?.patientTypeId" [formGroup]="admissionFormGroup"
                [validations]="getValidationMessages().PatientTypeId" [mode]="autocompleteModepatienttype">
              </airmid-autocomplete>
            </div>

            <div fxFlex="22%" fxFlex.xs="100%" fxFlex.sm="33%">

              <airmid-autocomplete label="Tariff Name" formControlName="TariffId" [value]="registerObj?.TariffId"
                [formGroup]="admissionFormGroup" [validations]="getValidationMessages().TariffId"
                [mode]="autocompleteModetariff">
              </airmid-autocomplete>
            </div>

            <div fxFlex="22%" fxFlex.xs="100%" fxFlex.sm="33%">

              <airmid-autocomplete label="Department Name" formControlName="DepartmentId"
                [value]="registerObj?.DepartmentId" [formGroup]="admissionFormGroup"
                [validations]="getValidationMessages().DepartmentId" [mode]="autocompleteModeDepartment">
              </airmid-autocomplete>
            </div>

            <div fxFlex="22%" fxFlex.xs="100%" fxFlex.sm="33%">

              <airmid-autocomplete label="Doctor Name " formControlName="DocNameId" [value]="registerObj?.DocNameId"
                [formGroup]="admissionFormGroup" [validations]="getValidationMessages().DocNameId"
                [mode]="autocompleteModeDoctor">
              </airmid-autocomplete>
            </div>


            <airmid-autocomplete label="AdmittedDoctor1" formControlName="AdmittedDoctor1"
              [value]="registerObj?.AdmittedDoctor1" [formGroup]="admissionFormGroup"
              [validations]="getValidationMessages().AdmittedDoctor1" [mode]="autocompleteModeDoctor">
            </airmid-autocomplete>

            <airmid-autocomplete label="AdmittedDoctor2" formControlName="AdmittedDoctor2"
              [value]="registerObj?.AdmittedDoctor2" [formGroup]="admissionFormGroup"
              [validations]="getValidationMessages().AdmittedDoctor2" [mode]="autocompleteModeDoctor">
            </airmid-autocomplete>

            <div fxFlex="22%" fxFlex.xs="100%" fxFlex.sm="33%">

              <airmid-autocomplete label="Ref.Doctor Name" formControlName="RefDocNameId"
                [value]="registerObj?.RefDocNameId" [formGroup]="admissionFormGroup"
                [validations]="getValidationMessages().RefDocNameId" [mode]="autocompleteModeRefDoctor">
              </airmid-autocomplete>
            </div>

            <ng-container *ngIf="isCompanySelected">

              <div fxFlex="22%" fxFlex.xs="100%" fxFlex.sm="33%">

                <airmid-autocomplete label="Company Name" formControlName="CompanyId" [value]="registerObj?.CompanyId"
                  [formGroup]="admissionFormGroup" [validations]="getValidationMessages().CompanyId"
                  [mode]="autocompleteModeCompany">
                </airmid-autocomplete>

              </div>

              <div fxFlex="22%" fxFlex.xs="100%" fxFlex.sm="33%">

                <airmid-autocomplete label="SubTpaCom" formControlName="SubTpaComId" [value]="registerObj?.SubTpaComId"
                  [formGroup]="admissionFormGroup" [validations]="getValidationMessages().SubTpaComId"
                  [mode]="autocompleteModeSubCompany">
                </airmid-autocomplete>

              </div>
            </ng-container>
          </div>
        </mat-card>
      </form>
      <br>
      <form [formGroup]="admissionFormGroup" fxLayout="column" style="padding: 0 20px;">
        <div fxLayout="row" fxLayout.gt-xs="row" fxLayoutGap="4px"
          class="top-header accent heading-container h-40 border-radius-4">
          <span style="font-size:15px; font-weight: bolder; color:white;padding:7px;">Ward
            Details </span>
        </div>
        <mat-card>
          <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="12px grid" style="padding: 10px 0;">

            <div fxFlex="22%" fxFlex.xs="100%" fxFlex.sm="33%">

              <airmid-autocomplete label="Ward Name" formControlName="wardId" [value]="registerObj?.RoomId"
                [formGroup]="admissionFormGroup" [validations]="getValidationMessages().wardId"
                [mode]="autocompleteModeWardName">
              </airmid-autocomplete>
            </div>

            <div fxFlex="22%" fxFlex.xs="100%" fxFlex.sm="33%">

              <airmid-autocomplete label="Bed Name" formControlName="bedId" [value]="registerObj?.BedId"
                [formGroup]="admissionFormGroup" [validations]="getValidationMessages().bedId"
                [mode]="autocompleteModeBedName">
              </airmid-autocomplete>
            </div>

            <div fxFlex="22%" fxFlex.xs="100%" fxFlex.sm="33%">

              <airmid-autocomplete label="Class Name" formControlName="ClassId" [value]="registerObj?.ClassId"
                [formGroup]="admissionFormGroup" [validations]="getValidationMessages().ClassId"
                [mode]="autocompleteModeClass">
              </airmid-autocomplete>
            </div>
          </div>
        </mat-card>
      </form>
      <br>
      <form [formGroup]="admissionFormGroup" fxLayout="column" style="padding: 0 20px;">
        <div fxLayout="row" fxLayout.gt-xs="row" fxLayoutGap="4px"
          class="top-header accent heading-container h-40 border-radius-4">
          <span style="font-size:15px; font-weight: bolder; color:white;padding:7px;">Other
            Details</span>
        </div>
        <mat-card>
          <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="12px grid" style="padding: 10px 0;">

            <airmid-textbox label="Relative Name" formControlName="RelativeName" [value]="registerObj.RelativeName"
              [formGroup]="admissionFormGroup" [validations]="getValidationMessages().RelativeName" [maxLength]="50">
            </airmid-textbox>

            <airmid-textbox label="RelativeAddress" formControlName="RelativeAddress"
              [value]="registerObj.RelativeAddress" [formGroup]="admissionFormGroup"
              [validations]="getValidationMessages().RelativeAddress" [maxLength]="50">
            </airmid-textbox>


            <airmid-textbox label="PhoneNo" formControlName="MobileNo" [value]="registerObj.PhoneNo"
              [formGroup]="admissionFormGroup" [validations]="getValidationMessages().RelatvieMobileNo" [maxLength]="50">
            </airmid-textbox>

            <div fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">

              <airmid-autocomplete label="Relationship" formControlName="RelationshipId"
                [value]="registerObj?.RelationshipId" [formGroup]="admissionFormGroup"
                [validations]="getValidationMessages().RelationshipId" [mode]="autocompleteModerelationship">
              </airmid-autocomplete>

            </div>

          </div>
        </mat-card>
        <br>
        <div class="footer-navigation-container mb-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
          <div class="checkbox-container">
            <mat-checkbox aria-label="Remember Me" formControlName="IsMLC">
              ISMLC
            </mat-checkbox>

            <mat-checkbox aria-label="Op TO Ip Change" formControlName="OPIPChange" style="margin-left:30px;">
              OP TO IP Convert
            </mat-checkbox>

            <mat-checkbox aria-label="Op TO Ip Change" formControlName="IsCharity" style="margin-left:30px;">
              IsCharity
            </mat-checkbox>
            <mat-checkbox aria-label="Op TO Ip Change" formControlName="IsSenior" style="margin-left:30px;">
              IsSeniorCitizen
            </mat-checkbox>

          </div>
          
          <div class="next-div button-row-group">
            <button class="btn btn-primary" color="accent" (click)="OnSaveAdmission()">
              <span>Save</span>
            </button>
            <button class="btn btn-danger-outline" (click)="onReset()">Reset</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>