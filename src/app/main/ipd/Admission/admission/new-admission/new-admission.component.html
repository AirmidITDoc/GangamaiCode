<div class="modal-wrapper grid-container">
  <!-- Modal header -->
  <div class="modal-header accent">
    <div class="modal-header-content">
      <div class="modal-header-title">
        <button mat-icon-button class="logo-icon mr-16" [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}"
        style="color: white;">
        <mat-icon>account_box</mat-icon>
       </button>
        <span [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}">New Admission</span>
      </div>
      <div class="modal-header-right">
        <div class="comman-date-container">
          <div class="comman-date">
            <app-common-date [screenFrom]="screenFromString"
              (dateTimeEventEmitter)="getDateTime($event)"></app-common-date>
          </div>
          <div class="close-icon">
            <button mat-icon-button tabIndex="-1" [mat-dialog-close]="true" aria-label="Close dialog"
              matTooltip="Close">
              <mat-icon>close</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-body" fusePerfectScrollbar>
    <div class="modal-body-container">
      <form [formGroup]="searchFormGroup">
        <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="5px"
            fxLayoutAlign="space-between center"  style="padding: 0 20px;">
            <div class="radio-container">
                <mat-radio-group aria-label="Select an option" formControlName="regRadio"
                    name="regRadio" (change)="onChangeReg($event)">
                    <mat-radio-button value="registration">New Registration </mat-radio-button>
                    <mat-radio-button value="registrered">Registered</mat-radio-button>
                </mat-radio-group>
            </div>
            <div class="select-container" fxLayout="row" fxLayout.lt-sm="column" class="gap-8">
                <!-- getSelectedObj -->
                <mat-form-field appearance="outline" *ngIf="Regflag">
                    <input type="text" name="RegId" formControlName="RegId"
                        placeholder="RegNo / First Name / Last Name / Mobile No" matInput #regno
                        [matAutocomplete]="auto" (input)="getSearchList()">
                    <span matSuffix style="display: flex;">
                        <mat-icon class="mat-icon-close"
                            (click)="searchFormGroup.get('RegId').setValue(''); isRegIdSelected = false;">close</mat-icon>
                        <mat-icon class="mat-icon-close"
                            (click)="searchFormGroup.get('RegId').setValue(''); isRegIdSelected = false;">search</mat-icon>
                    </span>
                    <mat-autocomplete #auto="matAutocomplete" [displayWith]="getOptionText"
                        (optionSelected)='chekAdmittedpatient($event.option.value)'>
                        <mat-option *ngFor="let option of filteredOptions" [value]="option">
                            {{option.FirstName}} {{option.MiddleName}} {{option.LastName}} |
                            {{option.RegNo}} |
                            {{option.MobileNo}}
                        </mat-option>
                    </mat-autocomplete>
                    <mat-error *ngIf="searchFormGroup.get('RegId').hasError('required')">
                        Required field cannot be left blank
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Hospital Name</mat-label>
                    <mat-select name="HospitalId" formControlName="HospitalId" required>
                        <mat-option></mat-option>
                        <mat-option *ngFor="let m of HospitalList" [value]="m">
                            {{m.HospitalName}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>

                <div class="common-date">
                    <app-common-date [screenFrom]="screenFromString" style="float:right"
                        (dateTimeEventEmitter)="getDateTime($event)"></app-common-date>
                </div>
            </div>
        </div>
    </form>
        <form [formGroup]="personalFormGroup" fxLayout="column" style="padding: 0 20px;">
        
          <div fxLayout="row" fxLayout.gt-xs="row" fxLayoutGap="4px"
            class="top-header accent heading-container h-40 border-radius-4">
            <span style="font-size:15px; font-weight: bolder; color:white;padding:7px;">Personal
              Details</span>
          </div>
          <mat-card>
            <div class="form-container mat-form-field-auto">
          
              <div fxLayout="row wrap" fxLayoutGap="12px grid">
          
                <div fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                  <mat-form-field appearance="outline" fxFlex>
                    <mat-label>Prefix</mat-label>
                    <input matAutocompletePosition="below" type="text" placeholder="Select Prefix" matInput
                      formControlName="PrefixID" [matAutocomplete]="autoPrefix" required (keydown)="onEnterprefix($event)">
                    <span matSuffix style="display: flex;">
                      <mat-icon class="mat-icon-close"
                        (click)="personalFormGroup.get('PrefixID').setValue(''); isPrefixSelected = false;">close</mat-icon>
                      <mat-icon class="mat-icon-close"
                        (click)="personalFormGroup.get('PrefixID').setValue(''); isPrefixSelected = false;">search</mat-icon>
                    </span>
                    <mat-autocomplete #autoPrefix="matAutocomplete" [displayWith]="getOptionTextDropdown">
                      <mat-option *ngFor="let option of filteredOptionsPrefix | async" [value]="option"
                        (onSelectionChange)="onChangeGenderList(option)">
                        {{option.text}}
                      </mat-option>
                    </mat-autocomplete>
                  </mat-form-field>
          
          
                  <!-- <mat-form-field appearance="outline" fxFlex>
                                        <mat-label>Prefix Name</mat-label>
                                        <mat-select formControlName="PrefixID" name="PrefixID" (selectionChange)="onChangeCountryList($event.value)">
                                          <mat-option></mat-option>
                                          <mat-option *ngFor="let m of PrefixList" [value]="m">
                                            {{m.text}}
                                          </mat-option>
                                        </mat-select>
                                      </mat-form-field> -->
                </div>
                  <!--  [(ngModel)]="registerObj.firstName" -->
                <div fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                  <mat-form-field appearance="outline" fxFlex>
                    <mat-label>First Name</mat-label>
                    <input name="FirstName" formControlName="FirstName" placeholder="First Name" matInput required type="text"
                      #fname (keydown)="onEnterfname($event)">
                    <mat-error *ngIf="personalFormGroup.get('FirstName').invalid && personalFormGroup.get('FirstName').touched">
                      First Name is required Enter only
                      Alphabets</mat-error>
                  </mat-form-field>
                </div>
            <!--  [(ngModel)]="registerObj.middleName" -->
                <div fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                  <mat-form-field appearance="outline" fxFlex>
                    <mat-label>Middle Name</mat-label>
                    <input name="MiddleName" formControlName="MiddleName" placeholder="Middle Name"
                      [ngClass]="{ 'is-invalid': submitted && personalFormGroup.get('MiddleName').errors }" matInput
                      type="text" #mname (keydown)="onEntermname($event)">
                    <mat-error class="error"
                      *ngIf="personalFormGroup.get('MiddleName').invalid && personalFormGroup.get('MiddleName').touched">
                      Middle Name is required
                      Enter
                      only Alphabets</mat-error>
                  </mat-form-field>
                </div>
            <!--   [(ngModel)]="registerObj.lastName"-->
                <div fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                  <mat-form-field appearance="outline" fxFlex>
                    <mat-label>Last Name</mat-label>
                    <input name="LastName" formControlName="LastName" placeholder="Last Name"
                      [ngClass]="{ 'is-invalid': submitted && personalFormGroup.get('LastName').errors }" matInput required
                      type="text" #lname (keydown)="onEnterlname($event)">
                    <mat-error class="error"
                      *ngIf="personalFormGroup.get('LastName').invalid && personalFormGroup.get('LastName').touched">Last
                      Name is required Enter
                      only
                      Alphabets</mat-error>
                  </mat-form-field>
                </div>
          
                <div fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                  <mat-form-field appearance="outline" fxFlex>
                    <mat-label>Gender</mat-label>
                    <mat-select formControlName="GenderId">
                      <mat-option></mat-option>
                      <mat-option *ngFor="let m of GenderList" [value]="m">
                        {{m.text}}
                      </mat-option>
                    </mat-select>
                    <mat-error *ngIf="personalFormGroup.get('GenderId').invalid && personalFormGroup.get('GenderId').touched">
                      <span *ngIf="personalFormGroup.get('GenderId').hasError('required')">
                        Gender is required</span>
                    </mat-error>
                  </mat-form-field>
                </div>
          
                <div fxFlex="20%" fxFlex.xs="100%">
                  <mat-button-toggle-group [(ngModel)]="dateStyle" (change)="OnChangeDobType($event)" aria-label="Font Style">
                    <mat-button-toggle value="Date">Date</mat-button-toggle>
                    <mat-button-toggle value="Day">Day</mat-button-toggle>
                    <mat-button-toggle value="Month">Month</mat-button-toggle>
                    <mat-button-toggle value="Year">Year</mat-button-toggle>
                  </mat-button-toggle-group>
                </div>
                <div fxLayout="row" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%"  *ngIf="dateStyle!='Date'">
                 
                    <mat-form-field appearance="outline" *ngIf="dateStyle=='Year'">
                      <mat-label>Age (Y)</mat-label>
                      <input placeholder="Age (Y)" matInput (keyup)="CalcDOB('Year',$event)"
                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,3);">
                    </mat-form-field>
                    <mat-form-field appearance="outline" *ngIf="dateStyle=='Month'">
                      <mat-label>Age (M)</mat-label>
                      <input placeholder="Age (M)" matInput (keyup)="CalcDOB('Month',$event)"
                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,2);">
                    </mat-form-field>
                    <mat-form-field appearance="outline" *ngIf="dateStyle=='Day'">
                      <mat-label>Age (D)</mat-label>
                      <input placeholder="Age (D)" matInput (keyup)="CalcDOB('Day',$event)"
                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,2);">
                    </mat-form-field>
                
                </div>
                <div fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%" *ngIf="dateStyle=='Date'"> 
                    <mat-form-field appearance="outline" fxFlex>
                      <input matInput [matDatepicker]="validFromPicker" formControllName="DateOfBirth" #bday
                        [value]="registerObj.DateofBirth" (keydown)="onEnterbday($event)" [disabled]="dateStyle!='Date'"
                        (dateChange)="onChangeDateofBirth($event.value)" placeholder="mm/dd/yyyy">
                      <mat-datepicker-toggle matSuffix [for]="validFromPicker"></mat-datepicker-toggle>
                      <mat-datepicker #validFromPicker></mat-datepicker>
                    </mat-form-field> 
                </div>
                <!-- age, month, dat -->
              
                  <div fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                  
                    <mat-form-field appearance="outline" fxFlex>
                      <mat-label>Age (Y)</mat-label>
                      <input name="AgeYear" formControlName="AgeYear" placeholder="Age (Y)" matInput [(ngModel)]="registerObj.AgeYear"
                        (ngModelChange)="registerObj.AgeYear = $event" required maxlength="3" #agey readonly
                        (keyup)="ageyearcheck(registerObj.AgeYear)" (keydown)="onEnteragey($event,registerObj.AgeYear)"
                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,3);">
                      <mat-error *ngIf="personalFormGroup.get('AgeYear').invalid && personalFormGroup.get('AgeYear').touched">Please
                        enter Age Year </mat-error>
                    </mat-form-field>
                  </div>
                  <div fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                    <mat-form-field appearance="outline" fxFlex>
                      <mat-label>Age (M)</mat-label>
                      <input name="AgeMonth" formControlName="AgeMonth" placeholder="Age (M)" matInput readonly
                        [(ngModel)]="registerObj.AgeMonth" (ngModelChange)="registerObj.AgeMonth = $event" type="number" maxlength="2"
                        #agem (keydown)="onEnteragem($event)"
                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,2);">
                      <mat-error *ngIf="personalFormGroup.get('AgeMonth').invalid && personalFormGroup.get('AgeMonth').touched">
                        Please enter Age Month </mat-error>
                    </mat-form-field>
                  </div>
                  <div fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                    <mat-form-field appearance="outline" fxFlex>
                      <mat-label>Age (D)</mat-label>
                      <input name="AgeDay" formControlName="AgeDay" placeholder="Age (D)" matInput [(ngModel)]="registerObj.AgeDay"
                        readonly (ngModelChange)="registerObj.AgeDay = $event" type="number" maxlength="2" #aged
                        (keydown)="onEnteraged($event)"
                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,2);">
                      <mat-error *ngIf="personalFormGroup.get('AgeDay').invalid && personalFormGroup.get('AgeDay').touched">
                        Please enter Age Day </mat-error>
                    </mat-form-field>
                  </div>
          
          
                <!-- <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                  <mat-label>Marital Name</mat-label>
                  <input matAutocompletePosition="below" type="text" placeholder="Select MaritalStatusId"
                    [(ngModel)]="vMaritalStatusId" matInput #mstatus (keydown)="onEntermstatus($event)"
                    formControlName="MaritalStatusId" [matAutocomplete]="autoMarital">
                  <span matSuffix style="display: flex;">
                    <mat-icon class="mat-icon-close"
                      (click)="personalFormGroup.get('MaritalStatusId').setValue(''); isMaritalSelected = false;">close</mat-icon>
                    <mat-icon class="mat-icon-close"
                      (click)="personalFormGroup.get('MaritalStatusId').setValue(''); isMaritalSelected = false;">search</mat-icon>
                  </span>
                  <mat-autocomplete #autoMarital="matAutocomplete" [displayWith]="getOptionTextMarital">
                    <mat-option *ngFor="let option of filteredOptionsMarital | async" [value]="option">
                      {{option.text}}
                    </mat-option>
                  </mat-autocomplete>
                </mat-form-field>  -->


                <mat-form-field appearance="outline" fxFlex>
                  <mat-label>Marital Name</mat-label>
                  <input matAutocompletePosition="below" type="text" placeholder="Select Area" matInput 
                  formControlName="MaritalStatusId" [matAutocomplete]="autoMarital" #autoMarital (keydown)="onEnterarea($event)">
                  <span matSuffix style="display: flex;">
                      <mat-icon class="mat-icon-close" (click)="personalFormGroup.get('MaritalStatusId').setValue(''); isAreaSelected = false;">
                        close</mat-icon>
                      <mat-icon class="mat-icon-close" (click)="personalFormGroup.get('MaritalStatusId').setValue(''); isAreaSelected = false;">
                        search</mat-icon>
                  </span>
                  <mat-autocomplete #autoMarital="matAutocomplete" [displayWith]="getOptionTextDropdown">
                      <mat-option *ngFor="let option of filteredOptionsMarital | async" [value]="option">
                          {{option.text}}
                      </mat-option>
                  </mat-autocomplete>
              </mat-form-field>
              
          
                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                  <mat-label>Religion Name</mat-label>
                  <input matAutocompletePosition="below" type="text" placeholder="Select Religion" [(ngModel)]="vReligionId"
                    matInput #religion (keydown)="onEnterreligion($event)" formControlName="ReligionId"
                    [matAutocomplete]="autoReligion">
                  <span matSuffix style="display: flex;">
                    <mat-icon class="mat-icon-close"
                      (click)="personalFormGroup.get('ReligionId').setValue(''); isReligionSelected = false;">close</mat-icon>
                    <mat-icon class="mat-icon-close"
                      (click)="personalFormGroup.get('ReligionId').setValue(''); isReligionSelected = false;">search</mat-icon>
                  </span>
                  <mat-autocomplete #autoReligion="matAutocomplete" [displayWith]="getOptionTextDropdown">
                    <mat-option *ngFor="let option of filteredOptionsReligion | async" [value]="option">
                      {{option.ReligionName}}
                    </mat-option>
                  </mat-autocomplete>
                </mat-form-field>
          
                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                  <mat-label>Pan Card No</mat-label>
                  <input name="Pancardno" formControlName="Pancardno" placeholder="PanCardNo Number" matInput
                    [(ngModel)]="registerObj.Pancardno" #pan maxlength="10" (keydown)="onEnterpan($event)">
                  <mat-error class="error"
                    *ngIf="personalFormGroup.get('Pancardno').invalid && personalFormGroup.get('Pancardno').touched">10
                    digits Pan Card No is required</mat-error>
                </mat-form-field>
          
          
                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                  <mat-label>AadharCard Number</mat-label>
                  <input name="AadharCardNo" formControlName="AadharCardNo" placeholder="AadharCard Number" matInput
                    [(ngModel)]="registerObj.AadharCardNo" #AadharCardNo (keydown)="onEnterAadharCardNo($event)"
                    oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0, 12);">
                  <mat-error class="error"
                    *ngIf="personalFormGroup.get('AadharCardNo').invalid && personalFormGroup.get('AadharCardNo').touched">Aadhar
                    number is required
                  </mat-error>
                </mat-form-field>
          
                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                  <mat-label>Mobile Number</mat-label>
                  <input name="MobileNo" formControlName="MobileNo" placeholder="Mobile Number" matInput required #mobile
                    (keydown)="onEntermobile($event)" [(ngModel)]="registerObj.MobileNo"
                    oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0, 10);"
                    required="required" value="9876658688">
                  <mat-error class="error"
                    *ngIf="personalFormGroup.get('MobileNo').invalid && personalFormGroup.get('MobileNo').touched">10
                    digits Mobile number is
                    required</mat-error>
                </mat-form-field>
          
                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                  <mat-label>Address</mat-label>
                  <input name="Address" formControlName="Address" placeholder="Address" matInput #address
                    (keydown)="onEnteraddress($event)" [(ngModel)]="registerObj.Address">
                  <mat-error *ngIf="personalFormGroup.get('Address').invalid && personalFormGroup.get('Address').touched">Please
                    enter Address </mat-error>
                </mat-form-field>
          
                <!-- <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                  <mat-label>Area Name</mat-label>
                  <input matAutocompletePosition="below" type="text" placeholder="Select Area" [(ngModel)]="vAreaId" matInput
                    #area (keydown)="onEnterarea($event)" formControlName="AreaId" [matAutocomplete]="autoArea">
                  <span matSuffix style="display: flex;">
                    <mat-icon class="mat-icon-close"
                      (click)="personalFormGroup.get('AreaId').setValue(''); isAreaSelected = false;">close</mat-icon>
                    <mat-icon class="mat-icon-close"
                      (click)="personalFormGroup.get('AreaId').setValue(''); isAreaSelected = false;">search</mat-icon>
                  </span>
                  <mat-autocomplete #autoArea="matAutocomplete" [displayWith]="getOptionTextArea">
                    <mat-option *ngFor="let option of filteredOptionsArea | async" [value]="option">
                      {{option.AreaName}}
                    </mat-option>
                  </mat-autocomplete>
                </mat-form-field> -->

                <mat-form-field appearance="outline" fxFlex>
                  <mat-label>Area Name</mat-label>
                  <input matAutocompletePosition="below" type="text" placeholder="Select Area" matInput formControlName="AreaId" [matAutocomplete]="autoArea" #area (keydown)="onEnterarea($event)">
                  <span matSuffix style="display: flex;">
                      <mat-icon class="mat-icon-close" (click)="personalFormGroup.get('AreaId').setValue(''); isAreaSelected = false;">close</mat-icon>
                      <mat-icon class="mat-icon-close" (click)="personalFormGroup.get('AreaId').setValue(''); isAreaSelected = false;">search</mat-icon>
                  </span>
                  <mat-autocomplete #autoArea="matAutocomplete" [displayWith]="getOptionTextDropdown">
                      <mat-option *ngFor="let option of filteredOptionsArea | async" [value]="option">
                          {{option.text}}
                      </mat-option>
                  </mat-autocomplete>
              </mat-form-field>
          
                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                  <mat-label>City</mat-label>
                  <input matAutocompletePosition="below" type="text" placeholder="Select City" matInput #city
                    (keydown)="onEntercity($event)" formControlName="CityId" [(ngModel)]="vCityId" [matAutocomplete]="autoCity"
                    required>
                  <span matSuffix style="display: flex;">
                    <mat-icon class="mat-icon-close"
                      (click)="personalFormGroup.get('CityId').setValue(''); isCitySelected = false;">close</mat-icon>
                    <mat-icon class="mat-icon-close"
                      (click)="personalFormGroup.get('CityId').setValue(''); isCitySelected = false;">search</mat-icon>
                  </span>
                  <mat-autocomplete #autoCity="matAutocomplete" [displayWith]="getOptionTextDropdown">
                    <mat-option *ngFor="let option of filteredOptionsCity | async" [value]="option"
                      (onSelectionChange)="onChangeCityList(option)">
                      {{option.text}}
                    </mat-option>
                  </mat-autocomplete>
                </mat-form-field>
          
                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                  <mat-label>State Name</mat-label>
                  <mat-select formControlName="StateId" name="StateId" (selectionChange)="onChangeCountryList($event.value)">
                    <mat-option></mat-option>
                    <mat-option *ngFor="let m of stateList" [value]="m">
                      {{m.StateName}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
          
                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                  <mat-label>Country Name</mat-label>
                  <mat-select formControlName="CountryId">
                    <mat-option></mat-option>
                    <mat-option *ngFor="let g of countryList" [value]="g">
                      {{g.CountryName}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
          </mat-card>
        </form>
        <br>
        <form [formGroup]="hospitalFormGroup" fxLayout="column" style="padding: 0 20px;">
            <div fxLayout="row" fxLayout.gt-xs="row" fxLayoutGap="4px"
                class="top-header accent heading-container h-40 border-radius-4">
                <span style="font-size:15px;font-weight: bolder; color:white;padding:7px;">Hospital
                    Details</span>
            </div>
            <mat-card>
                <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="12px grid" style="padding: 10px 0;">

                    <mat-form-field appearance="outline">
                        <mat-label>Patient Type</mat-label>
                        <input matAutocompletePosition="below" type="text" placeholder="Select Patient Type"
                            matInput #ptype (keydown)="onEnterptype($event,vPatientTypeID.PatientTypeId)"
                            formControlName="PatientTypeID" [(ngModel)]="vPatientTypeID"
                            [matAutocomplete]="autoPatientTypeID">
                        <span matSuffix style="display: flex;">
                            <mat-icon class="mat-icon-close"
                                (click)="hospitalFormGroup.get('PatientTypeID').setValue(''); ispatienttypeSelected = false;">close</mat-icon>
                            <mat-icon class="mat-icon-close"
                                (click)="hospitalFormGroup.get('PatientTypeID').setValue(''); ispatienttypeSelected = false;">search</mat-icon>
                        </span>
                        <mat-autocomplete #autoPatientTypeID="matAutocomplete"
                            [displayWith]="getOptionTextpatienttype">
                            <mat-option *ngFor="let option of filteredOptionsPatientType | async"
                                [value]="option" (onSelectionChange)="onChangePatient(option)">
                                {{option.PatientType}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>



                    <mat-form-field appearance="outline">
                        <mat-label>Tariff Name</mat-label>
                        <input matAutocompletePosition="below" type="text" placeholder="Select Patient Type"
                            matInput #tariff (keydown)="onEnterptariff($event,vTariffId.TariffId)"
                            formControlName="TariffId" [matAutocomplete]="autoTariffId"
                            [(ngModel)]="vTariffId">
                        <span matSuffix style="display: flex;">
                            <mat-icon class="mat-icon-close"
                                (click)="hospitalFormGroup.get('TariffId').setValue(''); isTariffIdSelected = false;">close</mat-icon>
                            <mat-icon class="mat-icon-close"
                                (click)="hospitalFormGroup.get('TariffId').setValue(''); isTariffIdSelected = false;">search</mat-icon>
                        </span>
                        <mat-autocomplete #autoTariffId="matAutocomplete"
                            [displayWith]="getOptionTextTariff">
                            <mat-option *ngFor="let option of filteredOptionsTarrif | async"
                                [value]="option">
                                {{option.TariffName}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>

                    <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <mat-label>Department</mat-label>
                        <input matAutocompletePosition="below" type="text" placeholder="Select Department"
                            [(ngModel)]="vDepartmentid" matInput #dept
                            (keydown)="onEnterdept($event,vDepartmentid.Departmentid)"
                            formControlName="Departmentid" [matAutocomplete]="autoDep" required>
                        <span matSuffix style="display: flex;">
                            <mat-icon class="mat-icon-close"
                                (click)="hospitalFormGroup.get('Departmentid').setValue(''); isDepartmentSelected = false;">close</mat-icon>
                            <mat-icon class="mat-icon-close"
                                (click)="hospitalFormGroup.get('Departmentid').setValue(''); isDepartmentSelected = false;">search</mat-icon>
                        </span>
                        <mat-autocomplete #autoDep="matAutocomplete" [displayWith]="getOptionTextDep">
                            <mat-option *ngFor="let option of filteredOptionsDep | async" [value]="option"
                                (onSelectionChange)="OnChangeDoctorList(option)">
                                {{option.DepartmentName}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>

                    <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <mat-label>Doctor Name</mat-label>
                        <input matAutocompletePosition="below" type="text" placeholder="Select Doctor Name"
                            matInput #deptdoc (keydown)="onEnterdeptdoc($event)" formControlName="DoctorId"
                            [(ngModel)]="vDoctorId" [matAutocomplete]="autoDoctor" required>
                        <span matSuffix style="display: flex;">
                            <mat-icon class="mat-icon-close"
                                (click)="hospitalFormGroup.get('DoctorId').setValue(''); isDoctorSelected = false;">close</mat-icon>
                            <mat-icon class="mat-icon-close"
                                (click)="hospitalFormGroup.get('DoctorId').setValue(''); isDoctorSelected = false;">search</mat-icon>
                        </span>

                        <mat-autocomplete #autoDoctor="matAutocomplete" [displayWith]="getOptionTextDoc">
                            <mat-option *ngFor="let option of filteredOptionsDoc | async" [value]="option"
                                (onSelectionChange)="isDoctorSelected = true;">
                                {{option.Doctorname }} <b>|</b> {{option.DepartmentName }} <b>|</b>
                                {{option.DoctorId}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>

                    <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <mat-label>Admitted Doctor 1</mat-label>
                        <input matAutocompletePosition="below" type="text"
                            placeholder="Select Admitted Doctor 1" matInput #admitdoc1
                            (keydown)="onEnteradmitdoc1($event)" formControlName="admittedDoctor1"
                            [(ngModel)]="vadmittedDoctor1" [matAutocomplete]="autoRefdoc">
                        <span matSuffix style="display: flex;">
                            <mat-icon class="mat-icon-close"
                                (click)="hospitalFormGroup.get('admittedDoctor1').setValue(''); isAdmittedDoctor1Selected = false;">close</mat-icon>
                            <mat-icon class="mat-icon-close"
                                (click)="hospitalFormGroup.get('admittedDoctor1').setValue(''); isAdmittedDoctor1Selected = false;">search</mat-icon>
                        </span>
                        <mat-autocomplete #autoRefdoc="matAutocomplete" [displayWith]="getOptionTextAdDoc1">
                            <mat-option *ngFor="let option of filteredOptionsDoc1 | async" [value]="option">
                                {{option.Doctorname}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>

                    <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <mat-label>Admitted Doctor 2</mat-label>
                        <input matAutocompletePosition="below" type="text"
                            placeholder="Select Admitted Doctor 2 " matInput
                            formControlName="admittedDoctor2" [matAutocomplete]="autodoc2" #admitdoc2
                            [(ngModel)]="vadmittedDoctor2" (keydown)="onEnteradmitdoc2($event)">
                        <span matSuffix style="display: flex;">
                            <mat-icon class="mat-icon-close"
                                (click)="hospitalFormGroup.get('admittedDoctor2').setValue(''); isAdmittedDoctor2Selected = false;">close</mat-icon>
                            <mat-icon class="mat-icon-close"
                                (click)="hospitalFormGroup.get('admittedDoctor2').setValue(''); isAdmittedDoctor2Selected = false;">search</mat-icon>
                        </span>
                        <mat-autocomplete #autodoc2="matAutocomplete" [displayWith]="getOptionTextDoc2">
                            <mat-option *ngFor="let option of filteredOptionsDoc2 | async" [value]="option">
                                {{option.Doctorname}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>

                    <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <mat-label>Ref Doctor Name</mat-label>
                        <input matAutocompletePosition="below" type="text" placeholder="Select Ref Doctor "
                            matInput #refdoc (keydown)="onEnterrefdoc($event)" formControlName="refDoctorId"
                            [(ngModel)]="vrefDoctorId" [matAutocomplete]="autorefdoc">
                        <span matSuffix style="display: flex;">
                            <mat-icon class="mat-icon-close"
                                (click)="hospitalFormGroup.get('refDoctorId').setValue(''); isRefDoctorSelected = false;">close</mat-icon>
                            <mat-icon class="mat-icon-close"
                                (click)="hospitalFormGroup.get('refDoctorId').setValue(''); isRefDoctorSelected = false;">search</mat-icon>
                        </span>
                        <mat-autocomplete #autorefdoc="matAutocomplete" [displayWith]="getOptionTextRefDoc">
                            <mat-option *ngFor="let option of filteredOptionsRefrenceDoc | async"
                                [value]="option">
                                {{option.Doctorname}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>

                    <ng-container *ngIf="isCompanySelected">
                        <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                            <mat-label>Company Name </mat-label>
                            <input matAutocompletePosition="below" type="text" placeholder="Select Company"
                                [(ngModel)]="vCompanyId" matInput formControlName="CompanyId"
                                [matAutocomplete]="autoCompany">
                            <span matSuffix style="display: flex;">
                                <mat-icon class="mat-icon-close"
                                    (click)="hospitalFormGroup.get('CompanyId').setValue(''); isCompanyselected = false;">close</mat-icon>
                                <mat-icon class="mat-icon-close"
                                    (click)="hospitalFormGroup.get('CompanyId').setValue(''); isCompanyselected = false;">search</mat-icon>
                            </span>
                            <mat-autocomplete #autoCompany="matAutocomplete"
                                [displayWith]="getOptionTextCompany">
                                <mat-option *ngFor="let option of filteredOptionsCompany | async"
                                    [value]="option">
                                    {{option.CompanyName}}
                                </mat-option>
                            </mat-autocomplete>
                            <mat-error *ngIf="hospitalFormGroup.get('CompanyId').hasError('required')">
                                Required field cannot be left blank
                            </mat-error>
                        </mat-form-field>

                        <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                            <mat-label>Sub Company Name </mat-label>
                            <input matAutocompletePosition="below" type="text"
                                placeholder="Select SubCompany" matInput formControlName="SubCompanyId"
                                [matAutocomplete]="autoSubCompany" required>
                            <span matSuffix style="display: flex;">
                                <mat-icon class="mat-icon-close"
                                    (click)="hospitalFormGroup.get('SubCompanyId').setValue(''); isSubCompanySelected = false;">close</mat-icon>
                                <mat-icon class="mat-icon-close"
                                    (click)="hospitalFormGroup.get('SubCompanyId').setValue(''); isSubCompanySelected = false;">search</mat-icon>
                            </span>
                            <mat-autocomplete #autoSubCompany="matAutocomplete"
                                [displayWith]="getOptionTextSubCompany">
                                <mat-option *ngFor="let option of filteredOptionsSubCompany | async"
                                    [value]="option">
                                    {{option.CompanyName}}
                                </mat-option>
                            </mat-autocomplete>
                            <mat-error *ngIf="hospitalFormGroup.get('SubCompanyId').hasError('required')">
                                Required field cannot be left blank
                            </mat-error>
                        </mat-form-field>
                    </ng-container>
                </div>
            </mat-card>
        </form>
        <br>
        <form [formGroup]="wardFormGroup" fxLayout="column" style="padding: 0 20px;">
            <div fxLayout="row" fxLayout.gt-xs="row" fxLayoutGap="4px"
                class="top-header accent heading-container h-40 border-radius-4">
                <span style="font-size:15px; font-weight: bolder; color:white;padding:7px;">Ward
                    Details </span>
            </div>
            <mat-card>
                <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="12px grid" style="padding: 10px 0;">
                    <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <mat-label>Ward Name</mat-label>
                        <input matAutocompletePosition="below" type="text" placeholder="Select Ward"
                            matInput #ward (keydown)="onEnterward($event,vRoomId.RoomId)"
                            formControlName="RoomId" [(ngModel)]="vRoomId" [matAutocomplete]="autoWard"
                            required>
                        <span matSuffix style="display: flex;">
                            <mat-icon class="mat-icon-close"
                                (click)="wardFormGroup.get('RoomId').setValue(''); isWardSelected = false;">close</mat-icon>
                            <mat-icon class="mat-icon-close" ward
                                (click)="wardFormGroup.get('RoomId').setValue(''); isWardSelected = false;">search</mat-icon>
                        </span>
                        <mat-autocomplete #autoWard="matAutocomplete" [displayWith]="getOptionTextWard"
                        (optionSelected)="OnChangeBedList($event.option.value)">
                            <mat-option *ngFor="let option of filteredOptionsWard | async" [value]="option">
                                {{option.RoomName}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>  

                    <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <mat-label>Bed Name</mat-label>
                        <input matAutocompletePosition="below" type="text" placeholder="Select Bed" matInput
                            #bed (keydown)="onEnterbed($event,vBedId.BedId)" formControlName="BedId"
                            [(ngModel)]="vBedId" [matAutocomplete]="autoBed" required>
                        <span matSuffix style="display: flex;">
                            <mat-icon class="mat-icon-close"
                                (click)="wardFormGroup.get('BedId').setValue(''); isWardSelected = false;">close</mat-icon>
                            <mat-icon class="mat-icon-close"
                                (click)="wardFormGroup.get('BedId').setValue(''); isWardSelected = false;">search</mat-icon>
                        </span>
                        <mat-autocomplete #autoBed="matAutocomplete" [displayWith]="getOptionTextBed">
                            <mat-option *ngFor="let option of filteredOptionsBed | async" [value]="option"
                                (onSelectionChange)="onBedChange(option)">
                                {{option.BedName}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>

                    <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                        <mat-label>Class Name</mat-label>
                        <mat-select formControlName="ClassId" required #class
                           >
                            <mat-option></mat-option>
                            <mat-option *ngFor="let m of BedClassList" [value]="m">
                                {{m.ClassName}}
                            </mat-option>
                        </mat-select>
                        <mat-error
                            *ngIf="wardFormGroup.get('ClassId').invalid && wardFormGroup.get('ClassId').touched">
                            <span *ngIf="wardFormGroup.get('ClassId').hasError('required')">
                                Class Name is required
                            </span>
                        </mat-error>
                    </mat-form-field>
                </div>
            </mat-card>
        </form>
        <br>
        <form [formGroup]="otherFormGroup" fxLayout="column" style="padding: 0 20px;">
          <div fxLayout="row" fxLayout.gt-xs="row" fxLayoutGap="4px"
              class="top-header accent heading-container h-40 border-radius-4">
              <span style="font-size:15px; font-weight: bolder; color:white;padding:7px;">Other
                  Details</span>
          </div>
          <mat-card>
              <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="12px grid" style="padding: 10px 0;">
                  <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                      <input name="RelativeName" formControlName="RelativeName"
                          placeholder="Relative Name" matInput #relativename
                          (keydown)="onEnterrelativename($event)">
                      <mat-error
                          *ngIf="otherFormGroup.get('RelativeName').invalid && otherFormGroup.get('RelativeName').touched">
                          Please enter Relative Name </mat-error>
                  </mat-form-field>

                  <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                      <mat-label>Address</mat-label>
                      <input name="RelativeAddress" formControlName="RelativeAddress"
                          placeholder="Address" matInput #relativeadd
                          (keydown)="onEnterrelativeadd($event)">
                  </mat-form-field>
 
                  <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                      <mat-label>Relatvie MobileNo </mat-label>
                      <input name="RelatvieMobileNo" formControlName="RelatvieMobileNo"
                          placeholder="Mobile Number" matInput #mobile
                          (keydown)="onEnterrelativemobile($event)"
                          [(ngModel)]="registerObj.RelatvieMobileNo"
                          oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0, 10);"
                          type="number" value="9876658688" #relativemobile>
                      <mat-error class="error"
                          *ngIf="otherFormGroup.get('RelatvieMobileNo').invalid && otherFormGroup.get('RelatvieMobileNo').touched">10
                          digits Mobile number is
                          required</mat-error>
                  </mat-form-field>

                  <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                      <mat-label>Relationship Name</mat-label>
                      <input matAutocompletePosition="below" type="text" placeholder="Select Relationship" 
                          matInput #relation formControlName="RelationshipId"  (keydown)="onEnterrelation($event)"
                          [matAutocomplete]="autoRelation">
                      <span matSuffix style="display: flex;">
                          <mat-icon class="mat-icon-close"
                              (click)="otherFormGroup.get('RelationshipId').setValue(''); isRelationshipSelected = false;">close</mat-icon>
                          <mat-icon class="mat-icon-close"
                              (click)="otherFormGroup.get('RelationshipId').setValue(''); isRelationshipSelected = false;">search</mat-icon>
                      </span>
                      <mat-autocomplete #autoRelation="matAutocomplete" [displayWith]="getOptionTextDropdown">
                          <mat-option *ngFor="let option of filteredOptionsRelation | async" [value]="option">
                              {{option.text}}
                              <!--  (onSelectionChange)="setSaveflag()" -->
                          </mat-option>
                      </mat-autocomplete>
                  </mat-form-field>  
                  
              </div>
          </mat-card>
          <br>
          <div class="footer-navigation-container mb-4" fxLayout="row wrap"
              fxLayoutAlign="space-between center">
              <div class="checkbox-container">
                  <mat-checkbox aria-label="Remember Me" formControlName="IsMLC">
                      ISMLC
                  </mat-checkbox>

                  <mat-checkbox aria-label="Op TO Ip Change" formControlName="OPIPChange"
                      style="margin-left:30px;">
                      OP TO IP Convert
                  </mat-checkbox>

                  <mat-checkbox aria-label="Op TO Ip Change" formControlName="IsCharity"
                      style="margin-left:30px;">
                      IsCharity
                  </mat-checkbox>
                  <mat-checkbox aria-label="Op TO Ip Change" formControlName="IsSenior"
                      style="margin-left:30px;">
                      IsSeniorCitizen
                  </mat-checkbox>  

              </div>
              <!-- [disabled]="personalFormGroup.invalid || hospitalFormGroup.invalid || wardFormGroup.invalid || otherFormGroup.invalid" -->
              <div class="next-div button-row-group">
                  <button class="btn btn-primary" color="accent" (click)="onNewSave()"
                  [disabled]="!saveflag" #savebutton>
                      <span>Save</span>
                  </button>
                  <button class="btn btn-danger-outline" (click)="onReset()">Reset</button>
              </div>
          </div>
      </form>
    </div>
</div>





</div>

 