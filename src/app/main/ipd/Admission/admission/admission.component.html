<div id="contacts" class="page-layout simple left-sidebar inner-sidebar inner-scroll mat-error-fix"
    fusePerfectScrollbar>

    <!-- CONTENT -->
    <div class="content ipd-admission">

        <!-- CENTER -->
        <div style="width: 100%;">
            <mat-tab-group>

                <mat-tab>
                    <ng-template mat-tab-label>
                        Admission
                    </ng-template>

                    <div id="contacts" class="page-layout simple left-sidebar inner-sidebar inner-scroll"
                        dynamicTableHeight>

                        <!-- / HEADER -->
                        <!-- SELECTED BAR -->
                        <app-main class="accent-600" *ngIf="hasSelectedContacts" [@slideInTop]></app-main>
                        <!-- / SELECTED BAR -->
                        <!-- CONTENT -->
                        <div class="content">
                            <!-- SIDEBAR -->
                            <fuse-sidebar name="app-main" position="left" lockedOpen="gt-sm"
                                class="fuse-search-sidebar">
                                <div class="sidebar-content">
                                    <!-- SIDEBAR HEADER -->
                                    <div class="accent sidebar-header">
                                        <span class="search-title">Search Facility</span>
                                        <!-- / USER -->
                                    </div>
                                    <!-- / SIDEBAR HEADER -->
                                    <!-- SIDEBAR CONTENT -->
                                    <div class="sidebar-body">
                                        <div class="sidebar-form">
                                            <form [formGroup]="_AdmissionService.myFilterform" fusePerfectScrollbar>
                                                <div fxLayout="column" fxLayoutAlign="start none">
                                                    <mat-form-field appearance="outline">
                                                        <mat-label>Enter a date range</mat-label>
                                                        <mat-date-range-input [rangePicker]="picker">
                                                            <input matStartDate formControlName="start"
                                                                placeholder="Start date">
                                                            <input matEndDate formControlName="end"
                                                                placeholder="End date"
                                                                (dateChange)="getAdmittedPatientList_1()">
                                                        </mat-date-range-input>
                                                        <mat-datepicker-toggle matSuffix
                                                            [for]="picker"></mat-datepicker-toggle>
                                                        <mat-date-range-picker #picker></mat-date-range-picker>
                                                    </mat-form-field>

                                                    <mat-form-field appearance="outline" fxFlex>
                                                        <mat-label>Reg No</mat-label>
                                                        <input name="RegNo" formControlName="RegNo" matInput
                                                            (keyup)="getAdmittedPatientList_1()">
                                                    </mat-form-field>

                                                    <mat-form-field appearance="outline" fxFlex>
                                                        <mat-label>IPD No</mat-label>
                                                        <input name="IPDNo" formControlName="IPDNo" matInput
                                                            (keyup)="getAdmittedPatientList_1()">
                                                    </mat-form-field>

                                                    <mat-form-field appearance="outline" fxFlex>
                                                        <mat-label>First Name</mat-label>
                                                        <input name="FirstName" formControlName="FirstName" matInput
                                                            (keyup)="getAdmittedPatientList_1()">
                                                    </mat-form-field>

                                                    <mat-form-field appearance="outline" fxFlex>
                                                        <mat-label>Middle Name</mat-label>
                                                        <input name="MiddleName" formControlName="MiddleName" matInput
                                                            (keyup)="getAdmittedPatientList_1()">
                                                    </mat-form-field>

                                                    <mat-form-field appearance="outline" fxFlex>
                                                        <mat-label>Last Name</mat-label>
                                                        <input name="LastName" formControlName="LastName" matInput
                                                            (keyup)="getAdmittedPatientList_1()">
                                                    </mat-form-field>

                                                    <mat-form-field appearance="outline" fxFlex>
                                                        <mat-label>Doctor Name</mat-label>
                                                        <input matAutocompletePosition="below" type="text"
                                                            placeholder="Select Doctor" matInput
                                                            formControlName="searchDoctorId"
                                                            [matAutocomplete]="autosearchDoctor" required>
                                                        <span matSuffix style="display: flex;">
                                                            <mat-icon class="mat-icon-close"
                                                                (click)="_AdmissionService.myFilterform.get('searchDoctorId').setValue(''); isSearchdoctorSelected = false;">close</mat-icon>
                                                            <mat-icon class="mat-icon-close"
                                                                (click)="_AdmissionService.myFilterform.get('searchDoctorId').setValue(''); isSearchdoctorSelected = false;">search</mat-icon>
                                                        </span>
                                                        <mat-autocomplete #autosearchDoctor="matAutocomplete"
                                                            [displayWith]="getOptionTextsearchDoctor">
                                                            <mat-option
                                                                *ngFor="let option of filteredOptionssearchDoctor | async"
                                                                [value]="option">
                                                                {{option.DoctorName}}
                                                            </mat-option>
                                                        </mat-autocomplete>
                                                    </mat-form-field>

                                                    <div class="action-buttons">
                                                        <button mat-raised-button (click)="onClear()"
                                                            matTooltip="close">
                                                            <mat-icon class="cleariconbutton">close</mat-icon>
                                                        </button>
                                                        <button mat-raised-button (click)="getAdmittedPatientList_1()"
                                                            matTooltip="search">
                                                            <mat-icon class="searchiconbutton">search</mat-icon>
                                                        </button>
                                                    </div>
                                                    <div class="addmision-list mt-12">
                                                        <button mat-raised-button class="btn btn-primary w-100-p"
                                                            (click)="getAdmittedPatientListview()" s matTooltip="search"
                                                            [disabled]="AdList">
                                                            Admission List
                                                        </button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </fuse-sidebar>
                            <!-- / SIDEBAR -->
                            <!-- CENTER -->
                            <!-- CENTER -->

                            <div class="center p-12 pb-56" fxFlexAlign="start center">

                                <div class="content-card" style="border-radius:4px; ">


                                    <div fxFlexFill fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="30px">
                                        <div fxFlex.gt-sm="100%" fxFlex>

                                            <div fxlayout="row">
                                                <div style="width: 100%;">
                                                    
                                                    <div class="info-badge-top pb-2 border-bottom">
                                                        <!-- "pill" class is used for rounded border -->
                                                        <div fxLayout="row" fxLayoutAlign="start center" class="gap-8">
                                                            <!-- <div style="color: blue;" fxLayout="row" fxLayoutAlign="start center" class="gap-4">
                                                                <mat-icon class="pill blue-600 s-16">circle</mat-icon>
                                                                <span class="blue-600-fg">New Admissions : {{VNewcount}}</span>
                                                            </div> -->
                                                            <div style="color: green" fxLayout="row" fxLayoutAlign="start center" class="gap-4">
                                                                <mat-icon class="pill green-600 s-16">circle</mat-icon>
                                                                <span class="green-600-fg"> Total Admissions  : {{VAdmissioncount}}</span>
                                                            </div>
                                                            <div style="color: green" fxLayout="row" fxLayoutAlign="start center" class="gap-4">
                                                                <mat-icon class="pill green-600 s-16">circle</mat-icon>
                                                                <span class="green-600-fg"> Total BillGenerated  : {{VBillcount}}</span>
                                                            </div>
                                                            <div style="color: orange" fxLayout="row" fxLayoutAlign="start center" class="gap-4">
                                                                <mat-icon class="pill orange-600 s-16">circle</mat-icon>
                                                                <span class="orange-600-fg">Today's Discharges  :{{vIsDischarg}}</span>
                                                            </div>
                                                            <div style="color: red" fxLayout="row" fxLayoutAlign="start center" class="gap-4">
                                                                <mat-icon class="pill red-600 s-16">circle</mat-icon>
                                                                <span class="red-600-fg">OPTOIPConvert : {{VOPtoIPcount}}</span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div matColumnDef="loading"
                                                        [ngClass]="{'hide': !(sIsLoading == 'loading-data')}"
                                                        class="backgroundBlur" style="height: 100%;">
                                                        <div class="spinner-border text-danger"></div>

                                                    </div>
                                                    <mat-table #table matSort [dataSource]="dataSource"
                                                        [@animateStagger]="{value:'50'}" class="table1"
                                                        style="overflow: auto;">

                                                        <ng-container matColumnDef="IsMLC" sticky>
                                                            <mat-header-cell *matHeaderCellDef fxShow.gt-sm class="w-80"
                                                                style="color: white;">IsMLC
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" class="w-80">
                                                                <!-- <mat-icon *ngIf="contact.IsMLC==1; else noMLC "
                                                                    matTooltip="IsNotMLC" class="pill green-600 s-16"
                                                                    (click)="NewMLc(contact)">edit
                                                                </mat-icon>
                                                                <mat-icon *ngIf="contact.IsMLC==1; else noMLC "
                                                                matTooltip="IsNotMLC" class="pill green-600 s-16"
                                                                (click)="NewMLc(contact)">print
                                                                </mat-icon> -->

                                                                <button mat-icon-button *ngIf="contact.IsMLC==1; else noMLC " matTooltip="IsMLC" (click)="NewMLc(contact)">
                                                                    <mat-icon>edit</mat-icon>
                                                                </button>
                                                                <button mat-icon-button *ngIf="contact.IsMLC==1; else noMLC " matTooltip="Print MLC paper">
                                                                    <mat-icon>print</mat-icon>
                                                                </button>

                                                                <ng-template #noMLC>
                                                                    <span>--</span>
                                                                </ng-template>

                                                            </mat-cell>
                                                        </ng-container>

                                                        <ng-container matColumnDef="RegNo" sticky>
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header
                                                                class="w-90" fxShow.gt-sm>Reg
                                                                No</mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm
                                                                class="w-90">
                                                                <span> {{contact.RegNo}}</span>
                                                            </mat-cell>
                                                        </ng-container>

                                                        <ng-container matColumnDef="PatientName" sticky>
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header
                                                                fxShow.gt-sm class="w-200">Patient Name
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm class="w-200">
                                                                <span> {{contact.PatientName}}</span>
                                                            </mat-cell>
                                                        </ng-container>

                                                        <ng-container matColumnDef="DOA">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header
                                                                fxShow.gt-md>Date</mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxShow.gt-md>
                                                                <span> {{contact.DOA}} - {{contact.DOT}} </span>
                                                            </mat-cell>
                                                        </ng-container>

                                                        <!-- <ng-container matColumnDef="DOT">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxHide
                                                                fxShow.gt-md>Time
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxHide fxShow.gt-md>
                                                                <span> {{contact.DOT}}</span>
                                                            </mat-cell>
                                                        </ng-container> -->

                                                        <ng-container matColumnDef="Doctorname">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxHide
                                                                fxShow.gt-md class="w-160">Doctor
                                                                Name
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxHide fxShow.gt-md class="w-160">
                                                                <span> {{contact.Doctorname}}</span>
                                                            </mat-cell>
                                                        </ng-container>

                                                        <ng-container matColumnDef="RefDocName">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxHide
                                                                fxShow.gt-md class="w-160">Ref Doc
                                                                Name
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxHide fxShow.gt-md class="w-160">
                                                                <span> {{contact.RefDocName}}</span>
                                                            </mat-cell>
                                                        </ng-container>

                                                        <ng-container matColumnDef="IPNo">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxHide
                                                                fxShow.gt-md>IPD No
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxHide fxShow.gt-md>
                                                                <span> {{contact.IPDNo}}</span>
                                                            </mat-cell>
                                                        </ng-container>
                                                        <ng-container matColumnDef="PatientType">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxHide
                                                                fxShow.gt-md>PatientType
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxHide fxShow.gt-md>
                                                                <span> {{contact.PatientType}}</span>
                                                            </mat-cell>
                                                        </ng-container>

                                                        <ng-container matColumnDef="WardName">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxHide
                                                                fxShow.gt-md>Ward Name
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxHide fxShow.gt-md>
                                                                <span> {{contact.RoomName}} - {{contact.BedName}}</span>
                                                            </mat-cell>
                                                        </ng-container>

                                                        <ng-container matColumnDef="TariffName">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxHide
                                                                fxShow.gt-md>Traiff
                                                                Name
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxHide fxShow.gt-md>
                                                                <span> {{contact.TariffName}}</span>
                                                            </mat-cell>
                                                        </ng-container>

                                                        <ng-container matColumnDef="ClassName">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxHide
                                                                fxShow.gt-md>Class
                                                                Name
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxHide fxShow.gt-md>
                                                                <span> {{contact.ClassName}}</span>
                                                            </mat-cell>
                                                        </ng-container>

                                                        <ng-container matColumnDef="CompanyName">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxHide
                                                                fxShow.gt-md>Company
                                                                Name
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxHide fxShow.gt-md>
                                                                <span> {{contact.CompanyName}}</span>
                                                            </mat-cell>
                                                        </ng-container>

                                                        <ng-container matColumnDef="RelativeName">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxHide
                                                                fxShow.gt-md>Relative
                                                                Name
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxHide fxShow.gt-md>
                                                                <span> {{contact.RelativeName}}</span>
                                                            </mat-cell>
                                                        </ng-container>
                                                        <!-- <ng-container matColumnDef="IsMLC">
                                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxHide
                                                                fxShow.gt-md>IsMLC
                                                            </mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" fxHide fxShow.gt-md>
                                                                <span> {{contact.IsMLC}}</span>
                                                            </mat-cell>
                                                        </ng-container>
                                                         -->

                                                        <ng-container matColumnDef="buttons" stickyEnd>
                                                            <mat-header-cell *matHeaderCellDef
                                                                class="table-actions w-150">Action</mat-header-cell>
                                                            <mat-cell *matCellDef="let contact" class="w-150">
                                                                <div fxLayout="row">
                                                                    <button mat-icon-button
                                                                        (click)="EditRegistration(contact)"
                                                                        matTooltip="edit Registration">
                                                                        <mat-icon
                                                                            style="color: black;">edit</mat-icon>
                                                                    </button>

                                                                    <button mat-icon-button
                                                                        (click)="getAdmittedPatientCasepaperview(contact)"
                                                                        matTooltip="Print">
                                                                        <mat-icon style="color: black;">print</mat-icon>
                                                                    </button>
                                                                    
                                                                    <button mat-icon-button
                                                                        [matMenuTriggerFor]="moreMenu" aria-label="More"
                                                                        (click)="$event.stopPropagation();">
                                                                        <mat-icon
                                                                            class="secondary-text">more_vert</mat-icon>
                                                                    </button>
                                                                    <mat-menu #moreMenu="matMenu">
                                                                        <ng-container
                                                                            *ngFor="let m of menuActions, let i=index">
                                                                            <button mat-menu-item aria-label="remove"
                                                                                (click)="getRecord(contact,m)">
                                                                                <span>{{m}}</span>
                                                                            </button>
                                                                        </ng-container>
                                                                    </mat-menu>
                                                                </div>
                                                            </mat-cell>
                                                        </ng-container>

                                                        <ng-container matColumnDef="loading">
                                                            <mat-header-cell *matFooterCellDef colspan="6"
                                                                style="display: none;">
                                                            </mat-header-cell>
                                                        </ng-container>

                                                        <ng-container matColumnDef="noData">
                                                            <mat-footer-cell *matFooterCellDef colspan="6">
                                                                no data found...
                                                            </mat-footer-cell>
                                                        </ng-container>

                                                        <mat-header-row class="accent min-width-2200"
                                                            *matHeaderRowDef="displayedColumns; sticky: true">
                                                        </mat-header-row>
                                                        <mat-row *matRowDef="let contact; columns: displayedColumns;"
                                                            class="contact min-width-2200"
                                                            [ngClass]="contact.PatientType !== 'Self' ? 'self-row' : ''"
                                                            [@animate]="{value:'*',params:{y:'100%'}}"></mat-row>
                                                        <mat-footer-row *matFooterRowDef="['loading']"
                                                            [ngClass]="{'hide': !(sIsLoading == 'loading-data')}">
                                                        </mat-footer-row>
                                                        <mat-footer-row *matFooterRowDef="['noData']"
                                                            [ngClass]="{'hide':!(dataSource!=null && dataSource.data.length==0)}"></mat-footer-row>
                                                    </mat-table>
                                                    <mat-paginator [pageSizeOptions]="[35, 50, 75, 100]" [pageSize]="35" [length]="resultsLength"
                                                    showFirstLastButtons (page)="getAdmittedPatientList_1()">
                                                </mat-paginator>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- CENTER -->
                        </div>
                        <!-- / USER -->
                        <!-- / CENTER -->
                        <!-- / CONTENT-->
                    </div>

                </mat-tab>

                <mat-tab>
                    <ng-template mat-tab-label>
                        New Admission
                    </ng-template>

                    <div class="form-container px-20 pt-8 " fusePerfectScrollbar>
                        <form [formGroup]="searchFormGroup">
                            <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="5px"
                                fxLayoutAlign="space-between center">
                                <div class="radio-container">
                                    <mat-radio-group aria-label="Select an option" formControlName="regRadio"
                                        name="regRadio" (change)="onChangeReg($event)">
                                        <mat-radio-button value="registration">New Registration </mat-radio-button>
                                        <mat-radio-button value="registrered">Registered</mat-radio-button>
                                    </mat-radio-group>
                                </div>
                                <div class="select-container" fxLayout="row" fxLayout.lt-sm="column" class="gap-8">
                                    <!-- getSelectedObj -->
                                    <mat-form-field appearance="outline" *ngIf="Regflag">
                                        <input type="text" name="RegId" formControlName="RegId"
                                            placeholder="RegNo / First Name / Last Name / Mobile No" matInput #regno
                                            [matAutocomplete]="auto" (input)="getSearchList()" >
                                        <span matSuffix style="display: flex;">
                                            <mat-icon class="mat-icon-close"
                                                (click)="searchFormGroup.get('RegId').setValue(''); isRegIdSelected = false;">close</mat-icon>
                                            <mat-icon class="mat-icon-close"
                                                (click)="searchFormGroup.get('RegId').setValue(''); isRegIdSelected = false;">search</mat-icon>
                                        </span>
                                        <mat-autocomplete #auto="matAutocomplete" [displayWith]="getOptionText"
                                            (optionSelected)='chekAdmittedpatient($event.option.value)'>
                                            <mat-option *ngFor="let option of filteredOptions" [value]="option">
                                                {{option.FirstName}} {{option.MiddleName}} {{option.LastName}} |
                                                {{option.RegNo}} |
                                                {{option.MobileNo}}
                                            </mat-option>
                                        </mat-autocomplete>
                                        <mat-error *ngIf="searchFormGroup.get('RegId').hasError('required')">
                                            Required field cannot be left blank
                                        </mat-error>
                                    </mat-form-field>

                                    <mat-form-field appearance="outline">
                                        <mat-label>Hospital Name</mat-label>
                                        <mat-select name="HospitalId" formControlName="HospitalId" required>
                                            <mat-option></mat-option>
                                            <mat-option *ngFor="let m of HospitalList" [value]="m">
                                                {{m.HospitalName}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>

                                    <div class="common-date">
                                        <app-common-date [screenFrom]="screenFromString" style="float:right"
                                            (dateTimeEventEmitter)="getDateTime($event)"></app-common-date>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <!-- </form> -->

                    <!-- </div> -->

                    <form [formGroup]="personalFormGroup" fxLayout="column" style="padding: 0 20px;">
                        <input type="hidden" name="RegId" formControlName="RegId">
                        <div fxLayout="row" fxLayout.gt-xs="row" fxLayoutGap="4px"
                            class="top-header accent heading-container h-40 border-radius-4">
                            <span style="font-size:15px; font-weight: bolder; color:white;padding:7px;">Personal
                                Details</span>
                        </div>
                        <!-- <div style="padding: 7px;overflow-block: hover;"> -->
                        <mat-card>
                            <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="12px grid" style="padding: 10px 0;">
                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Prefix</mat-label>
                                    <input matAutocompletePosition="below" type="text" placeholder="Select Prefix"
                                        matInput (keydown)="onEnterprefix($event,vPrefixID.PrefixID)" formControlName="PrefixID" [(ngModel)]="vPrefixID"
                                        [matAutocomplete]="autoPrefix" required>
                                    <span matSuffix style="display: flex;">
                                        <mat-icon class="mat-icon-close"
                                            (click)="personalFormGroup.get('PrefixID').setValue(''); isPrefixSelected = false;">close</mat-icon>
                                        <mat-icon class="mat-icon-close"
                                            (click)="personalFormGroup.get('PrefixID').setValue(''); isPrefixSelected = false;">search</mat-icon>
                                    </span>
                                    <mat-autocomplete #autoPrefix="matAutocomplete" [displayWith]="getOptionTextPrefix">
                                        <mat-option *ngFor="let option of filteredOptionsPrefix | async"
                                            [value]="option" (onSelectionChange)="onChangeGenderList(option)">
                                            {{option.PrefixName}}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>First Name</mat-label>
                                    <input name="FirstName" formControlName="FirstName" placeholder="First Name"
                                        [ngClass]="{ 'is-invalid': submitted && personalFormGroup.get('FirstName').errors }"
                                        matInput #fname (keydown)="onEnterfname($event)" required
                                        [(ngModel)]="registerObj.FirstName">
                                    <!-- onkeypress=" (event.charCode > 64 && 
                                            event.charCode < 91) || (event.charCode > 96 && event.charCode < 123)"> -->
                                    <mat-error class="error"
                                        *ngIf="personalFormGroup.get('FirstName').invalid && personalFormGroup.get('FirstName').touched">
                                        First
                                        Name is required Enter
                                        only
                                        Alphabets</mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Middle Name</mat-label>
                                    <input name="MiddleName" formControlName="MiddleName" placeholder="Middle Name"
                                        [ngClass]="{ 'is-invalid': submitted && personalFormGroup.get('MiddleName').errors }"
                                        matInput #mname (keydown)="onEntermname($event)"
                                        [(ngModel)]="registerObj.MiddleName" onkeypress=" (event.charCode > 64 && 
                                            event.charCode < 91) || (event.charCode > 96 && event.charCode < 123)">
                                    <mat-error class="error"
                                        *ngIf="personalFormGroup.get('MiddleName').invalid && personalFormGroup.get('MiddleName').touched">
                                        Middle Name is required
                                        Enter
                                        only Alphabets</mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Last Name</mat-label>
                                    <input name="LastName" formControlName="LastName" placeholder="Last Name"
                                        [ngClass]="{ 'is-invalid': submitted && personalFormGroup.get('LastName').errors }"
                                        matInput #lname (keydown)="onEnterlname($event)" required
                                        [(ngModel)]="registerObj.LastName" onkeypress=" (event.charCode > 64 && 
                                            event.charCode < 91) || (event.charCode > 96 && event.charCode < 123)">
                                    <mat-error class="error"
                                        *ngIf="personalFormGroup.get('LastName').invalid && personalFormGroup.get('LastName').touched">Last
                                        Name is required Enter
                                        only
                                        Alphabets</mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Gender</mat-label>
                                    <mat-select formControlName="GenderId" required>
                                        <mat-option></mat-option>
                                        <mat-option *ngFor="let m of GenderList" [value]="m">
                                            {{m.GenderName}}
                                        </mat-option>
                                    </mat-select>
                                    <mat-error
                                        *ngIf="personalFormGroup.get('GenderId').invalid && personalFormGroup.get('GenderId').touched">
                                        <span *ngIf="personalFormGroup.get('GenderId').hasError('required')">
                                            Gender is required</span>
                                    </mat-error>
                                </mat-form-field>


                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Marital Name</mat-label>
                                    <input matAutocompletePosition="below" type="text" placeholder="Select MaritalStatusId" [(ngModel)]="vMaritalStatusId"
                                        matInput #mstatus (keydown)="onEntermstatus($event)"
                                        formControlName="MaritalStatusId" [matAutocomplete]="autoMarital">
                                    <span matSuffix style="display: flex;">
                                        <mat-icon class="mat-icon-close"
                                            (click)="personalFormGroup.get('MaritalStatusId').setValue(''); isMaritalSelected = false;">close</mat-icon>
                                        <mat-icon class="mat-icon-close"
                                            (click)="personalFormGroup.get('MaritalStatusId').setValue(''); isMaritalSelected = false;">search</mat-icon>
                                    </span>
                                    <mat-autocomplete #autoMarital="matAutocomplete"
                                        [displayWith]="getOptionTextMarital">
                                        <mat-option *ngFor="let option of filteredOptionsMarital | async"
                                            [value]="option">
                                            {{option.MaritalStatusName}}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Religion Name</mat-label>
                                    <input matAutocompletePosition="below" type="text" placeholder="Select Religion" [(ngModel)]="vReligionId"
                                        matInput #religion (keydown)="onEnterreligion($event)"
                                        formControlName="ReligionId" [matAutocomplete]="autoReligion">
                                    <span matSuffix style="display: flex;">
                                        <mat-icon class="mat-icon-close"
                                            (click)="personalFormGroup.get('ReligionId').setValue(''); isReligionSelected = false;">close</mat-icon>
                                        <mat-icon class="mat-icon-close"
                                            (click)="personalFormGroup.get('ReligionId').setValue(''); isReligionSelected = false;">search</mat-icon>
                                    </span>
                                    <mat-autocomplete #autoReligion="matAutocomplete"
                                        [displayWith]="getOptionTextReligion">
                                        <mat-option *ngFor="let option of filteredOptionsReligion | async"
                                            [value]="option">
                                            {{option.ReligionName}}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>

                                <!-- </div> -->

                                <!-- <div fxFlexFill fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="4px"> -->
                                <!-- <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Birth date</mat-label>
                                    <input name="DateOfBirth" matInput [matDatepicker]="picker1"
                                        formControllName="DateOfBirth" #bday (keydown)="onEnterbday($event)"
                                        (dateChange)="onChangeDateofBirth($event.value)"
                                        [value]="registerObj.DateofBirth" [readonly]="true">
                                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                    <mat-datepicker #picker1></mat-datepicker>

                                </mat-form-field> -->
                                <mat-form-field appearance="outline">
                                    <input matInput [matDatepicker]="validFromPicker" formControllName="DateOfBirth" #bday [value]="registerObj.DateofBirth" (keydown)="onEnterbday($event)" 
                                    (dateChange)="onChangeDateofBirth($event.value)" placeholder="mm/dd/yyyy">
                                    <mat-datepicker-toggle matSuffix [for]="validFromPicker"></mat-datepicker-toggle>
                                    <mat-datepicker #validFromPicker></mat-datepicker>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Age (Y)</mat-label>
                                    <input name="AgeYear" formControlName="AgeYear" placeholder="Age (Y)" matInput
                                        min="0" [ngModel]="registerObj.AgeYear"
                                        (ngModelChange)="registerObj.AgeYear = $event" type="number" #agey  (keyup)="ageyearcheck(registerObj.AgeYear)"
                                        (keydown)="onEnteragey($event)" minlength="1" maxlength="4"
                                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,3);">
                                    <mat-error
                                        *ngIf="personalFormGroup.get('AgeYear').invalid && personalFormGroup.get('AgeYear').touched">Please
                                        enter Age Year </mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Age (M)</mat-label>
                                    <input name="AgeMonth" formControlName="AgeMonth" placeholder="Age (M)" matInput
                                        min="0" #agem (keydown)="onEnteragem($event)" [ngModel]="registerObj.AgeMonth" (keyup)="agemonthcheck(registerObj.AgeMonth)"
                                        (ngModelChange)="registerObj.AgeMonth = $event" type="number" minlength="1"
                                        maxlength="2"
                                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,2);">
                                    <mat-error
                                        *ngIf="personalFormGroup.get('AgeMonth').invalid && personalFormGroup.get('AgeMonth').touched">
                                        Please enter Age Month </mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Age (D)</mat-label>
                                    <input name="AgeDay" formControlName="AgeDay" placeholder="Age (D)" matInput min="0" (keyup)="agedaycheck(registerObj.AgeDay)"
                                        minlength="1" #aged (keydown)="onEnteraged($event)" maxlength="2"
                                        [ngModel]="registerObj.AgeDay" (ngModelChange)="registerObj.AgeDay = $event"
                                        type="number"
                                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0,2);">
                                    <mat-error
                                        *ngIf="personalFormGroup.get('AgeDay').invalid && personalFormGroup.get('AgeDay').touched">
                                        Please enter Age Day </mat-error>
                                </mat-form-field>

                                <!-- <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                      <mat-label>Pan Card No.</mat-label>
                      <input name="Pancardno" formControlName="Pancardno" placeholder="PAN Card No." #pan
                        (keydown)="onEnterpan($event)" [ngModel]="registerObj.Pancardno | trim"
                        (ngModelChange)="registerObj.Pancardno = $event" matInput>
                    </mat-form-field> -->

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Pan Card No</mat-label>
                                    <input name="Pancardno" formControlName="Pancardno" placeholder="PanCardNo Number"
                                        matInput [(ngModel)]="registerObj.Pancardno" #pan maxlength="10"
                                        (keydown)="onEnterpan($event)">
                                    <mat-error class="error"
                                        *ngIf="personalFormGroup.get('Pancardno').invalid && personalFormGroup.get('Pancardno').touched">10
                                        digits Pan Card No is required</mat-error>
                                </mat-form-field>


                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>AadharCard Number</mat-label>
                                    <input name="AadharCardNo" formControlName="AadharCardNo"
                                        placeholder="AadharCard Number" matInput [(ngModel)]="registerObj.AadharCardNo"
                                        #AadharCardNo (keydown)="onEnterAadharCardNo($event)"
                                      oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0, 12);">
                                    <mat-error class="error"
                                        *ngIf="personalFormGroup.get('AadharCardNo').invalid && personalFormGroup.get('AadharCardNo').touched">Aadhar
                                        number is required
                                    </mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Mobile Number</mat-label>
                                    <input name="MobileNo" formControlName="MobileNo" placeholder="Mobile Number"
                                        matInput required #mobile (keydown)="onEntermobile($event)"
                                        [(ngModel)]="registerObj.MobileNo"
                                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0, 10);"
                                        required="required"  value="9876658688">
                                    <mat-error class="error"
                                        *ngIf="personalFormGroup.get('MobileNo').invalid && personalFormGroup.get('MobileNo').touched">10
                                        digits Mobile number is
                                        required</mat-error>
                                </mat-form-field>

                                <!-- </div> -->

                                <!-- <div fxFlexFill fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="4px"> -->
                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Address</mat-label>
                                    <input name="Address" formControlName="Address" placeholder="Address" matInput
                                        #address (keydown)="onEnteraddress($event)" [(ngModel)]="registerObj.Address">
                                    <mat-error
                                        *ngIf="personalFormGroup.get('Address').invalid && personalFormGroup.get('Address').touched">Please
                                        enter Address </mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Area Name</mat-label>
                                    <input matAutocompletePosition="below" type="text" placeholder="Select Area" [(ngModel)]="vAreaId"
                                        matInput #area (keydown)="onEnterarea($event)" formControlName="AreaId"
                                        [matAutocomplete]="autoArea">
                                    <span matSuffix style="display: flex;">
                                        <mat-icon class="mat-icon-close"
                                            (click)="personalFormGroup.get('AreaId').setValue(''); isAreaSelected = false;">close</mat-icon>
                                        <mat-icon class="mat-icon-close"
                                            (click)="personalFormGroup.get('AreaId').setValue(''); isAreaSelected = false;">search</mat-icon>
                                    </span>
                                    <mat-autocomplete #autoArea="matAutocomplete" [displayWith]="getOptionTextArea">
                                        <mat-option *ngFor="let option of filteredOptionsArea | async" [value]="option">
                                            {{option.AreaName}}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>City</mat-label>
                                    <input matAutocompletePosition="below" type="text" placeholder="Select City"
                                        matInput #city (keydown)="onEntercity($event,vCityId.CityId)" formControlName="CityId" [(ngModel)]="vCityId"
                                        [matAutocomplete]="autoCity" required>
                                    <span matSuffix style="display: flex;">
                                        <mat-icon class="mat-icon-close"
                                            (click)="personalFormGroup.get('CityId').setValue(''); isCitySelected = false;">close</mat-icon>
                                        <mat-icon class="mat-icon-close"
                                            (click)="personalFormGroup.get('CityId').setValue(''); isCitySelected = false;">search</mat-icon>
                                    </span>
                                    <mat-autocomplete #autoCity="matAutocomplete" [displayWith]="getOptionTextCity1">
                                        <mat-option *ngFor="let option of filteredOptionsCity | async" [value]="option"
                                            (onSelectionChange)="onChangeCityList(option)">
                                            {{option.CityName}}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>State Name</mat-label>
                                    <mat-select formControlName="StateId" name="StateId"
                                        (selectionChange)="onChangeCountryList($event.value)">
                                        <mat-option></mat-option>
                                        <mat-option *ngFor="let m of stateList" [value]="m">
                                            {{m.StateName}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Country Name</mat-label>
                                    <mat-select formControlName="CountryId">
                                        <mat-option></mat-option>
                                        <mat-option *ngFor="let g of countryList" [value]="g">
                                            {{g.CountryName}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <!-- </div> -->


                                <!-- </div> -->
                            </div>
                        </mat-card>
                    </form>
                    <br>
                    <form [formGroup]="hospitalFormGroup" fxLayout="column" style="padding: 0 20px;">
                        <div fxLayout="row" fxLayout.gt-xs="row" fxLayoutGap="4px"
                            class="top-header accent heading-container h-40 border-radius-4">
                            <span style="font-size:15px;font-weight: bolder; color:white;padding:7px;">Hospital
                                Details</span>
                        </div>
                        <mat-card>
                            <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="12px grid" style="padding: 10px 0;">
                                <!-- <mat-form-field appearance="outline" fxFlex="10%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Patient Type</mat-label>
                                    <mat-select formControlName="PatientTypeID"
                                        (selectionChange)="onChangePatient($event.value)" #ptype
                                        (keydown)="onEnterptype($event)" required>
                                        <mat-option *ngFor="let Doc of PatientTypeList" [value]="Doc">
                                            {{Doc.PatientType}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field> -->

                                <mat-form-field appearance="outline">
                                    <mat-label>Patient Type</mat-label>
                                    <input matAutocompletePosition="below" type="text" placeholder="Select Patient Type" matInput #ptype
                                     (keydown)="onEnterptype($event,vPatientTypeID.PatientTypeId)" formControlName="PatientTypeID" [(ngModel)]="vPatientTypeID"
                                     [matAutocomplete]="autoPatientTypeID">
                                    <span matSuffix style="display: flex;">
                                        <mat-icon class="mat-icon-close" (click)="hospitalFormGroup.get('PatientTypeID').setValue(''); ispatienttypeSelected = false;">close</mat-icon>
                                        <mat-icon class="mat-icon-close" (click)="hospitalFormGroup.get('PatientTypeID').setValue(''); ispatienttypeSelected = false;">search</mat-icon>
                                    </span>
                                    <mat-autocomplete #autoPatientTypeID="matAutocomplete" [displayWith]="getOptionTextpatienttype">
                                        <mat-option *ngFor="let option of filteredOptionsPatientType | async" [value]="option" (onSelectionChange)="onChangePatient(option)">
                                            {{option.PatientType}}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>

                                <!-- <mat-form-field appearance="outline" fxFlex="10%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Tariff Name</mat-label>
                                    <mat-select formControlName="TariffId" #tariff (keydown)="onEnterptariff($event)">
                                        <mat-option *ngFor="let Doc of TariffList" [value]="Doc">
                                            {{Doc.TariffName}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field> -->

                                <mat-form-field appearance="outline">
                                    <mat-label>Tariff Name</mat-label>
                                    <input matAutocompletePosition="below" type="text" placeholder="Select Patient Type" matInput 
                                    #tariff (keydown)="onEnterptariff($event,vTariffId.TariffId)" formControlName="TariffId" [matAutocomplete]="autoTariffId" [(ngModel)]="vTariffId">
                                    <span matSuffix style="display: flex;">
                                        <mat-icon class="mat-icon-close" (click)="hospitalFormGroup.get('TariffId').setValue(''); isTariffIdSelected = false;">close</mat-icon>
                                        <mat-icon class="mat-icon-close" (click)="hospitalFormGroup.get('TariffId').setValue(''); isTariffIdSelected = false;">search</mat-icon>
                                    </span>
                                    <mat-autocomplete #autoTariffId="matAutocomplete" [displayWith]="getOptionTextTariff">
                                        <mat-option *ngFor="let option of filteredOptionsTarrif | async" [value]="option">
                                            {{option.TariffName}}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Department</mat-label>
                                    <input matAutocompletePosition="below" type="text" placeholder="Select Department" [(ngModel)]="vDepartmentid"
                                        matInput #dept (keydown)="onEnterdept($event,vDepartmentid.Departmentid)" formControlName="Departmentid"
                                        [matAutocomplete]="autoDep" required>
                                    <span matSuffix style="display: flex;">
                                        <mat-icon class="mat-icon-close"
                                            (click)="hospitalFormGroup.get('Departmentid').setValue(''); isDepartmentSelected = false;">close</mat-icon>
                                        <mat-icon class="mat-icon-close"
                                            (click)="hospitalFormGroup.get('Departmentid').setValue(''); isDepartmentSelected = false;">search</mat-icon>
                                    </span>
                                    <mat-autocomplete #autoDep="matAutocomplete" [displayWith]="getOptionTextDep">
                                        <mat-option *ngFor="let option of filteredOptionsDep | async" [value]="option"
                                            (onSelectionChange)="OnChangeDoctorList(option)">
                                            {{option.departmentName}}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Doctor Name</mat-label>
                                    <input matAutocompletePosition="below" type="text" placeholder="Select Doctor Name"
                                        matInput #deptdoc (keydown)="onEnterdeptdoc($event,vDoctorId.DoctorId)" formControlName="DoctorId" [(ngModel)]="vDoctorId"
                                        [matAutocomplete]="autoDoctor" required>
                                    <span matSuffix style="display: flex;">
                                        <mat-icon class="mat-icon-close"
                                            (click)="hospitalFormGroup.get('DoctorId').setValue(''); isDoctorSelected = false;">close</mat-icon>
                                        <mat-icon class="mat-icon-close"
                                            (click)="hospitalFormGroup.get('DoctorId').setValue(''); isDoctorSelected = false;">search</mat-icon>
                                    </span>

                                    <mat-autocomplete #autoDoctor="matAutocomplete" [displayWith]="getOptionTextDoc">
                                        <mat-option *ngFor="let option of filteredOptionsDoc | async" [value]="option"
                                            (onSelectionChange)="isDoctorSelected = true;">
                                            {{option.Doctorname }} <b>|</b> {{option.DepartmentName }} <b>|</b>
                                            {{option.DoctorId}}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Admitted Doctor 1</mat-label>
                                    <input matAutocompletePosition="below" type="text"
                                        placeholder="Select Admitted Doctor 1" matInput #admitdoc1
                                        (keydown)="onEnteradmitdoc1($event)" formControlName="admittedDoctor1" [(ngModel)]="vadmittedDoctor1"
                                        [matAutocomplete]="autoRefdoc">
                                    <span matSuffix style="display: flex;">
                                        <mat-icon class="mat-icon-close"
                                            (click)="hospitalFormGroup.get('admittedDoctor1').setValue(''); isAdmittedDoctor1Selected = false;">close</mat-icon>
                                        <mat-icon class="mat-icon-close"
                                            (click)="hospitalFormGroup.get('admittedDoctor1').setValue(''); isAdmittedDoctor1Selected = false;">search</mat-icon>
                                    </span>
                                    <mat-autocomplete #autoRefdoc="matAutocomplete" [displayWith]="getOptionTextRefDoc">
                                        <mat-option *ngFor="let option of filteredOptionsRefDoc | async"
                                            [value]="option">
                                            {{option.DoctorName}}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Admitted Doctor 2</mat-label>
                                    <input matAutocompletePosition="below" type="text"
                                        placeholder="Select Admitted Doctor 2 " matInput
                                        formControlName="admittedDoctor2" [matAutocomplete]="autodoc2" #admitdoc2 [(ngModel)]="vadmittedDoctor2"
                                        (keydown)="onEnteradmitdoc2($event)">
                                    <span matSuffix style="display: flex;">
                                        <mat-icon class="mat-icon-close"
                                            (click)="hospitalFormGroup.get('admittedDoctor2').setValue(''); isAdmittedDoctor2Selected = false;">close</mat-icon>
                                        <mat-icon class="mat-icon-close"
                                            (click)="hospitalFormGroup.get('admittedDoctor2').setValue(''); isAdmittedDoctor2Selected = false;">search</mat-icon>
                                    </span>
                                    <mat-autocomplete #autodoc2="matAutocomplete" [displayWith]="getOptionTextDoc2">
                                        <mat-option *ngFor="let option of filteredOptionsDoc2 | async" [value]="option">
                                            {{option.DoctorName}}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Ref Doctor Name</mat-label>
                                    <input matAutocompletePosition="below" type="text" placeholder="Select Ref Doctor "
                                        matInput #refdoc (keydown)="onEnterrefdoc($event)" formControlName="refDoctorId" [(ngModel)]="vrefDoctorId"
                                        [matAutocomplete]="autodoc2">
                                    <span matSuffix style="display: flex;">
                                        <mat-icon class="mat-icon-close"
                                            (click)="hospitalFormGroup.get('refDoctorId').setValue(''); isRefDoctorSelected = false;">close</mat-icon>
                                        <mat-icon class="mat-icon-close"
                                            (click)="hospitalFormGroup.get('refDoctorId').setValue(''); isRefDoctorSelected = false;">search</mat-icon>
                                    </span>
                                    <mat-autocomplete #autodoc2="matAutocomplete" [displayWith]="getOptionTextDoc2">
                                        <mat-option *ngFor="let option of filteredOptionsDoc2 | async" [value]="option">
                                            {{option.DoctorName}}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>

                                <ng-container *ngIf="isCompanySelected">
                                    <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <mat-label>Company Name </mat-label>
                                        <input matAutocompletePosition="below" type="text" placeholder="Select Company" [(ngModel)]="vCompanyId"
                                            matInput formControlName="CompanyId" [matAutocomplete]="autoCompany">
                                        <span matSuffix style="display: flex;">
                                            <mat-icon class="mat-icon-close"
                                                (click)="hospitalFormGroup.get('CompanyId').setValue(''); isCompanyselected = false;">close</mat-icon>
                                            <mat-icon class="mat-icon-close"
                                                (click)="hospitalFormGroup.get('CompanyId').setValue(''); isCompanyselected = false;">search</mat-icon>
                                        </span>
                                        <mat-autocomplete #autoCompany="matAutocomplete"
                                            [displayWith]="getOptionTextCompany">
                                            <mat-option *ngFor="let option of filteredOptionsCompany | async"
                                                [value]="option">
                                                {{option.CompanyName}}
                                            </mat-option>
                                        </mat-autocomplete>
                                        <mat-error
                                        *ngIf="hospitalFormGroup.get('CompanyId').hasError('required')">
                                        Required field cannot be left blank
                                    </mat-error>
                                    </mat-form-field>

                                    <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                        <mat-label>Sub Company Name </mat-label>
                                        <input matAutocompletePosition="below" type="text"
                                            placeholder="Select SubCompany" matInput formControlName="SubCompanyId"
                                            [matAutocomplete]="autoSubCompany" required>
                                        <span matSuffix style="display: flex;">
                                            <mat-icon class="mat-icon-close"
                                                (click)="hospitalFormGroup.get('SubCompanyId').setValue(''); isSubCompanySelected = false;">close</mat-icon>
                                            <mat-icon class="mat-icon-close"
                                                (click)="hospitalFormGroup.get('SubCompanyId').setValue(''); isSubCompanySelected = false;">search</mat-icon>
                                        </span>
                                        <mat-autocomplete #autoSubCompany="matAutocomplete"
                                            [displayWith]="getOptionTextSubCompany">
                                            <mat-option *ngFor="let option of filteredOptionsSubCompany | async"
                                                [value]="option">
                                                {{option.CompanyName}}
                                            </mat-option>
                                        </mat-autocomplete>
                                        <mat-error
                                        *ngIf="hospitalFormGroup.get('SubCompanyId').hasError('required')">
                                        Required field cannot be left blank
                                    </mat-error>
                                    </mat-form-field>
                                </ng-container>
                            </div>
                        </mat-card>
                    </form>
                    <br>
                    <form [formGroup]="wardFormGroup" fxLayout="column" style="padding: 0 20px;">
                        <div fxLayout="row" fxLayout.gt-xs="row" fxLayoutGap="4px"
                            class="top-header accent heading-container h-40 border-radius-4">
                            <span style="font-size:15px; font-weight: bolder; color:white;padding:7px;">Ward
                                Details </span>
                        </div>
                        <mat-card>
                            <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="12px grid" style="padding: 10px 0;">
                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Ward Name</mat-label>
                                    <input matAutocompletePosition="below" type="text" placeholder="Select Ward"
                                        matInput #ward (keydown)="onEnterward($event,vRoomId.RoomId)" formControlName="RoomId" [(ngModel)]="vRoomId"
                                        [matAutocomplete]="autoWard" required>
                                    <span matSuffix style="display: flex;">
                                        <mat-icon class="mat-icon-close"
                                            (click)="wardFormGroup.get('RoomId').setValue(''); isWardSelected = false;">close</mat-icon>
                                        <mat-icon class="mat-icon-close" ward
                                            (click)="wardFormGroup.get('RoomId').setValue(''); isWardSelected = false;">search</mat-icon>
                                    </span>
                                    <mat-autocomplete #autoWard="matAutocomplete" [displayWith]="getOptionTextWard">
                                        <mat-option *ngFor="let option of filteredOptionsWard | async" [value]="option"
                                            (onSelectionChange)="OnChangeBedList(option)">
                                            {{option.RoomName}}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Bed Name</mat-label>
                                    <input matAutocompletePosition="below" type="text" placeholder="Select Bed" matInput
                                        #bed (keydown)="onEnterbed($event,vBedId.BedId)" formControlName="BedId" [(ngModel)]="vBedId"
                                        [matAutocomplete]="autoBed" required>
                                    <span matSuffix style="display: flex;">
                                        <mat-icon class="mat-icon-close"
                                            (click)="wardFormGroup.get('BedId').setValue(''); isWardSelected = false;">close</mat-icon>
                                        <mat-icon class="mat-icon-close"
                                            (click)="wardFormGroup.get('BedId').setValue(''); isWardSelected = false;">search</mat-icon>
                                    </span>
                                    <mat-autocomplete #autoBed="matAutocomplete" [displayWith]="getOptionTextBed">
                                        <mat-option *ngFor="let option of filteredOptionsBed | async" [value]="option"
                                            (onSelectionChange)="onBedChange(option)">
                                            {{option.BedName}}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Class Name</mat-label>
                                    <mat-select formControlName="ClassId" required #class
                                        (keydown)="onEnterclass($event)">
                                        <mat-option></mat-option>
                                        <mat-option *ngFor="let m of BedClassList" [value]="m">
                                            {{m.ClassName}}
                                        </mat-option>
                                    </mat-select>
                                    <mat-error
                                        *ngIf="wardFormGroup.get('ClassId').invalid && wardFormGroup.get('ClassId').touched">
                                        <span *ngIf="wardFormGroup.get('ClassId').hasError('required')">
                                            Class Name is required
                                        </span>
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </mat-card>
                    </form>
                    <br>
                    <form [formGroup]="otherFormGroup" fxLayout="column" style="padding: 0 20px;">
                        <div fxLayout="row" fxLayout.gt-xs="row" fxLayoutGap="4px"
                            class="top-header accent heading-container h-40 border-radius-4">
                            <span style="font-size:15px; font-weight: bolder; color:white;padding:7px;">Other
                                Details</span>
                        </div>
                        <mat-card>
                            <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="12px grid" style="padding: 10px 0;">
                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <input name="RelativeName" formControlName="RelativeName"
                                        placeholder="Relative Name" matInput #relativename
                                        (keydown)="onEnterrelativename($event)">
                                    <mat-error
                                        *ngIf="otherFormGroup.get('RelativeName').invalid && otherFormGroup.get('RelativeName').touched">
                                        Please enter Relative Name </mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Address</mat-label>
                                    <input name="RelativeAddress" formControlName="RelativeAddress"
                                        placeholder="Address" matInput #relativeadd
                                        (keydown)="onEnterrelativeadd($event)">
                                </mat-form-field>

                                <!-- <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Mobile No</mat-label>
                                    <input name="RelatvieMobileNo" formControlName="RelatvieMobileNo"
                                        placeholder="Mobile No" max="9999999999" min="1000000000" maxlength="10"
                                        type="number" value="9876658688" matInput #relativemobile
                                        (keydown)="onEnterrelativemobile($event)">
                                    <mat-error class="error"
                                        *ngIf="otherFormGroup.get('RelatvieMobileNo').invalid && otherFormGroup.get('RelatvieMobileNo').touched">
                                        10
                                        digits Mobile number is
                                        required</mat-error>
                                </mat-form-field> -->
                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Relatvie MobileNo </mat-label>
                                    <input name="RelatvieMobileNo" formControlName="RelatvieMobileNo"
                                        placeholder="Mobile Number" matInput  #mobile
                                        (keydown)="onEnterrelativemobile($event)"
                                        [(ngModel)]="registerObj.RelatvieMobileNo"
                                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').slice(0, 10);"
                                        type="number" value="9876658688" #relativemobile>
                                    <mat-error class="error"
                                        *ngIf="otherFormGroup.get('RelatvieMobileNo').invalid && otherFormGroup.get('RelatvieMobileNo').touched">10
                                        digits Mobile number is
                                        required</mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="20%" fxFlex.xs="100%" fxFlex.sm="33%">
                                    <mat-label>Relationship Name</mat-label>
                                    <input matAutocompletePosition="below" type="text" placeholder="Select Relationship"
                                        matInput #relation formControlName="RelationshipId" [(ngModel)]="vRelationshipId"
                                        [matAutocomplete]="autoRelation">
                                    <span matSuffix style="display: flex;">
                                        <mat-icon class="mat-icon-close"
                                            (click)="otherFormGroup.get('RelationshipId').setValue(''); isRelationshipSelected = false;">close</mat-icon>
                                        <mat-icon class="mat-icon-close"
                                            (click)="otherFormGroup.get('RelationshipId').setValue(''); isRelationshipSelected = false;">search</mat-icon>
                                    </span>
                                    <mat-autocomplete #autoRelation="matAutocomplete"
                                        [displayWith]="getOptionTextRelationship">
                                        <mat-option *ngFor="let option of filteredOptionsRelation | async"
                                            [value]="option">
                                            {{option.RelationshipName}}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>
                            </div>
                        </mat-card>
                        <br>
                        <div class="footer-navigation-container mb-4" fxLayout="row wrap"
                            fxLayoutAlign="space-between center">
                            <div class="checkbox-container">
                                <mat-checkbox aria-label="Remember Me" formControlName="IsMLC">
                                    ISMLC
                                </mat-checkbox>

                                <mat-checkbox aria-label="Op TO Ip Change" formControlName="OPIPChange" style="margin-left:30px;">
                                    OP TO IP Convert
                                </mat-checkbox>
                                
                                <mat-checkbox aria-label="Op TO Ip Change" formControlName="IsCharity" style="margin-left:30px;">
                                    IsCharity
                                </mat-checkbox>
                                <mat-checkbox aria-label="Op TO Ip Change" formControlName="IsSenior" style="margin-left:30px;">
                                    IsSenior
                                </mat-checkbox>
                                <mat-checkbox aria-label="Op TO Ip Change" formControlName="Citizen" style="margin-left:30px;">
                                    Citizen
                                </mat-checkbox>
                                <mat-checkbox aria-label="Op TO Ip Change" formControlName="Emergancy" style="margin-left:30px;">
                                    Emergancy
                                </mat-checkbox>
                               
                                
                            </div>
                            <div class="next-div button-row-group">
                                <button class="btn btn-primary" color="accent" (click)="nextClicked(otherFormGroup)"
                                    [disabled]="personalFormGroup.invalid || hospitalFormGroup.invalid || wardFormGroup.invalid || otherFormGroup.invalid">
                                    <span>Save</span>
                                </button>
                                <button class="btn btn-danger-outline" (click)="onReset()">Reset</button>
                            </div>
                        </div>
                    </form>
                </mat-tab>
            </mat-tab-group>
        </div>
        <!-- </div> -->
    </div>

</div>