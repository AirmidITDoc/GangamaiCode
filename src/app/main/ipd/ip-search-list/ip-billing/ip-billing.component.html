<div fxFlexFill fxLayout="row" fxLayout.gt-xs="column" fxLayoutGap="10px"
    style="background-color: #F5F5F5;height:auto;font-size:18px;">
    <!-- <div class="col-md-12" style="padding:10px;" *ngIf="selectedView == 'Dropdown'"> -->
    <!-- <div style="background-color: white;">
            <button style="height: 40px;padding: 5px; " mat-icon-button class="mr-0 mr-sm-16" [routerLink]="'/ipd/add-billing'">
                <mat-icon>arrow_back</mat-icon>
                <span> Ip List</span>
            </button>
        </div> -->

    <div class="header accent p-10 p-sm-20" fxLayout="column" fxLayoutAlign="start" fxLayout.gt-xs="row"
        fxLayoutAlign.gt-xs="space-between center " style="height:40px;">

        <!-- APP TITLE -->
        <div fxLayout="row" fxLayoutAlign="space-between center" style="width: 100%;">
            <!-- <mat-icon class="logo-icon mr-16" [@animate]="{value:'*',params:{delay:'50ms',scale:'0.2'}}">account_box
                </mat-icon> -->

            <span [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}"
                style="font-size: 20px; font-weight: 500;width:80%;">
                IP BILLING : &nbsp;
                <span> RegNo - {{selectedAdvanceObj.RegNo}} - {{selectedAdvanceObj.PatientName}}</span>
            </span>
            <!-- <span  >RegNo : </span>
                <span >{{selectedAdvanceObj.RegNo}}</span>
                <span  >{{selectedAdvanceObj.PatientName}}</span>&nbsp; -->

            <span style="float: right;background: white;color: black;">
                <app-common-date [screenFrom]="screenFromString" (dateTimeEventEmitter)="getDateTime($event)">
                </app-common-date>
            </span>

            <button mat-icon-button [mat-dialog-close]="true" tabIndex="-1" aria-label="Close dialog">
                <mat-icon>close</mat-icon>
            </button>
        </div>

    </div>

    <!-- <mat-toolbar style="background-color: #039be5 !important; height:40px; justify-content: space-between;width: 100%;">
        

            <div fxLayout="row"  fxLayoutAlign="space-between center" >
              
            
              <span class="logo-text h1" [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}" style="font-size:18px ;margin-top: 10px;" >
                IP BILLING 
                
              </span>
           
            </div>
        
          </mat-toolbar> -->

    <mat-drawer-container class="example-container">
        <mat-drawer #drawer class="example-sidenav" mode="side" [opened]="true" style="width:17%;font-size:18px;">
            <form class="example-form" [formGroup]="registeredForm">

                <div class="col-md-6">
                    <mat-form-field appearance="outline">
                        <mat-label>Billing Class Name</mat-label>
                        <mat-select formControlName="ClassId">
                            <mat-option *ngFor="let Bclass of BillingClassCmbList" [value]="Bclass">
                                {{Bclass.ClassName}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div class="col-md-6">
                    <mat-form-field appearance="outline" style="width:90%;">
                        <input type="text" name="SrvcName" formControlName="SrvcName" placeholder="ServiceId" matInput
                            [matAutocomplete]="auto" (input)="getServiceListCombobox()" required>

                        <mat-autocomplete #auto="matAutocomplete" [displayWith]="getOptionText" showPanel="true"
                            (optionsScroll)="onScroll()" (optionSelected)='getSelectedObj($event.option.value)'>
                            <mat-option *ngFor="let option of filteredOptions" [value]="option">
                                {{option.ServiceName}}
                            </mat-option>
                        </mat-autocomplete>
                        <mat-hint>
                            <span *ngIf="!noOptionFound">Select Service Name</span>
                            <span *ngIf="noOptionFound" style="color: #f44336;">No data
                                Found</span>
                        </mat-hint>
                        <mat-error *ngIf="registeredForm.get('SrvcName').hasError('required')">
                            Required field cannot be left blank
                        </mat-error>
                    </mat-form-field>

                </div>


                <div class="container">
                    <div class="row" style="display: flex;">
                        <div class="col-md-6" style="width: 48%;">
                            <mat-form-field appearance="outline">
                                <mat-label>Price</mat-label>
                                <input matInput [(ngModel)]="b_price" name="bPrice" (keyup)="calculateTotalAmt()"
                                    formControlName="price" required type="number">
                                <mat-error
                                    *ngIf="registeredForm.get('price').invalid && registeredForm.get('price').touched">
                                    Price is required</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="col-md-6" style="width: 48%;">
                            <mat-form-field appearance="outline">
                                <mat-label>Qty</mat-label>
                                <input matInput [(ngModel)]="b_qty" name="bQty" (keyup)="calculateTotalAmt()"
                                    formControlName="qty" required type="number">
                                <mat-error
                                    *ngIf="registeredForm.get('qty').invalid && registeredForm.get('qty').touched">
                                    Qty is required</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <mat-form-field appearance="outline">
                        <mat-label>TotalAmt</mat-label>
                        <input matInput [(ngModel)]="b_totalAmount" name="bTotalAmt" readonly
                            formControlName="totalAmount" required>
                        <mat-error
                            *ngIf="registeredForm.get('totalAmount').invalid && registeredForm.get('totalAmount').touched">
                            TotalAmount is required</mat-error>
                    </mat-form-field>
                </div>
                <div class="col-md-6" *ngIf="isDoctor">
                    <!-- <mat-form-field appearance="outline">
                        <mat-label>Doctor Name</mat-label>
                        <mat-select formControlName="doctorId">
                            <mat-option *ngFor="let Doc of doctorNameCmbList" [value]="Doc">
                                {{Doc.DoctorName}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field> -->

                    <mat-form-field appearance="outline">
                        <mat-label>Doctor Name</mat-label>
                        <mat-select formControlName="DoctorID" placeholder="Bank" #singleSelect>
                            <mat-option>
                                <ngx-mat-select-search [formControl]="doctorFilterCtrl" [placeholderLabel]="'Search'"
                                    [noEntriesFoundLabel]="'No matching found'"></ngx-mat-select-search>
                            </mat-option>
                            <mat-option *ngFor="let element of filteredDoctor | async" [value]="element">
                                {{element.DoctorName}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <br>
                </div>
                <div class="container">
                    <div class="row" style="display: flex;">
                        <div class="col-md-6" style="width: 48%;">
                            <mat-form-field appearance="outline">
                                <mat-label>Disc %</mat-label>
                                <input matInput [(ngModel)]="formDiscPersc" name="formDiscPer"
                                    (keyup)="calculatePersc()" formControlName="discPer" type="number">
                            </mat-form-field>
                        </div>
                        <div class="col-md-6" style="width: 48%;">
                            <mat-form-field appearance="outline">
                                <mat-label>Disc Amt</mat-label>
                                <input matInput [(ngModel)]="b_disAmount" name="bDisAmount" formControlName="discAmount"
                                    type="number">
                            </mat-form-field>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <mat-form-field appearance="outline">
                        <mat-label>NetAmount</mat-label>
                        <input matInput [(ngModel)]="b_netAmount" name="bNetAmount" readonly formControlName="netAmount"
                            required type="number">
                        <mat-error
                            *ngIf="registeredForm.get('netAmount').invalid && registeredForm.get('netAmount').touched">
                            NetAmount is required</mat-error>
                    </mat-form-field>
                </div>
                <div class="col-md-6">
                    <button class="next-btn" (click)="onSaveEntry()" [disabled]="registeredForm.invalid"
                        style="border-radius: 16px;">
                        <span style="display: flex;justify-content: center; ">
                            Save <mat-spinner *ngIf="isLoading == 'save'" class="spinner" [diameter]="25" color="white">
                            </mat-spinner>
                        </span>
                    </button>

                </div>
                &nbsp; &nbsp;
                <div>

                    <div fxLayout="row" fxLayout.gt-xs="row" fxLayoutGap="4px" fxLayoutAlign="space-between"
                        style=" height: 35px;background-color: #33b5e5">
                        <span style="font-size:18px; font-weight: 500; color:white;padding:5px;">Bill Summary </span>

                    </div>
                    <div style="padding: 5px;">

                        <mat-form-field appearance="outline" style="background: rgb(225, 240, 202);">
                            <mat-label style="font-weight: bold;font-size:20px;">Bill Amount</mat-label>
                            <input matInput [(ngModel)]="netPaybleAmt" formControlName="FinalAmount" name="netPaybleAmt"
                                readonly style="font-weight:500;font-size: 15px;text-align: right;">

                        </mat-form-field>
                        <mat-form-field appearance="outline" style="background: rgb(225, 240, 202);">
                            <mat-label style="font-weight: bold;font-size: 18px;">Advance Amount</mat-label>
                            <input matInput [(ngModel)]="netPaybleAmt" formControlName="FinalAmount" name="netPaybleAmt"
                                readonly style="font-weight:500;font-size: 15px;text-align: right;">

                        </mat-form-field>
                        <mat-form-field appearance="outline" style="background: rgb(225, 240, 202);">
                            <mat-label style="font-weight: bold;font-size: 18px;">Balance Amount</mat-label>
                            <input matInput [(ngModel)]="netPaybleAmt" formControlName="FinalAmount" name="netPaybleAmt"
                                readonly style="font-weight:500;font-size: 15px;text-align: right;">

                        </mat-form-field>
                        <mat-form-field appearance="outline" style="background: rgb(225, 240, 202);">
                            <mat-label style="font-weight: bold;font-size: 18px;">Pharmacy Amount</mat-label>
                            <input matInput [(ngModel)]="netPaybleAmt" formControlName="FinalAmount" name="netPaybleAmt"
                                readonly style="font-weight:500;font-size: 15px;text-align: right;">

                        </mat-form-field>
                    </div>
                </div>
            </form>
        </mat-drawer>



        <div class="example-sidenav-content" style="padding-left: 10px;">
            <!-- <div fxFlex> -->

            <!-- <div class="top-heading">
                <span class="material-icons" style="cursor: pointer; margin-right: 6px;" (click)="drawer.toggle()">
                    arrow_back
                </span>
                  <span class="material-icons" style="cursor: pointer; margin-right: 6px;" (click)="drawer.toggle()">
                    menu
                </span>  
                <span class="ip-billing" style="margin-right: 10px;background-color:#039BE5; color: white;">IP
                    BILLING</span>
            </div> -->

            <div class="row" style="width:100%;">
                <!-- <mat-card > -->
                <div>
                    <div fxFlexFill fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="5px">
                        <form style="width: 100%;height: auto;">
                            <div fxFlex.gt-sm="100%" fxFlex>
                                <div fxlayout="row" style="background-color: white; padding: 3px 3px 3px 3px;">
                                    <!-- ================================ LABEL HEADER  -->
                                    <mat-card fxFlex.gt-sm="100%" fxFlex
                                        style="padding: 0 9px; height: fit-content;width: 100%;">
                                        <div fxFlexFill fxLayout="column" fxLayout.gt-xs="row"
                                            fxLayoutAlign="space-between">
                                            <h3 class="labels"
                                                style="font-weight: 700; margin: 0 0 0px;margin-left:10px;">Patient
                                                Information:
                                            </h3>
                                        </div>
                                        <div class="reg-field">

                                            <!-- <span class="labels" style="margin-left: 15px;font-weight: bold;">RegNo : </span>
                                                <span class="label-value" style="margin-right: 10px;">{{selectedAdvanceObj.RegNo}}</span>
                                              
                                               
                                                <span class="labels" style="margin-left: 15px;font-weight: bold;">Patient Name :</span>
                                                <span class="label-value" >{{selectedAdvanceObj.PatientName}}</span>&nbsp; -->




                                            <span class="labels" style="margin-left: 15px;font-weight: bold; ">Doctor
                                                Name :</span>
                                            <span
                                                class="label-value">{{selectedAdvanceObj.Doctorname}}</span>&nbsp;&nbsp;

                                            <span class="labels"
                                                style="margin-left: 15px;font-weight: bold; ">IPDNO:</span>
                                            <span class="label-value">{{selectedAdvanceObj.IPDNo}}</span>&nbsp;&nbsp;

                                            <span class="labels" style="margin-left: 15px;font-weight: bold; ">Admission
                                                Date :</span>
                                            <span
                                                class="label-value">{{selectedAdvanceObj.AdmDateTime}}</span>&nbsp;&nbsp;

                                            <span class="labels" style="margin-left: 15px;font-weight: bold; ">Ward
                                                Name:</span>
                                            <span class="label-value">{{selectedAdvanceObj.WardName}} -
                                                {{selectedAdvanceObj.BedName}}</span>&nbsp;&nbsp;

                                            <span class="labels" style="margin-right: 15px;font-weight: bold;"> Tariff
                                                Name :</span>
                                            <span class="label-value"
                                                style="margin-right: 10px;">{{selectedAdvanceObj.TariffName}}</span>


                                        </div>

                                    </mat-card>
                                    <!-- ================================ LABEL HEADER  -->
                                </div>

                            </div>
                        </form>
                    </div>
                </div>


            </div>

            <mat-tab-group mat-align-tabs="start" class="tabs-group" mat-stretch-tabs style="margin-right: 7px">

                <mat-card>
                    <mat-tab label="Charges List" style="margin-left: 7px;">
                        <!-- <div matColumnDef="loading" [ngClass]="{'hide': !(isLoading == 'list-loading')}" class="backgroundBlur" >
                        <div class="spinner-border text-danger" ></div> 
                   
                   </div> -->
                        <!-- (change)="khhhh = $event.checked" -->
                        <div class="filter-div" style="display: flex; align-items: center;">
                            <mat-checkbox [(ngModel)]="isFilteredDateDisabled" (change)="getDatewiseChargesList()"
                                aria-label="Remember Me" style="margin-right: 20px;">
                                Show All Charges
                            </mat-checkbox>
                            <div>
                                <form [formGroup]="registeredForm">


                                    <!-- (dateChange)="onChangeDateofBirth($event.value)" -->
                                    <mat-form-field appearance="outline" fxFlex>
                                        <mat-label>Choose date</mat-label>
                                        <input name="currentDate" matInput [matDatepicker]="picker"
                                            formControllName="ChargeDate" [(ngModel)]="currentDate">
                                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                        <mat-datepicker #picker></mat-datepicker>

                                    </mat-form-field>
                                </form>
                            </div>

                            <span class="material-icons" (click)="drawer1.toggle()"
                                style="cursor: pointer;color: #6b6565;">
                                notifications_none
                            </span>


                        </div>
                        <mat-table #table matSort [dataSource]="dataSource" [@animateStagger]="{value:'50'}"
                            style="overflow:auto;" class="mat-data-table">
                            <ng-container matColumnDef="checkbox" sticky>
                                <mat-header-cell *matHeaderCellDef mat-sort-header>
                                    <span class="material-icons" (click)="getChargesList()">
                                        cached
                                    </span>
                                </mat-header-cell>
                                <mat-cell *matCellDef="let contact">
                                    <mat-checkbox aria-label="Checked" (change)="tableElementChecked($event, contact)">
                                    </mat-checkbox>
                                </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="ChargesDate">
                                <mat-header-cell *matHeaderCellDef mat-sort-header>ChargesDate</mat-header-cell>
                                <mat-cell *matCellDef="let contact">
                                    {{contact.ChargesDate}}
                                </mat-cell>
                            </ng-container>

                            <ng-container matColumnDef="ServiceName">
                                <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>Service Name
                                </mat-header-cell>
                                <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                    {{contact.ServiceName}}
                                </mat-cell>
                            </ng-container>

                            <ng-container matColumnDef="Price">
                                <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>Price
                                </mat-header-cell>
                                <mat-cell *matCellDef="let contact" fxShow.gt-sm>

                                    <mat-form-field appearance="legacy">
                                        <input matInput [(ngModel)]="contact.Price" (keyup)="getTotalAmount(contact)">
                                        <span matPrefix>₹</span>

                                    </mat-form-field>
                                </mat-cell>
                            </ng-container>

                            <ng-container matColumnDef="Qty">
                                <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>Qty
                                </mat-header-cell>
                                <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                    <mat-form-field appearance="legacy">
                                        <input matInput [(ngModel)]="contact.Qty" (keyup)="getTotalAmount(contact)">
                                    </mat-form-field>
                                </mat-cell>
                            </ng-container>

                            <ng-container matColumnDef="TotalAmt">
                                <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>Total Amt
                                </mat-header-cell>
                                <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                    {{contact.TotalAmt | currency:'INR' }}
                                </mat-cell>
                            </ng-container>

                            <ng-container matColumnDef="DiscPer">
                                <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>Disc %
                                </mat-header-cell>
                                <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                    <mat-form-field appearance="legacy">
                                        <input matInput [(ngModel)]="contact.ConcessionPercentage"
                                            (keyup)="getDiscAmount(contact)">
                                    </mat-form-field>
                                </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="DiscAmt">
                                <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>Disc Amt
                                </mat-header-cell>
                                <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                    <mat-form-field appearance="legacy">
                                        <input matInput [(ngModel)]="contact.DiscAmt" (keyup)="getDiscValue(contact)">
                                        <span matPrefix>₹</span>
                                    </mat-form-field>

                                </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="NetAmount">
                                <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>NetAmount
                                </mat-header-cell>
                                <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                    {{contact.NetAmount | currency:'INR' }}
                                </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="DoctorName">
                                <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>ChargeDoctorName
                                </mat-header-cell>
                                <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                    {{contact.DoctorName}}
                                </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="ClassId">
                                <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm class="accent">ClassId
                                </mat-header-cell>
                                <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                    {{contact.ClassId}}
                                </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="ClassName">
                                <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm class="accent">ClassName
                                </mat-header-cell>
                                <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                    {{contact.ClassName}}
                                </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="ChargesAddedName">
                                <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>ChargesAddedName
                                </mat-header-cell>
                                <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                    {{contact.ChargesAddedName}}
                                </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="buttons" stickyEnd>
                                <mat-header-cell *matHeaderCellDef class="table-actions" style="color: red;">Action
                                </mat-header-cell>
                                <mat-cell *matCellDef="let contact">
                                    <ng-container class="actions">
                                        <span class="material-icons" style="cursor: pointer;color: #5b5858;">
                                            edit
                                        </span>
                                        <span class="material-icons" style="cursor: pointer;color: #5b5858;"
                                            (click)="deleteTableRow(contact)">
                                            delete
                                        </span>
                                    </ng-container>

                                </mat-cell>
                            </ng-container>

                            <ng-container matColumnDef="loading">
                                <mat-header-cell *matFooterCellDef colspan="6" style="display: none;">
                                </mat-header-cell>
                            </ng-container>

                            <!-- <ng-container matColumnDef="noData">
                            <mat-footer-cell *matFooterCellDef colspan="6">
                                <mat-spinner class="spinner" [diameter]="35" [color]="blue"></mat-spinner>
                            </mat-footer-cell>
                        </ng-container> -->

                            <ng-container matColumnDef="noData">
                                <mat-footer-cell *matFooterCellDef colspan="6">

                                    <mat-spinner *ngIf="isLoadingStr=='loading'" [diameter]='30'>
                                    </mat-spinner>
                                    <span *ngIf="isLoadingStr=='no-data'">No data found...</span>
                                </mat-footer-cell>
                            </ng-container>

                            <mat-header-row class="accent" *matHeaderRowDef="displayedColumns; sticky: true">
                            </mat-header-row>
                            <mat-row *matRowDef="let contact; columns: displayedColumns;"
                                [ngClass]="{'row-yellow': contact.ServiceName == 'CBC'}"
                                [@animate]="{value:'*',params:{y:'100%'}}"></mat-row>
                            <mat-footer-row *matFooterRowDef="['loading']" [ngClass]="{'hide':dataSource!=null}">
                            </mat-footer-row>
                            <mat-footer-row *matFooterRowDef="['noData']"
                                [ngClass]="{'hide':!(dataSource!=null && dataSource.data.length==0)}">
                            </mat-footer-row>
                        </mat-table>
                    </mat-tab>


                </mat-card>

            </mat-tab-group>

            <div class="table-footer">

                <div class="net-amt">
                    <span class="net-amt-label">No of Items:</span>&nbsp;<span class="net-amt-value"
                        style="margin-right: 650px;">{{chargeslist.length }}</span>&nbsp;&nbsp;&nbsp;&nbsp;
                    <!-- <span class="net-amt-label">Net Amount:</span>&nbsp; -->
                    <span class="net-amt-value">{{getNetAmtSum(dataSource.data) | currency:'INR' }}</span>
                </div>
            </div>

        </div>

        <form class="example-form" [formGroup]="registeredForm" style="font-size:20px;">
            <mat-card style="width: 100%;font-size: large;">
                <div class="footer-container" fxLayoutAlign="start center" style="padding:3px 3px 3px 3px;">

                    <div class="row row-container" style="width: 100%;">
                        <!-- <div class="som"> -->
                        <div class=" amount-section" style="width: 100%;margin-left: 5px;">
                            <div fxLayout="row">

                                <mat-form-field class="cdk-visually-hidden" appearance="outline"
                                    style=" width: 120px; margin-left: 5px;">
                                    <mat-label>Total Amount</mat-label>
                                    <input matInput [(ngModel)]="totalAmtOfNetAmt" name="totalAmtOfNetAmt"
                                        formControlName="TotalAmt" readonly
                                        style="font-weight:bold;font-size: 15px;text-align: right;">
                                </mat-form-field>&nbsp;


                                <mat-form-field appearance="outline" style="width: 120px;">
                                    <mat-label>Net Amount</mat-label>
                                    <input matInput [(ngModel)]="netPaybleAmt" formControlName="FinalAmount"
                                        name="netPaybleAmt" readonly required
                                        style="font-weight:bold;font-size: 15px;text-align: right;">
                                </mat-form-field>&nbsp;

                                <div>
                                    <mat-form-field appearance="outline" style="margin-right: 7px;width: 120px;">
                                        <mat-label>Concession Amount</mat-label>
                                        <input matInput [(ngModel)]="concessionAmtOfNetAmt" name="concessionAmtOfNetAmt"
                                            formControlName="concessionAmt" (keyup)="getNetAmount()"
                                            style="font-weight:bold;font-size: 15px;text-align: right;">
                                    </mat-form-field>

                                    <mat-form-field appearance="outline" style="width: 120px;">
                                        <mat-label>Net Amount</mat-label>
                                        <input matInput [(ngModel)]="FinalAmountpay" formControlName="FinalAmountpay"
                                            name="FinalAmountpay" readonly
                                            style="font-weight:bold;font-size: 15px;text-align: right;">
                                    </mat-form-field>&nbsp;


                                </div>


                                <mat-form-field appearance="outline" style=" margin-right: 7px;width: 250px; ">
                                    <mat-label>Concession Reason Type</mat-label>
                                    <mat-select formControlName="ConcessionId" [disabled]="Consession">
                                        <mat-option *ngFor="let Doc of ConcessionReasonList" [value]="Doc">
                                            {{Doc.ConcessionReason}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field appearance="outline" style=" margin-right: 7px;width: 320px;">
                                    <mat-label>Remark</mat-label>
                                    <input matInput name="Remark" formControlName="Remark">
                                </mat-form-field>
                                <mat-radio-group aria-label="Select an option">
                                    <mat-radio-button value="3" checked="true">Summary</mat-radio-button>
                                    <mat-radio-button value="2">Details</mat-radio-button><br>
                                    <mat-radio-button value="1">Draft Bill Date Wise</mat-radio-button>

                                </mat-radio-group>

                                <mat-checkbox aria-label="Remember Me" formControlName="GenerateBill" (checked)=false>
                                    Generate Bill
                                </mat-checkbox>

                            </div>

                            <div fxLayout="row" style="width: 100%;margin-top: 3px;">
                                <div class="admini-checkbox" style="margin-top: 10px;">
                                    <mat-checkbox class="labels-style" formControlName="AdminCharges"
                                        (change)='Adminchargeselect($event)' aria-label="Administrative Charges"
                                        style="font-weight: bold;">
                                        Admin Charges
                                    </mat-checkbox>
                                </div>&nbsp;

                                <!-- <div class="admini-checkbox" style="margin-top: 10px;">
                                    <mat-checkbox class="labels-style" formControlName="Iscredited"
                                         aria-label="Administrative Charges"
                                        style="font-weight: bold;">
                                        Iscredited
                                    </mat-checkbox>
                                </div>&nbsp; -->

                                <div style="display: flex;width:40%; " *ngIf="Admincharge">
                                    <!-- <div class="admini-checkbox" style="margin-top: 10px;">
                                        <mat-checkbox class="labels-style" formControlName="AdminCharges"
                                            (change)='Adminchargeselect($event)' aria-label="Administrative Charges">
                                            Admin Charges
                                        </mat-checkbox>
                                    </div>&nbsp; -->
                                    <mat-form-field appearance="outline" style=" margin-left: 15px;width:90px;">
                                        <mat-label>%</mat-label>
                                        <input matInput name="Percentage" formControlName="Percentage" placeholder="0"
                                            (change)='CalAdmincharge($event)' type="number">
                                    </mat-form-field>
                                    <mat-form-field appearance="outline" style=" width:90px;">
                                        <mat-label>Amount</mat-label>
                                        <input matInput name="Amount" formControlName="Amount" placeholder="0"
                                            type="number" [(ngModel)]="Adminamt">
                                    </mat-form-field>


                                </div>

                                <div style="text-align: right;margin-left:400px;">

                                    <button class="next-btn" (click)="getInterimData()"
                                        style="border-radius: 16px;width: 80px;">Interim</button>
                                    <button class="next-btn" (click)="onSave()" style="border-radius: 16px;">
                                        Save
                                    </button>

                                    <button class="footer-btn" (click)="onClose()" [routerLink]="'/ipd/add-billing'"
                                        style="border-radius: 16px;width: 80px;">Cancel</button>
                                </div>

                            </div>

                        </div>

                    </div>

                </div>
            </mat-card>
        </form>
    </mat-drawer-container>




</div>
<mat-drawer #drawer1 class="example-sidenav" id="showTable" mode="side" position="end"
    style="height: 530px !important;margin-top: 120px !important;margin-right: 40px;font-size: medium;">
    <mat-card>
        <div class="service-table1">
            <mat-table #table matSort [dataSource]="dataSource1" [@animateStagger]="{value:'50'}"
                style="overflow:auto;height: 540px !important;">

                <ng-container matColumnDef="ServiceName">
                    <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>Service Name
                    </mat-header-cell>
                    <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                        {{contact.ServiceName}}
                    </mat-cell>
                </ng-container>

                <!-- <ng-container matColumnDef="Price">
                <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>Price
                </mat-header-cell>
                <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                    <mat-form-field appearance="legacy">
                        <input matInput [(ngModel)]="contact.Price" (keyup)="getTotalAmount(contact)">
                        <span matPrefix>₹</span>
                    </mat-form-field>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="Qty">
                <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>Qty
                </mat-header-cell>
                <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                    <mat-form-field appearance="legacy">
                        <input matInput [(ngModel)]="contact.Qty" (keyup)="getTotalAmount(contact)">
                    </mat-form-field>
                </mat-cell>
            </ng-container> -->

                <ng-container matColumnDef="loading">
                    <mat-footer-cell *matFooterCellDef colspan="6">
                        loading data...
                    </mat-footer-cell>
                </ng-container>

                <ng-container matColumnDef="noData">
                    <mat-footer-cell *matFooterCellDef colspan="6">
                        no data found...
                    </mat-footer-cell>
                </ng-container>

                <mat-header-row class="accent" *matHeaderRowDef="tableColumns; sticky: true">
                </mat-header-row>
                <mat-row *matRowDef="let contact; columns: tableColumns;" [@animate]="{value:'*',params:{y:'100%'}}"
                    (dblclick)="AddList(contact)">
                </mat-row>
                <mat-footer-row *matFooterRowDef="['loading']" [ngClass]="{'hide':dataSource1!=null}">
                </mat-footer-row>
                <mat-footer-row *matFooterRowDef="['noData']"
                    [ngClass]="{'hide':!(dataSource1!=null && dataSource1.data.length==0)}">
                </mat-footer-row>
            </mat-table>
        </div>
    </mat-card>
</mat-drawer>

///
