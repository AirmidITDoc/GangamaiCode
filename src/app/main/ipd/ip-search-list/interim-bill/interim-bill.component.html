<div fusePerfectScrollbar>

    <div class="header accent p-10 p-sm-20" fxLayout="column" fxLayoutAlign="start" fxLayout.gt-xs="row"
        fxLayoutAlign.gt-xs="space-between center " style="height: 35px;">

        <!-- APP TITLE -->
        <div fxLayout="row" fxLayoutAlign="space-between center " style="width: 100%;">
            <!-- <mat-icon class="logo-icon mr-16" [@animate]="{value:'*',params:{delay:'50ms',scale:'0.2'}}">account_box
        </mat-icon> -->

            <span [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}"
                style="font-size: 20px;width: 82%; font-weight: 400;">
                Interim Of BILL
            </span>

            <button mat-icon-button [mat-dialog-close]="true" tabIndex="-1" aria-label="Close dialog">
                <mat-icon>close</mat-icon>
            </button>
        </div>

    </div>

    <!--Middle Data-->
    <div class="content">
        <!-- CENTER -->
        <div class="center p-24 pb-56">
            <!-- CONTENT -->
            <div class="content-card">
                <div fxFlexFill fxLayout="column" fxLayoutGap="10px">
                    <div fxFlex.gt-sm="100%" fxFlex fxLayoutGap="10px">

                        <div fxlayout="row">

                            <div fxFlex.gt-sm="80%" fxFlex fxLayoutGap="5px"
                                style="background-color: white; padding: 5px 5px 5px 5px;">
                                <mat-card style="width:100%;">
                                    <div matColumnDef="loading" [ngClass]="{'hide': !(isLoading == 'list-loading')}"
                                        class="backgroundBlur">
                                        <div class="spinner-border text-danger"></div>
                                        <app-common-date [screenFrom]="screenFromString"
                                            (dateTimeEventEmitter)="getDateTime($event)">
                                        </app-common-date>
                                    </div>
                                    <mat-table #table matSort [dataSource]="dataSource" [@animateStagger]="{value:'50'}"
                                        style="overflow:auto;height: 350px !important;" class="mat-data-table">


                                        <ng-container matColumnDef="ChargesDate">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header>ChargesDate
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact">
                                                {{contact.ChargesDate}}
                                            </mat-cell>
                                        </ng-container>

                                        <ng-container matColumnDef="ServiceName">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>Service Name
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.ServiceName}}
                                            </mat-cell>
                                        </ng-container>


                                        <!-- <ng-container matColumnDef="Price">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>Price
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                               
                                                <mat-form-field appearance="legacy">
                                                    <input matInput [(ngModel)]="contact.Price"
                                                        (keyup)="getTotalAmount(contact)">
                                                    <span matPrefix>â‚¹</span>
                                                                                                    </mat-form-field>
                                            </mat-cell>
                                        </ng-container> -->

                                        <ng-container matColumnDef="Price">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>Price
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.Price}}
                                            </mat-cell>
                                        </ng-container>

                                        <ng-container matColumnDef="Qty">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>Qty
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.Qty}}
                                            </mat-cell>
                                        </ng-container>

                                        <ng-container matColumnDef="TotalAmt">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>TotalAmt
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.TotalAmt}}
                                            </mat-cell>
                                        </ng-container>


                                        <ng-container matColumnDef="DiscPer">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>DiscPer
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.DiscPer}}
                                            </mat-cell>
                                        </ng-container>


                                        <ng-container matColumnDef="DiscAmt">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>DiscAmt
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.DiscAmt}}
                                            </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="NetAmount">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>NetAmount
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.NetAmount | currency:'INR' }}
                                            </mat-cell>
                                        </ng-container>

                                        <ng-container matColumnDef="ChargeDoctorName">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>
                                                ChargeDoctorName
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.DoctorName}}
                                            </mat-cell>
                                        </ng-container>

                                        <ng-container matColumnDef="ClassName">
                                            <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>ClassName
                                            </mat-header-cell>
                                            <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                                {{contact.ClassName}}
                                            </mat-cell>
                                        </ng-container>



                                        <ng-container matColumnDef="loading">
                                            <mat-header-cell *matFooterCellDef colspan="6" style="display: none;">
                                            </mat-header-cell>
                                        </ng-container>

                                        <ng-container matColumnDef="noData">
                                            <mat-footer-cell *matFooterCellDef colspan="6">
                                                <!-- <mat-spinner *ngIf="isLoading == 'list-loading'" class="spinner" [diameter]="35"
                                                [color]="blue"></mat-spinner> -->
                                                <span *ngIf="isLoading == 'list-loaded'">No Data Found</span>
                                            </mat-footer-cell>
                                        </ng-container>

                                        <mat-header-row class="accent"
                                            *matHeaderRowDef="displayedColumns; sticky: true">
                                        </mat-header-row>
                                        <mat-row *matRowDef="let contact; columns: displayedColumns;"
                                            [ngClass]="{'row-yellow': contact.ServiceName == 'CBC'}"
                                            [@animate]="{value:'*',params:{y:'100%'}}"></mat-row>
                                        <mat-footer-row *matFooterRowDef="['loading']"
                                            [ngClass]="{'hide':dataSource!=null}">
                                        </mat-footer-row>
                                        <mat-footer-row *matFooterRowDef="['noData']"
                                            [ngClass]="{'hide':!(dataSource!=null && dataSource.data.length==0)}">
                                        </mat-footer-row>
                                    </mat-table>

                                    <div class="table-footer">

                                        <div class="net-amt">
                                            <span class="net-amt-label">No of Items:</span>&nbsp;<span
                                                class="net-amt-value" style="margin-right: 420px;">{{interimArray.length
                                                }}</span>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <span class="net-amt-label" style="margin-right:10px;">Net
                                                Amount:</span>&nbsp;
                                            <span class="net-amt-value">{{getNetAmtSum(dataSource.data) | currency:'INR'
                                                }}</span>
                                        </div>

                                    </div>
                                </mat-card>
                            </div>


                            <!-- <br> -->
                            <div fxFlex.gt-sm="25%" fxFlex fxLayoutGap="5px"
                                style="background-color: white; padding: 3px 3px 3px 3px;border: rgb(247, 218, 218) 1px solid; padding:5px;">
                                <mat-card fxFlex.gt-sm="100%" fxFlex
                                    style="padding: 0 9px; height: fit-content;height:300px !important;">
                                    <div class="bill-amts" fxFlexFill fxLayout="column">
                                        <form [formGroup]="InterimFormGroup" style="width:100%;">
                                            <br>

                                            <div style="margin-bottom: 7px;">
                                                <div fxLayoutAlign=" start  end"
                                                    style="margin-right:0px;float: left;font-size: 12px bolder; color: black;">
                                                    Total Amount:
                                                </div>

                                                &nbsp;<span class="net-amt-value">{{getNetAmtSum(dataSource.data)|
                                                    currency:'INR'}}</span>
                                            </div>
                                            <div>
                                                <mat-form-field appearance="outline" fxFlex>
                                                    <mat-label>Net Paid Amount</mat-label>
                                                    <input matInput [(ngModel)]="netbillamt"
                                                        formControlName="NetpayAmount" name="NetpayAmount"
                                                        type="number">
                                                    <!-- <mat-error class="error"
                                                    *ngIf="InterimFormGroup.get('NetpayAmount').invalid &&  .get('NetpayAmount').touched">
                                                    Net Bill Amount is required</mat-error> -->
                                                </mat-form-field>
                                            </div>

                                            <div fxLayout="row" fxLayoutGap="4px">

                                                <mat-form-field appearance="outline" fxFlex>
                                                    <mat-label>Remark</mat-label>
                                                    <input matInput [(ngModel)]="Remark" formControlName="Remark"
                                                        name="Remark">
                                                </mat-form-field>
                                            </div>

                                            <br>
                                            <div fxLayout="row" fxLayoutGap="15px" style="float: right;">
                                                <button class="next-btn" (click)="onSave()"
                                                    style="border-radius: 16px;">Save</button>
                                                <button class="footer-btn" (click)="onClose()"
                                                    style="border-radius: 16px;">Close</button>
                                                <!-- <button class="next-btn" (click)="getIPIntreimBillPrint()"
                                                    style="border-radius: 16px;">Save</button> -->
                                            </div>
                                        </form>
                                    </div>

                                </mat-card>
                            </div>

                        </div>

                    </div>
                </div>
            </div>
            <!-- / CONTENT -->

            <!-- / CENTER -->
        </div>
        <!--End of Middle Data-->


    </div>

    //
    <div id="print-section" class="printed-div" style="padding:20px;height:550px">
        <div id="print-section" class="printed-div" style="padding:20px">
            <div>
                <div style="display:flex"><img class="logo-print"
                        src="../../../../assets/images/logos/Hospital_logo.jpg" width="110">
                    <div>
                        <div
                            style="font-weight:700;font-size:28px;text-align:left;width:1100px;margin-left:300px;padding-top:10px">
                            {{HospitalName}}</div>
                        <div style="color:#464343;text-align:left;font-size:18px;width:1100px;margin-left:150px">
                            {{HospitalAddress}}</div>
                        <div style="color:#464343;text-align:left;margin-left:320px">Call : {{Phone}}</div>
                        <div style="color:#464343;text-align:left;margin-left:340px">{{EmailId}}</div>
                    </div>
                </div>
                <hr>
                <div style="margin-top:5px"><span style="font-weight:700;margin-left:400px">IPD INTERIM BILL
                        RECEIPT</span><span style="font-weight:700;margin-left:140px">PrintDate:StrPrintDate</span>
                </div>
            </div>
            <hr>
            <div>
                <div style="display:flex;justify-content:space-between">
                    <div style="display:flex;width:700px;margin-left:10px">
                        <div style="width:140px">UHID No.</div>
                        <div style="width:10px;font-weight:700">:</div>
                        <div style="margin-left:10px">{{RegId}}</div>
                    </div>
                    <div style="display:flex;margin-right:10px;width:400px">
                        <div style="width:130px">Bill No.</div>
                        <div style="width:10px;font-weight:700">:</div>
                        <div style="margin-left:10px">{{BillNo}}</div>
                    </div>
                </div>
                <div style="display:flex;justify-content:space-between">
                    <div style="display:flex;width:700px;margin-left:10px">
                        <div style="width:140px">IPD.No</div>
                        <div style="width:10px;font-weight:700">:</div>
                        <div style="margin-left:10px">{{IPDNo}}</div>
                    </div>
                    <div style="display:flex;margin-right:10px;width:400px">
                        <div style="width:130px">Bill Date</div>
                        <div style="width:10px;font-weight:700">:</div>
                        <div style="margin-left:10px">{{BillDate}}</div>
                    </div>
                </div>
                <div style="display:flex;justify-content:space-between">
                    <div style="display:flex;width:700px;margin-left:10px">
                        <div style="width:140px">Patient Name</div>
                        <div style="width:10px;font-weight:700">:</div>
                        <div style="margin-left:10px">{{PatientName}}</div>
                    </div>
                    <div style="display:flex;margin-right:10px;width:400px">
                        <div style="width:130px">AgeYear</div>
                        <div style="width:10px;font-weight:700">:</div>
                        <div style="margin-left:10px">{{Age}}</div>
                    </div>
                </div>
                <div style="display:flex;justify-content:space-between">
                    <div style="display:flex;width:700px;margin-left:10px">
                        <div style="width:140px">Consultant Doctor</div>
                        <div style="width:10px;font-weight:700">:</div>
                        <div style="margin-left:10px">{{Doctorname}}</div>
                    </div>
                    <div style="display:flex;margin-right:10px;width:400px">
                        <div style="width:130px">Ref Doc Name</div>
                        <div style="width:10px;font-weight:700">:</div>
                    </div>
                </div>
            </div>
        </div>
        <hr style="border-color:#a0a0a0">
        <div>
            <div>
                <div style="display:flex">
                    <div style="display:flex;margin-right:10px;margin-left:20px">
                        <div style="width:60px;font-weight:700">Sr.No.</div>
                    </div>
                    <div style="display:flex">
                        <div style="width:300px;font-weight:700">Service Name</div>
                    </div>
                    <div style="display:flex;text-align:center">
                        <div style="width:300px;font-weight:700">Doctor Name</div>
                    </div>
                    <div style="display:flex;margin-left:60px">
                        <div style="width:70px;font-weight:700">Price</div>
                    </div>
                    <div style="display:flex;text-align:left;margin-left:10px">
                        <div style="width:70px;font-weight:700">Qty</div>
                    </div>
                    <div style="display:flex;text-align:center">
                        <div style="width:110px;font-weight:700">NetAmount</div>
                    </div>
                </div>
                <hr>SetMultipleRowsDesign
                <hr style="border-color:#fff">
                <div style="display:flex;margin-left:790px">
                    <div style="display:flex;width:465px">
                        <div style="width:140px;font-weight:700">Total Bill Amount</div>
                        <div style="width:10px;font-weight:700">:</div>
                        <div>{{TotalAmt}}</div>
                    </div>
                </div>
                <div style="display:flex;margin-left:790px">
                    <div style="display:flex;width:465px">
                        <div style="width:140px;font-weight:700">Concession</div>
                        <div style="width:10px;font-weight:700">:</div>
                        <div>{{ConcessionAmount}}</div>
                    </div>
                </div>
                <div style="display:flex;margin-left:790px">
                    <div style="display:flex;width:465px">
                        <div style="width:140px;font-weight:700">Net Amount</div>
                        <div style="width:10px;font-weight:700">:</div>
                        <div style="width:10px;font-weight:700">{{NetPayableAmt}}</div>
                    </div>
                </div>
                <div style="display:flex;margin-left:790px">
                    <div style="display:flex;width:465px">
                        <div style="width:140px;font-weight:700">PaidAmount</div>
                        <div style="width:10px;font-weight:700">:</div>
                        <div>{{PaidAmount}}</div>
                    </div>
                </div>
                <div style="display:flex;margin-left:790px">
                    <div style="display:flex;width:465px">
                        <div style="width:140px;font-weight:700">BalanceAmt</div>
                        <div style="width:10px;font-weight:700">:</div>
                        <!-- <div>{{BalanceAmt}}</div> -->
                        <div>StrBalanceAmount</div>
                    </div>
                </div>
            </div>
            <hr>
            <div style="display:flex;justify-content:space-between;margin-left:10px;padding-bottom:10px">
                <div style="display:flex;width:465px">
                    <div style="width:200px;font-size:18px;font-weight:700">Amt in word</div>
                    <div style="width:10px;font-size:18px;text-transform:capitalize">:</div>
                    <div style="width:700px;text-transform:capitalize;font-size:18px">StrTotalPaidAmountInWords Only
                    </div>
                </div>
            </div>
            <hr>
            <div style="display:flex;justify-content:space-between;margin-left:30px">
                <div style="position:relative;top:50px;text-align:center">
                    <div style="font-weight:700;font-size:16px">{{UserName}}</div>
                    <div>Prepared By</div>
                </div>
            </div>
        </div>
    </div>