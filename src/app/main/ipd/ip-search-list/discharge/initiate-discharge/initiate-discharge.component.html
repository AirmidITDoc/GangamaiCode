<div id="contacts" class="page-layout simple left-sidebar inner-sidebar inner-scroll">

    <mat-toolbar class="accent" style="height:50px; justify-content: space-between;width: 100%;">
        <div fxLayout="row" fxLayoutAlign="start center">
            <button mat-icon-button class="sidebar-toggle mr-12" style="color: white;">
                <mat-icon>menu</mat-icon>
            </button>
            <button mat-icon-button class="logo-icon mr-16" [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}"
                style="color: white;">
                <mat-icon>account_box</mat-icon>
            </button>
            <span class="logo-text h1" [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}" style="color: white;">
                Discharge
            </span>
        </div>
        <div fxLayout="row">
            <button mat-raised-button (click)="DischargeInitiate()" style="color: brown;">
                Initiate Discharge
             </button>
            <button mat-icon-button tabIndex="-1" (click)="onClose()" aria-label="Close dialog">
                <mat-icon>close</mat-icon>
            </button>
        </div>
    </mat-toolbar>


    <div class="content">
        <div class="center p-12 pb-56" style="border-radius: 4px;">
            <div class="content-card">
                <div fxFlexFill fxLayout="row" fxLayout.gt-xs="column" fxLayoutGap="10px">
                  
                        <mat-card style="padding: 6px; height: fit-content;">
                            <div class="patient-info-container">
                                <div class="patient-info-box">
                                    <div class="patient-info-title border-bottom pb-2">
                                        <span class="h1">Patient Information</span>
                                    </div>
                                    <div class="patient-info-box my-8">
                                        <div class="patient-info-row patient-info-1-111 pt-8" fxLayout="row"
                                            fxLayoutAlign="space-between">
                                            <div fxLayout="column" fxLayoutGap="6px">
                                                <div class="patient-col">
                                                    <span class="patient-col-key ">UHID NO</span>
                                                    <span>:</span>
                                                    <span class="patient-col-value">{{selectedAdvanceObj.RegNo}}</span>
                                                </div>
                                                <div class="patient-col">
                                                    <span class="patient-col-key">Patient Name</span>
                                                    <span>:</span>
                                                    <span
                                                        class="patient-col-value">{{selectedAdvanceObj.PatientName}}</span>
                                                </div>
                                                <div class="patient-col">
                                                    <span class="patient-col-key">Doctor Name</span>
                                                    <span>:</span>
                                                    <span
                                                        class="patient-col-value">{{selectedAdvanceObj.Doctorname}}</span>
                                                </div>
                                                <div class="patient-col">
                                                    <span class="patient-col-key"> Department Name</span>
                                                    <span>:</span>
                                                    <span
                                                        class="patient-col-value">{{selectedAdvanceObj.DepartmentName}}</span>
                                                </div>
                                            </div>
                                            <div fxLayout="column" fxLayoutGap="6px">
                                                <div class="patient-col">
                                                    <span class="patient-col-key">DOA | Time</span>
                                                    <span>:</span>
                                                    <span class="patient-col-value">{{selectedAdvanceObj.DOA}}</span>
                                                </div>
                                                <div class="patient-col">
                                                    <span class="patient-col-key">IPD No</span>
                                                    <span>:</span>
                                                    <span class="patient-col-value">{{selectedAdvanceObj.IPDNo}}</span>
                                                </div>
                                                <div class="patient-col">
                                                    <span class="patient-col-key ">Age | Sex</span>
                                                    <span>:</span>
                                                    <span
                                                        class="patient-col-value">{{selectedAdvanceObj.AgeYear}}Y|{{selectedAdvanceObj.AgeMonth}}M|{{selectedAdvanceObj.AgeDay}}
                                                        D | {{selectedAdvanceObj.GenderName}}</span>
                                                </div>
                                                <div class="patient-col">
                                                    <span class="patient-col-key">Ref-Doctor Name</span>
                                                    <span>:</span>
                                                    <span
                                                        class="patient-col-value">{{selectedAdvanceObj.RefDocName}}</span>
                                                </div>
                                            </div>
                                            <div fxLayout="column" fxLayoutGap="6px">
                                                <div class="patient-col">
                                                    <span class="patient-col-key">Ward | Bed Name</span>
                                                    <span>:</span>
                                                    <span class="patient-col-value">{{selectedAdvanceObj.RoomName}} |
                                                        {{selectedAdvanceObj.BedName}}</span>
                                                </div>
                                                <div class="patient-col">
                                                    <span class="patient-col-key">Patient Type</span>
                                                    <span>:</span>
                                                    <span
                                                        class="patient-col-value">{{selectedAdvanceObj.PatientType}}</span>
                                                </div>

                                                <div class="patient-col">
                                                    <span class="patient-col-key">Tariff Name</span>
                                                    <span>:</span>
                                                    <span
                                                        class="patient-col-value">{{selectedAdvanceObj.TariffName}}</span>
                                                </div>
                                                <div class="patient-col">
                                                    <span class="patient-col-key">Company Name</span>
                                                    <span>:</span>
                                                    <span class="patient-col-value"
                                                        style="color: orange;">{{selectedAdvanceObj.CompanyName}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </mat-card> 
                        <mat-card style="padding: 6px; height: fit-content;">
                            <form [formGroup]="DischargeInitiateForm">
                        
                                <div fxlayout="column" fxFlex>
                                    <div class="patient-info-title border-bottom pb-2">
                                        <span class="h1">Discharge Information</span>
                                    </div> 
                                    <div fxlayout="row" fxLayoutGap="4px">
                                        <mat-form-field appearance="outline" fxFlex="30%">
                                            <mat-label>Doctor Name</mat-label>
                                            <input matAutocompletePosition="below" type="text" placeholder="Select Doctor Name" matInput
                                                formControlName="DoctorID" [matAutocomplete]="autoDoctor" required [(ngModel)]="vDoctorId">
                                            <span matSuffix style="display: flex;">
                                                <mat-icon class="mat-icon-close"
                                                    (click)="DischargeInitiateForm.get('DoctorID').setValue(''); isDoctorSelected = false;">close</mat-icon>
                                                <mat-icon class="mat-icon-close"
                                                    (click)="DischargeInitiateForm.get('DoctorID').setValue(''); isDoctorSelected = false;">search</mat-icon>
                                            </span>
                                            <mat-autocomplete #autoDoctor="matAutocomplete" [displayWith]="getOptionTextDoctor">
                                                <mat-option *ngFor="let option of filteredOptionsDoctorname | async" [value]="option">
                                                    {{option.DoctorName}}
                                                </mat-option>
                                            </mat-autocomplete>
                                        </mat-form-field>
                        
                                        <mat-form-field appearance="outline" fxFlex="30%">
                                            <mat-label>Discharge Type Name</mat-label>
                                            <input matAutocompletePosition="below" type="text" placeholder="Select DischargeTypeName" matInput
                                                formControlName="DischargeTypeId" [matAutocomplete]="autoDisctype" required
                                                [(ngModel)]="vDescType">
                                            <span matSuffix style="display: flex;">
                                                <mat-icon class="mat-icon-close"
                                                    (click)="DischargeInitiateForm.get('DischargeTypeId').setValue(''); isDistypeSelected = false;">close</mat-icon>
                                                <mat-icon class="mat-icon-close"
                                                    (click)="DischargeInitiateForm.get('DischargeTypeId').setValue(''); isDistypeSelected = false;">search</mat-icon>
                                            </span>
                                            <mat-autocomplete #autoDisctype="matAutocomplete" [displayWith]="getOptionTextDisctype">
                                                <mat-option *ngFor="let option of filteredOptionsDisctype | async" [value]="option">
                                                    {{option.DischargeTypeName}}
                                                </mat-option>
                                            </mat-autocomplete>
                                        </mat-form-field>
                        
                                        <!-- <mat-form-field appearance="outline" fxFlex>
                                                                                            <mat-label>Mode</mat-label>
                                                                                            <input matAutocompletePosition="below" type="text"
                                                                                                placeholder="Select Doctor Name" matInput formControlName="ModeId"
                                                                                                [matAutocomplete]="autoMode" >
                                                                                            <span matSuffix style="display: flex;">
                                                                                                <mat-icon class="mat-icon-close"
                                                                                                    (click)="_IpSearchListService.DischargeInitiateForm.get('ModeId').setValue(''); isModeSelected = false;">close</mat-icon>
                                                                                                <mat-icon class="mat-icon-close"
                                                                                                    (click)="_IpSearchListService.DischargeInitiateForm.get('ModeId').setValue(''); isModeSelected = false;">search</mat-icon>
                                                                                            </span>
                                                                                            <mat-autocomplete #autoMode="matAutocomplete"
                                                                                                [displayWith]="getOptionTextMode">
                                                                                                <mat-option *ngFor="let option of filteredOptionsModename | async"
                                                                                                    [value]="option">
                                                                                                    {{option.ModeOfDischargeName}}
                                                                                                </mat-option>
                                                                                            </mat-autocomplete>
                                                                                        </mat-form-field>  -->
                        
                                        <!-- <mat-form-field appearance="outline" fxFlex>
                                                                                            <mat-label>Comments</mat-label>
                                                                                            <input name="Comments" formControlName="Comments"
                                                                                                placeholder="Comments" matInput [(ngModel)]="vComments">
                                                                                        </mat-form-field> -->
                        
                                    </div>
                                </div>
                            </form>
                        </mat-card>
                
                        <div fxFlex="100%">
                            <mat-table matSort [dataSource]="dsApprovList" [@animateStagger]="{value:'50'}" style="overflow: auto;">
                    
                                <ng-container matColumnDef="DepartmentName" sticky>
                                    <mat-header-cell *matHeaderCellDef mat-sort-header fxHide fxShow.gt-sm>
                                        DepartmentName
                                    </mat-header-cell>
                                    <mat-cell *matCellDef="let contact" fxShow.gt-sm>
                                        {{contact.DepartmentName}}
                                    </mat-cell>
                                </ng-container>
                            
                                <ng-container matColumnDef="IsApprove" sticky>
                                    <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm class="w-120">
                                        IsApprove</mat-header-cell>
                                    <mat-cell *matCellDef="let contact" fxShow.gt-sm class="w-120">
                                        {{contact.InstallationDate | date: 'dd/MM/yyyy'}}
                                    </mat-cell>
                                </ng-container>
                            
                                <ng-container matColumnDef="ApprovedBy">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm class="w-120">
                                        ApprovedBy</mat-header-cell>
                                    <mat-cell *matCellDef="let contact" fxShow.gt-sm class="w-120">
                                        {{contact.AMCDueDate | date: 'dd/MM/yyyy'}}
                                    </mat-cell>
                                </ng-container>
                            
                                <ng-container matColumnDef="IsNoDues" sticky>
                                    <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>
                                        IsNoDues</mat-header-cell>
                                    <mat-cell *matCellDef="let contact" fxShow.gt-sm matTooltip="{{contact.CustomerName}}"
                                        matTooltipClass="example-tooltip-uppercase" aria-label="Button that shows a red tooltip">
                                        {{contact.CustomerName}}
                                    </mat-cell>
                                </ng-container>
                            
                                <ng-container matColumnDef="Comments">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header fxShow.gt-sm>
                                        Comments</mat-header-cell>
                                    <mat-cell *matCellDef="let contact" fxShow.gt-sm matTooltip="{{contact.CustomerAddress}}"
                                        matTooltipClass="example-tooltip-uppercase" aria-label="Button that shows a red tooltip">
                                        {{contact.CustomerAddress}}
                                    </mat-cell>
                                </ng-container>
                            
                                <ng-container matColumnDef="loading">
                                    <mat-header-cell *matFooterCellDef colspan="6" style="display: none;">
                                    </mat-header-cell>
                                </ng-container>
                            
                                <ng-container matColumnDef="noData">
                                    <mat-footer-cell *matFooterCellDef colspan="6">
                                        no data found...
                                    </mat-footer-cell>
                                </ng-container>
                            
                                <mat-header-row class="accent" *matHeaderRowDef="displayedColumns; sticky: true">
                                </mat-header-row>
                                <mat-row *matRowDef="let contact; columns: displayedColumns;" class="contact"
                                    [@animate]="{value:'*',params:{y:'100%'}}" appHighlight></mat-row>
                                <mat-footer-row *matFooterRowDef="['loading']"
                                 [ngClass]="{'hide': !(sIsLoading == 'loading-data')}">
                                </mat-footer-row>
                                <mat-footer-row *matFooterRowDef="['noData']"
                                    [ngClass]="{'hide':!(dsApprovList!=null && dsApprovList.data.length==0)}">
                                </mat-footer-row>
                            </mat-table>
                        </div>
              

                </div>
            </div>
        </div>
    </div> 
</div>